<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Netty | Taylor</title><meta name="keywords" content="timeline"><meta name="author" content="Taylor Luo"><meta name="copyright" content="Taylor Luo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1. Netty 介绍Netty 是一个异步的、基于事件驱动的网络应用框架，用于快速开发可维护、高性能的网络服务器和客户端。Netty 在 Java 网络应用框架中的地位就好比：Spring 框架在 JavaEE 开发中的地位。  RocketMQ、ES、Dubbo、ZK  Kafka 自己实现了网络模型做 RPC。底层基于 Java NIO，采用和 Netty 一样的 Reactor 线程模型"><meta property="og:type" content="article"><meta property="og:title" content="Netty"><meta property="og:url" content="https://taylorluo.github.io/2023/03/27/003-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%93%E9%A2%98/%E5%B9%B6%E5%8F%91%E8%BF%9B%E9%98%B6-20%E3%80%81Netty/index.html"><meta property="og:site_name" content="Taylor"><meta property="og:description" content="1. Netty 介绍Netty 是一个异步的、基于事件驱动的网络应用框架，用于快速开发可维护、高性能的网络服务器和客户端。Netty 在 Java 网络应用框架中的地位就好比：Spring 框架在 JavaEE 开发中的地位。  RocketMQ、ES、Dubbo、ZK  Kafka 自己实现了网络模型做 RPC。底层基于 Java NIO，采用和 Netty 一样的 Reactor 线程模型"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://unpkg.com/justlovesmile-img/cover3.jpg"><meta property="article:published_time" content="2023-03-27T16:00:00.000Z"><meta property="article:modified_time" content="2023-06-13T23:32:42.687Z"><meta property="article:author" content="Taylor Luo"><meta property="article:tag" content="timeline"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://unpkg.com/justlovesmile-img/cover3.jpg"><link rel="shortcut icon" href="https://gcore.jsdelivr.net/gh/code-anan/image/蜘蛛网万圣节.png"><link rel="canonical" href="https://taylorluo.github.io/2023/03/27/003-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%93%E9%A2%98/%E5%B9%B6%E5%8F%91%E8%BF%9B%E9%98%B6-20%E3%80%81Netty/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Netty",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-06-14 07:32:42"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)})),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/self/Kimbiedark.css"><meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="Taylor" type="application/atom+xml"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/index.jpeg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">183</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">85</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">31</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url('https://unpkg.com/justlovesmile-img/cover3.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Taylor</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Netty</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-27T16:00:00.000Z" title="发表于 2023-03-28 00:00:00">2023-03-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-06-13T23:32:42.687Z" title="更新于 2023-06-14 07:32:42">2023-06-14</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>15分钟</span></span><span class="post-meta-separator">|</span><span data-flag-title="Netty"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2023/03/27/003-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%93%E9%A2%98/%E5%B9%B6%E5%8F%91%E8%BF%9B%E9%98%B6-20%E3%80%81Netty/#post-comment"><span id="twikoo-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><hr><h1 id="1-Netty-介绍"><a href="#1-Netty-介绍" class="headerlink" title="1. Netty 介绍"></a>1. Netty 介绍</h1><p>Netty 是一个<span style="background-color:#f0f">异步的、基于事件驱动的</span>网络应用框架，用于快速开发可维护、高性能的网络服务器和客户端。Netty 在 Java 网络应用框架中的地位就好比：Spring 框架在 JavaEE 开发中的地位。</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230329105012.png" alt="image.png"></p><p>RocketMQ、ES、Dubbo、ZK</p><ol><li><span style="background-color:#f0f">Kafka 自己实现了网络模型做 RPC。底层基于 Java NIO，采用和 Netty 一样的 Reactor 线程模型。</span></li><li>Redis 也是自己的 IO 多路复用和事件分发器，原理类似</li></ol><a href="/2023/05/13/005-%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98/MQ-Kafka/" title="MQ-Kafka">MQ-Kafka</a><h2 id="1-1-IO"><a href="#1-1-IO" class="headerlink" title="1.1. IO"></a>1.1. IO</h2><p>[[IO多路复用]]</p><h2 id="1-2-原生-NIO-存在的问题"><a href="#1-2-原生-NIO-存在的问题" class="headerlink" title="1.2. 原生 NIO 存在的问题"></a>1.2. 原生 NIO 存在的问题</h2><ol><li>NIO 的类库和 API 繁杂，使用麻烦：需要熟练掌握 Selector、ServerSocketChannel、SocketChannel、ByteBuffer 等。</li><li>需要具备其他的额外技能：要熟悉 Java 多线程编程，因为 NIO 编程涉及到 Reactor 模式，你必须对多线程和网络编程非常熟悉，才能编写出高质量的 NIO 程序。</li><li>开发工作量和难度都非常大：例如客户端面临断连重连、网络闪断、半包读写、失败缓存、网络拥塞和异常流的处理等等。</li><li>JDK NIO 的 Bug：例如臭名昭著的 Epoll Bug，它会导致 Selector 空轮询，最终导致 CPU100%。直到 JDK1.7 版本该问题仍旧存在，没有被根本解决。</li></ol><h2 id="1-3-Netty-的优势"><a href="#1-3-Netty-的优势" class="headerlink" title="1.3. Netty 的优势"></a>1.3. Netty 的优势</h2><ul><li>Netty vs NIO，工作量大，bug 多<ul><li>需要自己构建协议</li><li>解决 TCP 传输问题，如粘包、半包</li><li>epoll 空轮询导致 CPU 100%</li><li>对 API 进行增强，使之更易用，如 FastThreadLocal &#x3D;&gt; ThreadLocal，ByteBuf &#x3D;&gt; ByteBuffer</li></ul></li><li>Netty vs 其它网络应用框架<ul><li>Mina 由 apache 维护，将来 3.x 版本可能会有较大重构，破坏 API 向下兼容性，Netty 的开发迭代更迅速，API 更简洁、文档更优秀</li><li>久经考验，16 年，Netty 版本</li></ul></li></ul><h1 id="2-Epoll"><a href="#2-Epoll" class="headerlink" title="2. Epoll"></a>2. Epoll</h1><p>[[框架源码专题-Redis-4、原理进阶-数据类型-单线程多路复用#^tmrkhl]]</p><h1 id="3-三种-Reactor-网络模型⭐️🔴"><a href="#3-三种-Reactor-网络模型⭐️🔴" class="headerlink" title="3. 三种 Reactor 网络模型⭐️🔴"></a>3. 三种 Reactor 网络模型⭐️🔴</h1><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6892687008552976398#heading-20">https://juejin.cn/post/6892687008552976398#heading-20</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/alimayun/p/12509771.html">https://www.cnblogs.com/alimayun/p/12509771.html</a></p><h2 id="3-1-传统阻塞-I-x2F-O-服务模型-gt-每客户端-1-线程"><a href="#3-1-传统阻塞-I-x2F-O-服务模型-gt-每客户端-1-线程" class="headerlink" title="3.1. 传统阻塞 I&#x2F;O 服务模型-&gt;每客户端 1 线程"></a>3.1. 传统阻塞 I&#x2F;O 服务模型-&gt;每客户端 1 线程</h2><h3 id="3-1-1-工作原理图"><a href="#3-1-1-工作原理图" class="headerlink" title="3.1.1. 工作原理图"></a>3.1.1. 工作原理图</h3><p>黄色的框表示对象，蓝色的框表示线程<br>白色的框表示方法（API）</p><h3 id="3-1-2-模型特点"><a href="#3-1-2-模型特点" class="headerlink" title="3.1.2. 模型特点"></a>3.1.2. 模型特点</h3><p>采用阻塞 IO 模式获取输入的数据<br>每个连接都需要独立的线程完成数据的输入，业务处理，数据返回</p><h3 id="3-1-3-问题分析"><a href="#3-1-3-问题分析" class="headerlink" title="3.1.3. 问题分析"></a>3.1.3. 问题分析</h3><ol><li>当并发数很大，就会创建大量的线程，占用很大系统资源</li><li>连接创建后，如果当前线程暂时没有数据可读，该线程会阻塞在 Handler 对象中的 read 操作，导致上面的处理线程资源浪费</li></ol><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230531081128.png" alt="image.png"></p><h2 id="3-2-单-Reactor-单线程-gt-连接应答和业务处理使用同一个线程"><a href="#3-2-单-Reactor-单线程-gt-连接应答和业务处理使用同一个线程" class="headerlink" title="3.2. 单 Reactor 单线程-&gt;连接应答和业务处理使用同一个线程"></a>3.2. 单 Reactor 单线程-&gt;连接应答和业务处理使用同一个线程</h2><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230328221134.png" alt="image.png"></p><h3 id="3-2-1-方案说明"><a href="#3-2-1-方案说明" class="headerlink" title="3.2.1. 方案说明"></a>3.2.1. 方案说明</h3><ol><li>Select 是前面 I&#x2F;O 复用模型介绍的标准网络编程 API，可以实现应用程序通过一个阻塞对象监听多路连接请求</li><li>Reactor 对象通过 Select 监控客户端请求事件，收到事件后通过 Dispatch 进行分发</li><li>如果是建立连接请求事件，则由 Acceptor 通过 Accept 处理连接请求，然后创建一个 Handler 对象处理连接完成后的后续业务处理</li><li>如果不是建立连接事件，则 Reactor 会分发调用连接对应的 Handler 来响应</li><li>Handler 会完成 Read → 业务处理 → Send 的完整业务流程</li></ol><p>结合实例：服务器端<span style="background-color:#f0f">用一个线程</span>通过多路复用搞定所有的 IO 操作（包括连接，读、写等），编码简单，清晰明了，但是如果客户端连接数量较多，将无法支撑，前面的 NIO 案例就属于这种模型。</p><h3 id="3-2-2-优缺点分析"><a href="#3-2-2-优缺点分析" class="headerlink" title="3.2.2. 优缺点分析"></a>3.2.2. 优缺点分析</h3><ol><li>优点：模型简单，没有多线程、进程通信、竞争的问题，全部都在一个线程中完成</li><li>缺点：性能问题，只有一个线程，无法完全发挥多核 CPU 的性能。Handler 在处理某个连接上的业务时，整个进程无法处理其他连接事件，很容易导致性能瓶颈</li><li>缺点：可靠性问题，线程意外终止，或者进入死循环，会导致整个系统通信模块不可用，不能接收和处理外部消息，造成节点故障</li><li>使用场景：客户端的数量有限，业务处理非常快速，<span style="background-color:#f0f">比如 Redis 6 之前，所有任务都是单线程完成</span>，在业务处理的时间复杂度 O(1) 的情况。但 Redis 中具体的实现逻辑不一样，Redis 分为 3 个处理器：连接应答处理器、命令回复处理器、命令请求处理器。</li></ol><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230318073757.png" alt="image.png"></p><h2 id="3-3-单-Reactor-多线程"><a href="#3-3-单-Reactor-多线程" class="headerlink" title="3.3. 单 Reactor 多线程"></a>3.3. 单 Reactor 多线程</h2><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230328221243.png" alt="image.png"></p><h3 id="3-3-1-方案说明"><a href="#3-3-1-方案说明" class="headerlink" title="3.3.1. 方案说明"></a>3.3.1. 方案说明</h3><ol><li>Reactor 对象通过 Select 监控客户端请求事件，收到事件后，通过 Dispatch 进行分发</li><li>如果是建立连接请求，则由 Acceptor 通过 accept 处理连接请求，然后创建一个 Handler 对象处理完成连接后的各种事件</li><li>如果不是连接请求，则由 Reactor 分发调用连接对应的 handler 来处理（也就是说连接已经建立，后续客户端再来请求，那基本就是数据请求了，直接调用之前为这个连接创建好的 handler 来处理）</li><li><span style="background-color:#f0f">handler 只负责响应事件，不做具体的业务处理</span>（这样不会使 handler 阻塞太久），通过 read 读取数据后，会分发给后面的 worker 线程池的某个线程处理业务。【业务处理是最费时的，所以将业务处理交给线程池去执行】</li><li>worker 线程池会分配独立线程完成真正的业务，并将结果返回给 handler</li><li>handler 收到响应后，通过 send 将结果返回给 client</li></ol><h3 id="3-3-2-优缺点分析"><a href="#3-3-2-优缺点分析" class="headerlink" title="3.3.2. 优缺点分析"></a>3.3.2. 优缺点分析</h3><p>优点：可以充分利用多核 CPU 的处理能力。<br>缺点：多线程数据共享和访问比较复杂；Reactor 承担所有事件的监听和响应，在单线程中运行，高并发场景下容易成为性能瓶颈。</p><h2 id="3-4-主从-Reactor-多线程⭐️🔴"><a href="#3-4-主从-Reactor-多线程⭐️🔴" class="headerlink" title="3.4. 主从 Reactor 多线程⭐️🔴"></a>3.4. 主从 Reactor 多线程⭐️🔴</h2><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230328221403.png" alt="image.png"></p><p>针对单 Reactor 多线程模型中，Reactor 在单线程中运行，高并发场景下容易成为性能瓶颈，可以让 Reactor 在多线程中运行。</p><h3 id="3-4-1-方案说明"><a href="#3-4-1-方案说明" class="headerlink" title="3.4.1. 方案说明"></a>3.4.1. 方案说明</h3><p>SubReactor 是可以有多个的，如果只有一个 SubReactor 的话那和单 Reactor 多线程就没什么区别了。</p><ol><li>Reactor 主线程 MainReactor 对象通过 select 监听连接事件，收到事件后，通过 Acceptor 处理连接事件</li><li>当 Acceptor 处理连接事件后，MainReactor 将连接分配给 SubReactor</li><li>subreactor 将连接<span style="background-color:#f0f">加入到连接队列</span>进行监听，并创建 handler 进行各种事件处理</li><li>当有新事件发生时，subreactor 就会调用对应的 handler 处理</li><li>handler 通过 read 读取数据，分发给后面的 worker 线程处理</li><li>worker 线程池分配独立的 worker 线程进行业务处理，并返回结果</li><li>handler 收到响应的结果后，再通过 send 将结果返回给 client</li><li>Reactor 主线程可以对应多个 Reactor 子线程，即 MainRecator 可以关联多个 SubReactor</li></ol><h3 id="3-4-2-优缺点分析"><a href="#3-4-2-优缺点分析" class="headerlink" title="3.4.2. 优缺点分析"></a>3.4.2. 优缺点分析</h3><p>优点：父线程与子线程的数据交互简单职责明确，父线程只需要接收新连接，子线程完成后续的业务处理。</p><p>父线程与子线程的数据交互简单，Reactor 主线程只需要把新连接传给子线程，子线程无需返回数据。</p><p>这种模型在许多项目中广泛使用，包括 Nginx 主从 Reactor 多进程模型，Memcached 主从多线程，Netty 主从多线程模型的支持。</p><h2 id="3-5-Reactor-模式小结"><a href="#3-5-Reactor-模式小结" class="headerlink" title="3.5. Reactor 模式小结"></a>3.5. Reactor 模式小结</h2><h3 id="3-5-1-3-种模式用生活案例来理解"><a href="#3-5-1-3-种模式用生活案例来理解" class="headerlink" title="3.5.1. 3 种模式用生活案例来理解"></a>3.5.1. 3 种模式用生活案例来理解</h3><p>单 Reactor 单线程，前台接待员和服务员是同一个人，全程为顾客服务<br>单 Reactor 多线程，1 个前台接待员，多个服务员，接待员只负责接待<br>主从 Reactor 多线程，多个前台接待员，多个服务生</p><h3 id="3-5-2-Reactor-模式具有如下的优点"><a href="#3-5-2-Reactor-模式具有如下的优点" class="headerlink" title="3.5.2. Reactor 模式具有如下的优点"></a>3.5.2. Reactor 模式具有如下的优点</h3><p>响应快，不必为单个同步时间所阻塞，虽然 Reactor 本身依然是同步的（比如你第一个 SubReactor 阻塞了，我可以调下一个 SubReactor 为客户端服务）<br>可以最大程度的避免复杂的多线程及同步问题，并且避免了多线程&#x2F;进程的切换开销<br>扩展性好，可以方便的通过增加 Reactor 实例个数来充分利用 CPU 资源<br>复用性好，Reactor 模型本身与具体事件处理逻辑无关，具有很高的复用性</p><h3 id="3-5-3-注意点"><a href="#3-5-3-注意点" class="headerlink" title="3.5.3. 注意点"></a>3.5.3. 注意点</h3><p>注意：前面介绍的四种 reactor 模式在具体实现时遵循的原则是：每个文件描述符只由一个线程操作。这样可以轻轻松松解决消息收发的顺序性问题，也避免了关闭文件描述符的各种 race condition。一个线程可以操作多个文件描述符，但是一个线程不能操作别的线程拥有的文件描述符。这一点不难做到。epoll 也遵循了相同的原则。Linux 文档中并没有说明，当一个线程证阻塞在 epoll_wait 时，另一个线程往 epoll fd 添加一个新的监控 fd 会发生什么。新 fd 上的事件会不会在此次 epoll_wait 调用中返回？为了稳妥起见，我们应该吧对同一个 epoll fd 的操作 (添加、删除、修改等等) 都放到同一个线程中执行。</p><h3 id="3-5-4-与-Epoll-关系"><a href="#3-5-4-与-Epoll-关系" class="headerlink" title="3.5.4. 与 Epoll 关系"></a>3.5.4. 与 Epoll 关系</h3><p>reactor 就是对 epoll 进行封装，进行网络 IO 与业务的解耦，将 epoll 管理 IO 变成管理事件，整个程序由事件进行驱动执行。就像下图一样，有就绪事件返回，reactor：由事件驱动执行对应的回调函数；epoll：需要自己判断。</p><h1 id="4-Netty-的网络模型⭐️🔴"><a href="#4-Netty-的网络模型⭐️🔴" class="headerlink" title="4. Netty 的网络模型⭐️🔴"></a>4. Netty 的网络模型⭐️🔴</h1><p><span style="display:none">%%<br>▶3.🏡⭐️◼️【🌈费曼无敌🌈⭐️第一步⭐️】◼️⭐️-point-20230402-1010%%</span>❕ ^9ze94j</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230330085952.png" alt="image.png"></p><ol><li>Netty 抽象出两组线程池，<span style="background-color:#f0f">BossGroup 专门负责接收客户端的连接，WorkerGroup 专门负责网络的读写</span></li><li>BossGroup 和 WorkerGroup 类型都是 NioEventLoopGroup</li><li>NioEventLoopGroup 相当于一个事件循环组，这个组中含有多个事件循环，每一个事件循环是 NioEventLoop</li><li>NioEventLoop 表示一个不断循环的执行处理任务的线程，<span style="background-color:#f0f">每个 NioEventLoop 都有一个 Selector，用于监听绑定在它上面的 socket 的网络通讯</span></li><li>NioEventLoopGroup 可以有多个线程，即可以含有多个 NioEventLoop</li><li>每个 BossGroup 下面的 NioEventLoop 循环执行的步骤有 3 步<ol><li>轮询 accept 事件</li><li>处理 accept 事件，与 client 建立连接，生成 NioScocketChannel，并将其注册到 workerGroup 的某个 NioEventLoop 上的 Selector 上面</li><li>继续处理任务队列的任务，即 runAllTasks</li></ol></li><li>每个 WorkerGroup NioEventLoop 循环执行的步骤<ol><li>轮询 read，write 事件</li><li>处理 I&#x2F;O 事件，即 read，write 事件，在对应 NioScocketChannel 处理</li><li>处理任务队列的任务，即 runAllTasks</li></ol></li><li>每个 Worker NioEventLoop 处理业务时，会使用 pipeline（管道），pipeline 中包含了 channel（通道），即通过 pipeline 可以获取到对应通道，管道中维护了很多的处理器。</li></ol><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Youth_lql/article/details/115734142">https://blog.csdn.net/Youth_lql/article/details/115734142</a></p><h1 id="5-Netty-的逻辑架构⭐️🔴"><a href="#5-Netty-的逻辑架构⭐️🔴" class="headerlink" title="5. Netty 的逻辑架构⭐️🔴"></a>5. Netty 的逻辑架构⭐️🔴</h1><p>Netty 的逻辑处理架构是典型的网络分层架构设计的，分别为网络通信层、事件调度层和服务编排层。每一层各司其职，如下图所示：</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230329091100.png" alt="image.png"></p><h2 id="5-1-网络通信层"><a href="#5-1-网络通信层" class="headerlink" title="5.1. 网络通信层"></a>5.1. 网络通信层</h2><p>网络通信层的职责就是执行网络 I&#x2F;O 的操作。它支持多种网络协议和 I&#x2F;O 模型的连接操作。当网络数据读取到内核缓冲区后，会触发各种网络事件，这些网络事件会分发给事件调度层来处理。网络通信层有三个核心组件：<span style="background-color:#f0f">Bootstrap、ServerBootstrap 和 Channel</span>。</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230329222107.png" alt="image.png"></p><h3 id="5-1-1-Bootstrap"><a href="#5-1-1-Bootstrap" class="headerlink" title="5.1.1. Bootstrap"></a>5.1.1. Bootstrap</h3><p>意思是引导，一个 Netty 应用通常由一个 Bootstrap 开始，主要作用是配置整个 Netty 程序，串联各个组件，Netty 中 <span style="background-color:#f0f">Bootstrap 类是客户端程序的启动引导类，用于连接服务端的，一般用于 Client 的开发上</span></p><h3 id="5-1-2-ServerBootstrap"><a href="#5-1-2-ServerBootstrap" class="headerlink" title="5.1.2. ServerBootstrap"></a>5.1.2. ServerBootstrap</h3><p><span style="background-color:#f0f">是服务端启动引导类，用于服务端启动绑定本地端口</span>，一般绑定两个： EventLoopGroup(主从多线程 Reactor)，一个称为 boss，另外一个成为 worker。</p><p>Bootstrap&#x2F;ServerBootstrap 组件更加方便我们配置和启动 Netty 程序，它是整个 Netty 程序的入口，串联了 Netty 所有核心组件的初始化工作。</p><h3 id="5-1-3-channel"><a href="#5-1-3-channel" class="headerlink" title="5.1.3. channel"></a>5.1.3. channel</h3><p>Netty 网络通信的组件，能够用于执行网络 I&#x2F;O 操作。它是 Netty 网络通信的载体。Channel 提供了基本的 API 用于网络 I&#x2F;O 操作，例如 register 注册事件、bind 绑定事件、connect 连接事件、read 读事件、write 写事件、flush 数据冲刷等。</p><p>Netty 中的 Channel 是<span style="background-color:#f0f">基于 JDK NIO 的 Channel 上做了更高层次的抽象，同时屏蔽了底层 Socket 的复杂性，增强了 Channel 的功能，在使用 Netty 时不需要再直接跟 JDK Socket 打交道。</span></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230330074140.png" alt="image.png"></p><h2 id="5-2-事件调度层"><a href="#5-2-事件调度层" class="headerlink" title="5.2. 事件调度层"></a>5.2. 事件调度层</h2><p><span style="background-color:#f0f">事件调度层通过 Reactor 线程模型对各类事件进行聚合处理</span>，通过 Selector 主循环线程集成多种事件 (I&#x2F;O 事件、信号事件、定时事件等)，实际的业务处理逻辑交给服务编排层的 ChannelHandler 来处理。</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230330101838.png" alt="image.png"></p><p>事件调度层<span style="background-color:#f0f">最核心的组件就是 EventLoop 和 EventLoopGroup：EventLoopGroup 实质上是 Netty 基于 JDK 线程池的抽象，本质就是线程池，主要负责接收 I&#x2F;O 请求，并分配线程执行处理。而 EventLoop 可以理解成一个线程，EventLoop 创建出来之后会跟一个线程绑定并且处理 Channel 中的事件</span>。如下图所示：</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230329091313.png" alt="image.png"></p><h2 id="5-3-服务编排层"><a href="#5-3-服务编排层" class="headerlink" title="5.3. 服务编排层"></a>5.3. 服务编排层</h2><p>服务编排的职责是组装各类服务，它是 Netty 的核心处理链，用以实现网络事件的动态编排和有序传播。</p><p>服务编排的核心组件有：ChannelPipeline、ChannelHandler、ChannelHandlerContext。</p><h3 id="5-3-1-ChannelPipeline"><a href="#5-3-1-ChannelPipeline" class="headerlink" title="5.3.1. ChannelPipeline"></a>5.3.1. ChannelPipeline</h3><p>ChannelPipeline 是 Netty 的核心编排组件，负责组装各类的 ChannelHandler<br>ChannelPipeline 本质是一个双向链表，通过责任链模式将不同的 ChannelHandler 链接在一起。<br>每个 Channel 有且仅有一个 ChannelPipeline 与之对应。<br>当 I&#x2F;O 读写事件触发时，ChannelPipeline 会一次调用 ChannelHandler 列表对 Channel 的数据进行拦截和处理。</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230330095605.png" alt="image.png"></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230330100214.png" alt="image.png"></p><h3 id="5-3-2-ChannelHandler"><a href="#5-3-2-ChannelHandler" class="headerlink" title="5.3.2. ChannelHandler"></a>5.3.2. ChannelHandler</h3><p>实际数据的编解码以及加工处理的操作是由 ChannelHandler 来完成的</p><h3 id="5-3-3-ChannelHandlerContext"><a href="#5-3-3-ChannelHandlerContext" class="headerlink" title="5.3.3. ChannelHandlerContext"></a>5.3.3. ChannelHandlerContext</h3><p>每创建一个 Channel 都会绑定一个新的 ChannelPipeline，ChannelPipeline 中每加入一个 ChannelHandler 都会绑定一个 ChannelHandlerContext。由此可见，ChannelPipeline、ChannelHandlerContext、ChannelHandler 三个组件的关系是密切相关的。</p><p>ChannelHandlerContext 用于保存 ChannelHandler 上下文，通过 ChannelHandlerContext 我们可以知道 ChannelPipeline 和 ChannelHandler 的关联关系。</p><h1 id="6-Netty-特性"><a href="#6-Netty-特性" class="headerlink" title="6. Netty 特性"></a>6. Netty 特性</h1><h2 id="6-1-零拷贝"><a href="#6-1-零拷贝" class="headerlink" title="6.1. 零拷贝"></a>6.1. 零拷贝</h2><a href="/2023/05/27/003-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%93%E9%A2%98/%E5%B9%B6%E5%8F%91%E8%BF%9B%E9%98%B6-1%E3%80%81%E9%9B%B6%E6%8B%B7%E8%B4%9D/" title="并发进阶-1、零拷贝">并发进阶-1、零拷贝</a><h2 id="6-2-bytebuf"><a href="#6-2-bytebuf" class="headerlink" title="6.2. bytebuf"></a>6.2. bytebuf</h2><h3 id="6-2-1-ByteBuf-优势"><a href="#6-2-1-ByteBuf-优势" class="headerlink" title="6.2.1. ByteBuf 优势"></a>6.2.1. ByteBuf 优势</h3><ul><li>池化 - 可以重用池中 ByteBuf 实例，更节约内存，减少内存溢出的可能</li><li>读写指针分离，不需要像 ByteBuffer 一样切换读写模式</li><li>可以自动扩容</li><li>支持链式调用，使用更流畅</li><li>很多地方体现零拷贝，例如 slice、duplicate、CompositeByteBuf</li></ul><h2 id="6-3-高性能无锁队列-Mpsc"><a href="#6-3-高性能无锁队列-Mpsc" class="headerlink" title="6.3. 高性能无锁队列 (Mpsc)"></a>6.3. 高性能无锁队列 (Mpsc)</h2><p><a target="_blank" rel="noopener" href="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Netty%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%20RPC%20%E5%AE%9E%E8%B7%B5-%E5%AE%8C/22%20%20%E6%8A%80%E5%B7%A7%E7%AF%87%EF%BC%9A%E9%AB%98%E6%80%A7%E8%83%BD%E6%97%A0%E9%94%81%E9%98%9F%E5%88%97%20Mpsc%20Queue.md">22 技巧篇：高性能无锁队列 Mpsc Queue</a></p><p>队列相关：<a href="/2023/01/22/003-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%93%E9%A2%98/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%93%E9%A2%98-%E5%9F%BA%E7%A1%80-19%E3%80%81Queue/" title="并发编程专题-基础-19、Queue">并发编程专题-基础-19、Queue</a></p><p>Mpsc 的全称是 Multi Producer Single Consumer，多生产者单消费者。Mpsc Queue 可以保证多个生产者同时访问队列是线程安全的，而且同一时刻只允许一个消费者从队列中读取数据。Netty Reactor 线程中任务队列 taskQueue 必须满足多个生产者可以同时提交任务，所以 JCTools 提供的 Mpsc Queue 非常适合 Netty Reactor 线程模型。<br>MpscArrayQueue 还只是 Jctools 中的冰山一角，其中蕴藏着丰富的技术细节，我们对 MpscArrayQueue 的知识点做一个简单的总结。</p><ul><li>通过大量填充 long 类型变量解决伪共享问题。</li><li>环形数组的容量设置为 2 的次幂，可以通过位运算快速定位到数组对应下标。</li><li>入队 offer() 操作中 producerLimit 的巧妙设计，大幅度减少了主动获取消费者索引 consumerIndex 的次数，性能提升显著。</li><li>入队和出队操作中都大量使用了 UNSAFE 系列方法，针对生产者和消费者的场景不同，使用的 UNSAFE 方法也是不一样的。Jctools 在底层操作的运用上也是有的放矢，把性能发挥到极致。</li></ul><h2 id="6-4-内存池"><a href="#6-4-内存池" class="headerlink" title="6.4. 内存池"></a>6.4. 内存池</h2><p><a target="_blank" rel="noopener" href="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Netty%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90%E4%B8%8E%20RPC%20%E5%AE%9E%E8%B7%B5-%E5%AE%8C/13%20%20%E4%B8%BE%E4%B8%80%E5%8F%8D%E4%B8%89%EF%BC%9ANetty%20%E9%AB%98%E6%80%A7%E8%83%BD%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1%EF%BC%88%E4%B8%8A%EF%BC%89.md">13 举一反三：Netty 高性能内存管理设计（上）</a><br><a target="_blank" rel="noopener" href="https://miaowenting.site/2020/02/09/Netty%E5%86%85%E5%AD%98%E6%B1%A0%E5%8C%96%E7%AE%A1%E7%90%86/">https://miaowenting.site/2020/02/09/Netty%E5%86%85%E5%AD%98%E6%B1%A0%E5%8C%96%E7%AE%A1%E7%90%86/</a></p><h2 id="6-5-解决黏包-粘包-半包"><a href="#6-5-解决黏包-粘包-半包" class="headerlink" title="6.5. 解决黏包 (粘包) 半包"></a>6.5. 解决黏包 (粘包) 半包</h2><h3 id="6-5-1-黏包-粘包"><a href="#6-5-1-黏包-粘包" class="headerlink" title="6.5.1. 黏包 (粘包)"></a>6.5.1. 黏包 (粘包)</h3><p>现象，发送 abc def，接收 abcdef<br>原因<br>1. 应用层：接收方 ByteBuf 设置太大（Netty 默认 1024）<br>2. 滑动窗口：假设发送方 256 bytes 表示一个完整报文，但由于接收方处理不及时且窗口大小足够大，这 256 bytes 字节就会缓冲在接收方的滑动窗口中，当滑动窗口中缓冲了多个报文就会粘包<br>3. Nagle 算法：会造成粘包</p><h3 id="6-5-2-半包"><a href="#6-5-2-半包" class="headerlink" title="6.5.2. 半包"></a>6.5.2. 半包</h3><ul><li>现象，发送 abcdef，接收 abc def</li><li>原因<ul><li>应用层：接收方 ByteBuf 小于实际发送数据量</li><li>滑动窗口：假设接收方的窗口只剩了 128 bytes，发送方的报文大小是 256 bytes，这时放不下了，只能先发送前 128 bytes，等待 ack 后才能发送剩余部分，这就造成了半包</li><li>MSS 限制：当发送的数据超过 MSS 限制后，会将数据切分发送，就会造成半包</li></ul></li></ul><p><span style="background-color:#f0f">本质是因为 TCP 是流式协议，消息无边界</span></p><h1 id="7-面试题"><a href="#7-面试题" class="headerlink" title="7. 面试题"></a>7. 面试题</h1><h2 id="请说一下Netty中Reactor模式的理解"><a href="#请说一下Netty中Reactor模式的理解" class="headerlink" title="请说一下Netty中Reactor模式的理解"></a>请说一下Netty中Reactor模式的理解</h2><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230613141532.png" alt="Xnip2023-06-13_14-15-17.png"></p><p>[[BIO,NIO,AIO,Netty面试题 35道.pdf]]</p><p>[[3.358道.pdf]]</p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1hG411G7MN/?spm_id_from=..search-card.all.click&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV1hG411G7MN/?spm_id_from=..search-card.all.click&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1sN411F7C8/?spm_id_from=..search-card.all.click&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV1sN411F7C8/?spm_id_from=..search-card.all.click&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><h1 id="8-实战经验"><a href="#8-实战经验" class="headerlink" title="8. 实战经验"></a>8. 实战经验</h1><h1 id="9-参考与感谢"><a href="#9-参考与感谢" class="headerlink" title="9. 参考与感谢"></a>9. 参考与感谢</h1><p><span style="display:none">%%<br>▶2.🏡⭐️◼️【🌈费曼无敌🌈⭐️第一步⭐️】◼️⭐️-point-20230528-0902%%</span>❕ ^hefe8a</p><h2 id="9-1-黑马"><a href="#9-1-黑马" class="headerlink" title="9.1. 黑马"></a>9.1. 黑马</h2><h3 id="9-1-1-视频"><a href="#9-1-1-视频" class="headerlink" title="9.1.1. 视频"></a>9.1.1. 视频</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1py4y1E7oA/?spm_id_from=333.337.search-card.all.click&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV1py4y1E7oA/?spm_id_from=333.337.search-card.all.click&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><h3 id="9-1-2-资料"><a href="#9-1-2-资料" class="headerlink" title="9.1.2. 资料"></a>9.1.2. 资料</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">/Users/taylor/Nutstore Files/Obsidian_data/pages/<span class="hljs-number">002</span>-schdule/<span class="hljs-number">001</span>-Arch/<span class="hljs-number">001</span>-Subject/<span class="hljs-number">003</span>-并发编程专题/<span class="hljs-number">000</span>-Netty/黑马-Netty教程源码资料<br></code></pre></td></tr></table></figure><h2 id="9-2-尚硅谷-Netty-视频教程（B-站超火，好评如潮）"><a href="#9-2-尚硅谷-Netty-视频教程（B-站超火，好评如潮）" class="headerlink" title="9.2. 尚硅谷 Netty 视频教程（B 站超火，好评如潮）"></a>9.2. 尚硅谷 Netty 视频教程（B 站超火，好评如潮）</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1DJ411m7NR?p=4&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV1DJ411m7NR?p=4&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><h2 id="9-3-网络笔记"><a href="#9-3-网络笔记" class="headerlink" title="9.3. 网络笔记"></a>9.3. 网络笔记</h2><p>Netty 架构： <a target="_blank" rel="noopener" href="https://www.maishuren.top/archives/netty-zheng-ti-jia-gou-jie-xi">https://www.maishuren.top/archives/netty-zheng-ti-jia-gou-jie-xi</a></p><p>尚硅谷学习笔记： <a target="_blank" rel="noopener" href="https://blog.csdn.net/Youth_lql/article/details/115734142">https://blog.csdn.net/Youth_lql/article/details/115734142</a></p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="https://taylorluo.github.io">Taylor Luo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://taylorluo.github.io/2023/03/27/003-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%93%E9%A2%98/%E5%B9%B6%E5%8F%91%E8%BF%9B%E9%98%B6-20%E3%80%81Netty/">https://taylorluo.github.io/2023/03/27/003-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%93%E9%A2%98/%E5%B9%B6%E5%8F%91%E8%BF%9B%E9%98%B6-20%E3%80%81Netty/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://taylorluo.github.io" target="_blank">Taylor</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/timeline/">timeline</a></div><div class="post_share"><div class="social-share" data-image="https://unpkg.com/justlovesmile-img/cover3.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/03/27/005-%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98-14%E3%80%81Dubbo-SPI/"><img class="prev-cover" src="https://unpkg.com/justlovesmile-img/cover7.JPG" onerror='onerror=null,src="/null"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">分布式专题 -14、Dubbo-SPI</div></div></a></div><div class="next-post pull-right"><a href="/2023/03/19/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/MySQL-7%E3%80%81%E7%B4%A2%E5%BC%95%E5%8E%9F%E7%90%86/"><img class="next-cover" src="https://picsum.photos/1920/992" onerror='onerror=null,src="/null"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">框架源码专题-MySQL-7、索引原理</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/02/06/001-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%93%E9%A2%98/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80-1%E3%80%81%E7%9B%B8%E5%85%B3%E5%90%8D%E8%AF%8D/" title="计算机基础-基本原理-1、相关名词"><img class="cover" src="https://picsum.photos/1920/952" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-07</div><div class="title">计算机基础-基本原理-1、相关名词</div></div></a></div><div><a href="/2023/03/27/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/JDK-1%E3%80%81SPI/" title="框架源码专题-JDK-1、SPI"><img class="cover" src="https://unpkg.com/justlovesmile-img/cover5.JPG" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-28</div><div class="title">框架源码专题-JDK-1、SPI</div></div></a></div><div><a href="/2023/03/18/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/MySQL-9%E3%80%81SQL%E5%BA%94%E7%94%A8%E4%BC%98%E5%8C%96/" title="框架源码专题-MySQL-9、SQL应用优化"><img class="cover" src="https://picsum.photos/1920/1086" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-19</div><div class="title">框架源码专题-MySQL-9、SQL应用优化</div></div></a></div><div><a href="/2023/01/28/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-7%E3%80%81%E6%89%A9%E5%B1%95%E7%82%B9/" title="框架源码专题-Spring-7、扩展点"><img class="cover" src="https://picsum.photos/1920/992" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-29</div><div class="title">框架源码专题-Spring-7、扩展点</div></div></a></div><div><a href="/2023/01/22/003-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%93%E9%A2%98/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%93%E9%A2%98-%E5%9F%BA%E7%A1%80-19%E3%80%81Queue/" title="并发编程专题-基础-19、Queue"><img class="cover" src="https://unpkg.com/justlovesmile-img/cover3.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-23</div><div class="title">并发编程专题-基础-19、Queue</div></div></a></div><div><a href="/2023/03/08/006-%E6%9E%B6%E6%9E%84%E5%AE%9E%E6%88%98%E4%B8%93%E9%A2%98/%E6%9E%B6%E6%9E%84%E5%AE%9E%E6%88%98%E4%B8%93%E9%A2%98-%E5%9F%BA%E7%A1%80-1%E3%80%81%E6%9E%B6%E6%9E%84%E6%BC%94%E8%BF%9B/" title="架构实战专题-基础-1、架构演进"><img class="cover" src="https://picsum.photos/1920/1083" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-09</div><div class="title">架构实战专题-基础-1、架构演进</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/index.jpeg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">Taylor Luo</div><div class="author-info__description">人生海海 不忘初心</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">183</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">85</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">31</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Netty-%E4%BB%8B%E7%BB%8D"><span class="toc-text">1. Netty 介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-IO"><span class="toc-text">1.1. IO</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E5%8E%9F%E7%94%9F-NIO-%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">1.2. 原生 NIO 存在的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-Netty-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-text">1.3. Netty 的优势</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Epoll"><span class="toc-text">2. Epoll</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E4%B8%89%E7%A7%8D-Reactor-%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E2%AD%90%EF%B8%8F%F0%9F%94%B4"><span class="toc-text">3. 三种 Reactor 网络模型⭐️🔴</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E4%BC%A0%E7%BB%9F%E9%98%BB%E5%A1%9E-I-x2F-O-%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9E%8B-gt-%E6%AF%8F%E5%AE%A2%E6%88%B7%E7%AB%AF-1-%E7%BA%BF%E7%A8%8B"><span class="toc-text">3.1. 传统阻塞 I&#x2F;O 服务模型-&gt;每客户端 1 线程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%9B%BE"><span class="toc-text">3.1.1. 工作原理图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-%E6%A8%A1%E5%9E%8B%E7%89%B9%E7%82%B9"><span class="toc-text">3.1.2. 模型特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-3-%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-text">3.1.3. 问题分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E5%8D%95-Reactor-%E5%8D%95%E7%BA%BF%E7%A8%8B-gt-%E8%BF%9E%E6%8E%A5%E5%BA%94%E7%AD%94%E5%92%8C%E4%B8%9A%E5%8A%A1%E5%A4%84%E7%90%86%E4%BD%BF%E7%94%A8%E5%90%8C%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B"><span class="toc-text">3.2. 单 Reactor 单线程-&gt;连接应答和业务处理使用同一个线程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-%E6%96%B9%E6%A1%88%E8%AF%B4%E6%98%8E"><span class="toc-text">3.2.1. 方案说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-%E4%BC%98%E7%BC%BA%E7%82%B9%E5%88%86%E6%9E%90"><span class="toc-text">3.2.2. 优缺点分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E5%8D%95-Reactor-%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="toc-text">3.3. 单 Reactor 多线程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E6%96%B9%E6%A1%88%E8%AF%B4%E6%98%8E"><span class="toc-text">3.3.1. 方案说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2-%E4%BC%98%E7%BC%BA%E7%82%B9%E5%88%86%E6%9E%90"><span class="toc-text">3.3.2. 优缺点分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E4%B8%BB%E4%BB%8E-Reactor-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E2%AD%90%EF%B8%8F%F0%9F%94%B4"><span class="toc-text">3.4. 主从 Reactor 多线程⭐️🔴</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-1-%E6%96%B9%E6%A1%88%E8%AF%B4%E6%98%8E"><span class="toc-text">3.4.1. 方案说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-2-%E4%BC%98%E7%BC%BA%E7%82%B9%E5%88%86%E6%9E%90"><span class="toc-text">3.4.2. 优缺点分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-Reactor-%E6%A8%A1%E5%BC%8F%E5%B0%8F%E7%BB%93"><span class="toc-text">3.5. Reactor 模式小结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-1-3-%E7%A7%8D%E6%A8%A1%E5%BC%8F%E7%94%A8%E7%94%9F%E6%B4%BB%E6%A1%88%E4%BE%8B%E6%9D%A5%E7%90%86%E8%A7%A3"><span class="toc-text">3.5.1. 3 种模式用生活案例来理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-2-Reactor-%E6%A8%A1%E5%BC%8F%E5%85%B7%E6%9C%89%E5%A6%82%E4%B8%8B%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-text">3.5.2. Reactor 模式具有如下的优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-3-%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-text">3.5.3. 注意点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-4-%E4%B8%8E-Epoll-%E5%85%B3%E7%B3%BB"><span class="toc-text">3.5.4. 与 Epoll 关系</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-Netty-%E7%9A%84%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E2%AD%90%EF%B8%8F%F0%9F%94%B4"><span class="toc-text">4. Netty 的网络模型⭐️🔴</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-Netty-%E7%9A%84%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%84%E2%AD%90%EF%B8%8F%F0%9F%94%B4"><span class="toc-text">5. Netty 的逻辑架构⭐️🔴</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%B1%82"><span class="toc-text">5.1. 网络通信层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-1-Bootstrap"><span class="toc-text">5.1.1. Bootstrap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-2-ServerBootstrap"><span class="toc-text">5.1.2. ServerBootstrap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-3-channel"><span class="toc-text">5.1.3. channel</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E4%BA%8B%E4%BB%B6%E8%B0%83%E5%BA%A6%E5%B1%82"><span class="toc-text">5.2. 事件调度层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E6%9C%8D%E5%8A%A1%E7%BC%96%E6%8E%92%E5%B1%82"><span class="toc-text">5.3. 服务编排层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-1-ChannelPipeline"><span class="toc-text">5.3.1. ChannelPipeline</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-2-ChannelHandler"><span class="toc-text">5.3.2. ChannelHandler</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-3-ChannelHandlerContext"><span class="toc-text">5.3.3. ChannelHandlerContext</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-Netty-%E7%89%B9%E6%80%A7"><span class="toc-text">6. Netty 特性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E9%9B%B6%E6%8B%B7%E8%B4%9D"><span class="toc-text">6.1. 零拷贝</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-bytebuf"><span class="toc-text">6.2. bytebuf</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1-ByteBuf-%E4%BC%98%E5%8A%BF"><span class="toc-text">6.2.1. ByteBuf 优势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E9%AB%98%E6%80%A7%E8%83%BD%E6%97%A0%E9%94%81%E9%98%9F%E5%88%97-Mpsc"><span class="toc-text">6.3. 高性能无锁队列 (Mpsc)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E5%86%85%E5%AD%98%E6%B1%A0"><span class="toc-text">6.4. 内存池</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-%E8%A7%A3%E5%86%B3%E9%BB%8F%E5%8C%85-%E7%B2%98%E5%8C%85-%E5%8D%8A%E5%8C%85"><span class="toc-text">6.5. 解决黏包 (粘包) 半包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-1-%E9%BB%8F%E5%8C%85-%E7%B2%98%E5%8C%85"><span class="toc-text">6.5.1. 黏包 (粘包)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-2-%E5%8D%8A%E5%8C%85"><span class="toc-text">6.5.2. 半包</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-text">7. 面试题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E8%AF%B4%E4%B8%80%E4%B8%8BNetty%E4%B8%ADReactor%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%90%86%E8%A7%A3"><span class="toc-text">请说一下Netty中Reactor模式的理解</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E5%AE%9E%E6%88%98%E7%BB%8F%E9%AA%8C"><span class="toc-text">8. 实战经验</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E5%8F%82%E8%80%83%E4%B8%8E%E6%84%9F%E8%B0%A2"><span class="toc-text">9. 参考与感谢</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-%E9%BB%91%E9%A9%AC"><span class="toc-text">9.1. 黑马</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-1-%E8%A7%86%E9%A2%91"><span class="toc-text">9.1.1. 视频</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-2-%E8%B5%84%E6%96%99"><span class="toc-text">9.1.2. 资料</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E5%B0%9A%E7%A1%85%E8%B0%B7-Netty-%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B%EF%BC%88B-%E7%AB%99%E8%B6%85%E7%81%AB%EF%BC%8C%E5%A5%BD%E8%AF%84%E5%A6%82%E6%BD%AE%EF%BC%89"><span class="toc-text">9.2. 尚硅谷 Netty 视频教程（B 站超火，好评如潮）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3-%E7%BD%91%E7%BB%9C%E7%AC%94%E8%AE%B0"><span class="toc-text">9.3. 网络笔记</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/012-%E7%BB%8F%E9%AA%8C%E4%B8%93%E9%A2%98/%E7%BB%8F%E9%AA%8C%E4%B8%93%E9%A2%98-%E9%A3%8E%E6%8E%A7%E7%B3%BB%E7%BB%9F-2%E3%80%81%E9%A3%8E%E6%8E%A7%E4%B8%AD%E5%8F%B0/" title="无题"><img src="https://picsum.photos/1920/1081" onerror='this.onerror=null,this.src="/null"' alt="无题"></a><div class="content"><a class="title" href="/2023/06/13/012-%E7%BB%8F%E9%AA%8C%E4%B8%93%E9%A2%98/%E7%BB%8F%E9%AA%8C%E4%B8%93%E9%A2%98-%E9%A3%8E%E6%8E%A7%E7%B3%BB%E7%BB%9F-2%E3%80%81%E9%A3%8E%E6%8E%A7%E4%B8%AD%E5%8F%B0/" title="无题">无题</a><time datetime="2023-06-13T23:32:43.044Z" title="发表于 2023-06-14 07:32:43">2023-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/005-%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98-15%E3%80%81%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/" title="分布式专题-15、链路追踪"><img src="https://picsum.photos/1920/962" onerror='this.onerror=null,this.src="/null"' alt="分布式专题-15、链路追踪"></a><div class="content"><a class="title" href="/2023/06/13/005-%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98-15%E3%80%81%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/" title="分布式专题-15、链路追踪">分布式专题-15、链路追踪</a><time datetime="2023-06-13T16:00:00.000Z" title="发表于 2023-06-14 00:00:00">2023-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/013-%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/%E8%B5%84%E6%BA%90%E5%AF%BC%E8%88%AA/" title="资源导航"><img src="https://picsum.photos/1920/992" onerror='this.onerror=null,this.src="/null"' alt="资源导航"></a><div class="content"><a class="title" href="/2023/06/13/013-%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/%E8%B5%84%E6%BA%90%E5%AF%BC%E8%88%AA/" title="资源导航">资源导航</a><time datetime="2023-06-13T16:00:00.000Z" title="发表于 2023-06-14 00:00:00">2023-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/014-AI%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98/%E7%AE%97%E6%B3%95-0%E3%80%81%E6%B1%87%E6%80%BB/" title="算法-0、汇总"><img src="https://picsum.photos/1920/972" onerror='this.onerror=null,this.src="/null"' alt="算法-0、汇总"></a><div class="content"><a class="title" href="/2023/06/13/014-AI%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98/%E7%AE%97%E6%B3%95-0%E3%80%81%E6%B1%87%E6%80%BB/" title="算法-0、汇总">算法-0、汇总</a><time datetime="2023-06-13T16:00:00.000Z" title="发表于 2023-06-14 00:00:00">2023-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/014-AI%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98/%E7%AE%97%E6%B3%95-1%E3%80%81%E9%A2%98%E7%9B%AE%E8%A7%A3%E6%9E%90/" title="算法-1、题目解析"><img src="https://picsum.photos/1920/1082" onerror='this.onerror=null,this.src="/null"' alt="算法-1、题目解析"></a><div class="content"><a class="title" href="/2023/06/13/014-AI%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98/%E7%AE%97%E6%B3%95-1%E3%80%81%E9%A2%98%E7%9B%AE%E8%A7%A3%E6%9E%90/" title="算法-1、题目解析">算法-1、题目解析</a><time datetime="2023-06-13T16:00:00.000Z" title="发表于 2023-06-14 00:00:00">2023-06-14</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url('https://unpkg.com/justlovesmile-img/cover3.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Taylor Luo</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class="js-pjax"><script>(()=>{const o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo-taylorluo.vercel.app/",region:"ap-shanghai",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null)),GLOBAL_CONFIG_SITE.isPost&&(()=>{const o=document.getElementById("twikoo-count");o&&twikoo.getCommentsCount({envId:"https://twikoo-taylorluo.vercel.app/",region:"ap-shanghai",urls:[window.location.pathname],includeReply:!1}).then((function(t){o.innerText=t[0].count})).catch((function(o){console.error(o)}))})()},t=()=>{"object"!=typeof twikoo?getScript("https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js").then(o):setTimeout(o,0)};t()})()</script></div><script defer id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zindex="-1" mobile="false" data-click="true"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="拼搏,自强,正直,自信" data-fontsize="15px" data-random="false" async></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>