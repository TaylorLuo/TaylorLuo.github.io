<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>æ¡†æ¶æºç ä¸“é¢˜-Spring-2ã€IOC | Taylor</title><meta name="keywords" content="æ¡†æ¶æºç ä¸“é¢˜,Spring,IOC"><meta name="author" content="Taylor Luo"><meta name="copyright" content="Taylor Luo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1. å®¹å™¨ API  BeanDefinitionRegistry: å®šä¹‰å¯¹ BeanDefinition çš„å„ç§å¢åˆ æ”¹æŸ¥æ“ä½œ DefaultSingletonBeanRegistry: Bean ä»“åº“ AutowireCapableBeanFactory: æä¾›åˆ›å»º Bean, è‡ªåŠ¨æ³¨å…¥, åˆå§‹åŒ–å·²ç»åº”ç”¨ Bean çš„åå¤„ç†å™¨ ConfigurableListableBeanFactory: B"><meta property="og:type" content="article"><meta property="og:title" content="æ¡†æ¶æºç ä¸“é¢˜-Spring-2ã€IOC"><meta property="og:url" content="https://taylorluo.github.io/2022/12/04/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-2%E3%80%81IOC/index.html"><meta property="og:site_name" content="Taylor"><meta property="og:description" content="1. å®¹å™¨ API  BeanDefinitionRegistry: å®šä¹‰å¯¹ BeanDefinition çš„å„ç§å¢åˆ æ”¹æŸ¥æ“ä½œ DefaultSingletonBeanRegistry: Bean ä»“åº“ AutowireCapableBeanFactory: æä¾›åˆ›å»º Bean, è‡ªåŠ¨æ³¨å…¥, åˆå§‹åŒ–å·²ç»åº”ç”¨ Bean çš„åå¤„ç†å™¨ ConfigurableListableBeanFactory: B"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://picsum.photos/1920/1080"><meta property="article:published_time" content="2022-12-04T16:00:00.000Z"><meta property="article:modified_time" content="2023-06-13T23:32:42.677Z"><meta property="article:author" content="Taylor Luo"><meta property="article:tag" content="æ¡†æ¶æºç ä¸“é¢˜"><meta property="article:tag" content="Spring"><meta property="article:tag" content="IOC"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://picsum.photos/1920/1080"><link rel="shortcut icon" href="https://gcore.jsdelivr.net/gh/code-anan/image/èœ˜è››ç½‘ä¸‡åœ£èŠ‚.png"><link rel="canonical" href="https://taylorluo.github.io/2022/12/04/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-2%E3%80%81IOC/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"ç¹",msgToSimplifiedChinese:"ç®€"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶é”™è¯¯",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"æ¡†æ¶æºç ä¸“é¢˜-Spring-2ã€IOC",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-06-14 07:32:42"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)})),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/self/Kimbiedark.css"><meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="Taylor" type="application/atom+xml"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">åŠ è½½ä¸­...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/index.jpeg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">183</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">85</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">31</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url('https://picsum.photos/1920/1080')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Taylor</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">æ¡†æ¶æºç ä¸“é¢˜-Spring-2ã€IOC</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-12-04T16:00:00.000Z" title="å‘è¡¨äº 2022-12-05 00:00:00">2022-12-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-06-13T23:32:42.677Z" title="æ›´æ–°äº 2023-06-14 07:32:42">2023-06-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/">æ¡†æ¶æºç ä¸“é¢˜</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">5.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>19åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span data-flag-title="æ¡†æ¶æºç ä¸“é¢˜-Spring-2ã€IOC"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">è¯„è®ºæ•°:</span><a href="/2022/12/04/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-2%E3%80%81IOC/#post-comment"><span id="twikoo-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-å®¹å™¨-API"><a href="#1-å®¹å™¨-API" class="headerlink" title="1. å®¹å™¨ API"></a>1. å®¹å™¨ API</h1><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230303200238.png" alt="image.png"></p><ul><li>BeanDefinitionRegistry: å®šä¹‰å¯¹ BeanDefinition çš„å„ç§å¢åˆ æ”¹æŸ¥æ“ä½œ</li><li><span style="background-color:#f0f">DefaultSingletonBeanRegistry: Bean ä»“åº“</span></li><li>AutowireCapableBeanFactory: æä¾›åˆ›å»º Bean, è‡ªåŠ¨æ³¨å…¥, åˆå§‹åŒ–å·²ç»åº”ç”¨ Bean çš„åå¤„ç†å™¨</li><li>ConfigurableListableBeanFactory: BeanFactory é…ç½®æ¸…å•, æŒ‡å®šå¿½ç•¥ç±»å‹åŠæ¥å£ç­‰</li><li><span style="background-color:#f0f">DefaultListableBeanFactory: Bean å·¥å‚</span></li></ul><h1 id="2-å·¥ä½œåŸç†"><a href="#2-å·¥ä½œåŸç†" class="headerlink" title="2. å·¥ä½œåŸç†"></a>2. å·¥ä½œåŸç†</h1><h2 id="2-1-å·¥ä½œæµç¨‹"><a href="#2-1-å·¥ä½œæµç¨‹" class="headerlink" title="2.1. å·¥ä½œæµç¨‹"></a>2.1. å·¥ä½œæµç¨‹</h2><ol><li>IOC æ˜¯ä»€ä¹ˆ</li><li>Bean çš„å£°æ˜æ–¹å¼</li><li>IOC çš„å·¥ä½œæµç¨‹</li></ol><p>IOC çš„å…¨ç§°æ˜¯ Inversion Of Control, ä¹Ÿå°±æ˜¯æ§åˆ¶åè½¬ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯æŠŠå¯¹è±¡çš„ç®¡ç†æƒé™äº¤ç»™å®¹å™¨ã€‚åº”ç”¨ç¨‹åºå¦‚æœéœ€è¦ä½¿ç”¨åˆ°æŸä¸ªå¯¹è±¡å®ä¾‹ï¼Œç›´æ¥ä» IOC å®¹å™¨ä¸­å»è·å–å°±è¡Œï¼Œè¿™æ ·è®¾è®¡çš„å¥½å¤„æ˜¯é™ä½äº†ç¨‹åºé‡Œé¢å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„è€¦åˆæ€§ã€‚ä½¿å¾—ç¨‹åºçš„æ•´ä¸ªä½“ç³»ç»“æ„å˜å¾—æ›´åŠ çµæ´»ã€‚</p><h3 id="2-1-1-Bean-å®šä¹‰æ³¨å†Œ"><a href="#2-1-1-Bean-å®šä¹‰æ³¨å†Œ" class="headerlink" title="2.1.1. Bean å®šä¹‰æ³¨å†Œ"></a>2.1.1. Bean å®šä¹‰æ³¨å†Œ</h3><p>Spring é‡Œé¢å¾ˆå¤šæ–¹å¼å»å®šä¹‰ Beanï¼Œï¼ˆå¦‚å›¾ï¼‰æ¯”å¦‚ XML é‡Œé¢çš„ <code>&lt;bean&gt;</code> æ ‡ç­¾ã€@Serviceã€ @Componentã€@Repositoryã€@Configuration é…ç½®ç±»ä¸­çš„@Bean æ³¨è§£ç­‰ç­‰ã€‚ Spring åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šå»è§£æè¿™äº› Bean ç„¶åä¿å­˜åˆ° IOC å®¹å™¨é‡Œé¢ã€‚<br><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230603223202.png" alt="image.png"></p><h3 id="2-1-2-IOC-å®¹å™¨çš„åˆå§‹åŒ–"><a href="#2-1-2-IOC-å®¹å™¨çš„åˆå§‹åŒ–" class="headerlink" title="2.1.2. IOC å®¹å™¨çš„åˆå§‹åŒ–"></a>2.1.2. IOC å®¹å™¨çš„åˆå§‹åŒ–</h3><p>è¿™ä¸ªé˜¶æ®µä¸»è¦æ˜¯æ ¹æ®ç¨‹åºä¸­å®šä¹‰çš„ XML æˆ–è€…æ³¨è§£ç­‰ Bean çš„å£°æ˜æ–¹å¼ (å¦‚å›¾ï¼‰é€šè¿‡è§£æå’ŒåŠ è½½åç”Ÿæˆ BeanDefinitionï¼Œç„¶åæŠŠ BeanDefinition æ³¨å†Œåˆ° IOC å®¹å™¨<br><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230603223452.png" alt="image.png"><br>é€šè¿‡æ³¨è§£æˆ–è€… xml å£°æ˜çš„ bean éƒ½ä¼šè§£æå¾—åˆ°ä¸€ä¸ª BeanDefinition å®ä½“ï¼Œå®ä½“ä¸­åŒ…å« è¿™ä¸ª bean ä¸­å®šä¹‰çš„åŸºæœ¬å±æ€§ã€‚ æœ€åæŠŠè¿™ä¸ª BeanDefinition ä¿å­˜åˆ°ä¸€ä¸ª Map é›†åˆé‡Œé¢ï¼Œä»è€Œå®Œæˆäº† IOC çš„åˆå§‹åŒ–ã€‚ IoC å®¹å™¨çš„ä½œç”¨å°±æ˜¯å¯¹è¿™äº›æ³¨å†Œçš„ Bean çš„å®šä¹‰ä¿¡æ¯è¿›è¡Œå¤„ç†å’Œç»´æŠ¤ï¼Œå®ƒ IoC å®¹å™¨æ§åˆ¶ åè½¬çš„æ ¸å¿ƒã€‚</p><h3 id="2-1-3-Bean-åˆå§‹åŒ–åŠä¾èµ–æ³¨å…¥"><a href="#2-1-3-Bean-åˆå§‹åŒ–åŠä¾èµ–æ³¨å…¥" class="headerlink" title="2.1.3. Bean åˆå§‹åŒ–åŠä¾èµ–æ³¨å…¥"></a>2.1.3. Bean åˆå§‹åŒ–åŠä¾èµ–æ³¨å…¥</h3><p>ç„¶åè¿›å…¥åˆ°ç¬¬äºŒä¸ªé˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µä¼šåšä¸¤ä¸ªäº‹æƒ…ï¼ˆå¦‚å›¾ï¼‰ 1. é€šè¿‡åå°„é’ˆå¯¹æ²¡æœ‰è®¾ç½® lazy-init å±æ€§çš„å•ä¾‹ bean è¿›è¡Œåˆå§‹åŒ–ã€‚ 2. å®Œæˆ Bean çš„ä¾èµ–æ³¨å…¥ã€‚<br><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230603223858.png" alt="image.png"></p><h3 id="2-1-4-Bean-çš„ä½¿ç”¨"><a href="#2-1-4-Bean-çš„ä½¿ç”¨" class="headerlink" title="2.1.4. Bean çš„ä½¿ç”¨"></a>2.1.4. Bean çš„ä½¿ç”¨</h3><p>ï¼ˆå¦‚å›¾ï¼‰é€šå¸¸æˆ‘ä»¬ä¼šé€šè¿‡@Autowired æˆ–è€… BeanFactory.getBean() ä» IOC å®¹å™¨ä¸­è·å–æŒ‡å®šçš„ bean å®ä¾‹ã€‚å¦å¤–ï¼Œé’ˆå¯¹è®¾ç½® lazy-init å±æ€§ä»¥åŠéå•ä¾‹ bean çš„å®ä¾‹åŒ–ï¼Œæ˜¯åœ¨æ¯æ¬¡è·å– bean å¯¹è±¡çš„æ—¶å€™ï¼Œè°ƒç”¨ bean çš„åˆå§‹åŒ–æ–¹æ³•æ¥å®Œæˆå®ä¾‹åŒ–çš„ï¼Œå¹¶ä¸” Spring IOC å®¹å™¨ä¸ä¼šå»ç®¡ç†è¿™äº› Bean<br><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230603223932.png" alt="image.png"></p><h2 id="2-2-ç”Ÿå‘½å‘¨æœŸ"><a href="#2-2-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="2.2. ç”Ÿå‘½å‘¨æœŸ"></a>2.2. ç”Ÿå‘½å‘¨æœŸ</h2><p>Spring åŠ è½½æµç¨‹å›¾ (å¾åº¶)<br><a target="_blank" rel="noopener" href="https://www.processon.com/view/link/5f15341b07912906d9ae8642">https://www.processon.com/view/link/5f15341b07912906d9ae8642</a></p><h1 id="3-å®¹å™¨åˆ·æ–°"><a href="#3-å®¹å™¨åˆ·æ–°" class="headerlink" title="3. å®¹å™¨åˆ·æ–°"></a>3. å®¹å™¨åˆ·æ–°</h1><p>Spring å®¹å™¨åˆ·æ–° 12 æ­¥è¯¦ç»†<br><a target="_blank" rel="noopener" href="https://www.processon.com/diagraming/639548487d9c084a6a3d4021">https://www.processon.com/diagraming/639548487d9c084a6a3d4021</a></p><h1 id="4-å¾ªç¯ä¾èµ–"><a href="#4-å¾ªç¯ä¾èµ–" class="headerlink" title="4. å¾ªç¯ä¾èµ–"></a>4. å¾ªç¯ä¾èµ–</h1><h2 id="4-1-å¾ªç¯ä¾èµ–çš„ç§ç±»â­ï¸ğŸ”´"><a href="#4-1-å¾ªç¯ä¾èµ–çš„ç§ç±»â­ï¸ğŸ”´" class="headerlink" title="4.1. å¾ªç¯ä¾èµ–çš„ç§ç±»â­ï¸ğŸ”´"></a>4.1. å¾ªç¯ä¾èµ–çš„ç§ç±»â­ï¸ğŸ”´</h2><h3 id="4-1-1-å±æ€§æ³¨å…¥ä¾èµ–"><a href="#4-1-1-å±æ€§æ³¨å…¥ä¾èµ–" class="headerlink" title="4.1.1. å±æ€§æ³¨å…¥ä¾èµ–"></a>4.1.1. å±æ€§æ³¨å…¥ä¾èµ–</h3><p>é€šè¿‡ä¸‰çº§ç¼“å­˜è§£å†³ â•<span style="display:none">%%<br>2153-ğŸ¡â­ï¸â—¼ï¸Spring æ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„ï¼ŸğŸ”œMSTMğŸ“â—¼ï¸â­ï¸-point-202301282153%%</span></p><h3 id="4-1-2-æ„é€ æ–¹æ³•ä¾èµ–"><a href="#4-1-2-æ„é€ æ–¹æ³•ä¾èµ–" class="headerlink" title="4.1.2. æ„é€ æ–¹æ³•ä¾èµ–"></a>4.1.2. æ„é€ æ–¹æ³•ä¾èµ–</h3><p>è§£å†³æ–¹æ¡ˆï¼š<a href="/2022/12/04/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-2%E3%80%81IOC/" title="Spring-2ã€IOC">Spring-2ã€IOC</a></p><p>æ‡’åŠ è½½åŸç†ï¼š<a href="/2023/02/11/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-9%E3%80%81@Lazy/" title="Spring-9ã€@Lazy">Spring-9ã€@Lazy</a></p><h3 id="4-1-3-å¤šä¾‹æ¨¡å¼"><a href="#4-1-3-å¤šä¾‹æ¨¡å¼" class="headerlink" title="4.1.3. å¤šä¾‹æ¨¡å¼"></a>4.1.3. å¤šä¾‹æ¨¡å¼</h3><p>æ— è§£</p><h2 id="4-2-å˜æ›´å†å²"><a href="#4-2-å˜æ›´å†å²" class="headerlink" title="4.2. å˜æ›´å†å²"></a>4.2. å˜æ›´å†å²</h2><p>å¤§æ¦‚æ˜¯åœ¨<span style="background-color:#f0f">Spring2.0.3</span>åŠ å…¥äº†å¾ªç¯ä¾èµ–çš„è§£å†³æ–¹æ¡ˆï¼Œåœ¨ springBean çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ä¹‹ååŠ å…¥çš„æ–°ä»£ç ã€‚å…¶ä¸­æ¶‰åŠåˆ°äº†ä»£ç†ç±»ç”Ÿæˆæ—¶æœºçš„å†²çªé—®é¢˜<br>Spring æ­£å¸¸çš„ä»£ç†åº”è¯¥æ˜¯å‘ç”Ÿåœ¨ bean åˆå§‹åŒ–åï¼Œç”± AbstractAutoProxyCreator.postProcessAfterInitialization å¤„ç†ã€‚è€Œå¾ªç¯ä¾èµ–è¦æ±‚ bean åœ¨å¡«å……å±æ€§å‰å°±æå‰ç”Ÿæˆä»£ç†ï¼Œå¦åˆ™å°±ä¼šå‡ºç°æœ€ç»ˆç‰ˆæœ¬ä¸ä¸€è‡´é”™è¯¯ã€‚æ‰€ä»¥ Spring åœ¨ä»£ç ä¸­å¼€äº†ä¸ªå£å­ï¼Œå¾ªç¯ä¾èµ–å‘ç”Ÿæ—¶ï¼Œæå‰ä»£ç†ï¼Œæ²¡æœ‰å¾ªç¯ä¾èµ–ï¼Œä»£ç†æ–¹å¼ä¸å˜ï¼Œä¾ç„¶æ˜¯åˆå§‹åŒ–ä»¥åä»£ç†ã€‚<br>å…¶å®ä¹Ÿå¯ä»¥ä¸åˆ†æå‰ä»£ç†å’Œæ­£å¸¸ä»£ç†ï¼Œå…¨éƒ¨çš„ Bean éƒ½ç›´æ¥æå‰ç”Ÿæˆä»£ç†ï¼Œä½†é‚£æ ·çš„è¯ AbstractAutoProxyCreator.postProcessAfterInitialization ç›´æ¥åºŸäº†ï¼Œç›¸å½“äºæŠŠåŸæœ¬çš„é€»è¾‘æ¨ç¿»é‡å†™ï¼Œå¦‚æ­¤åªæ˜¯ä¸ºäº†è§£å†³å¾ªç¯ä¾èµ–çš„è¯å°±ä¼šå˜å¾—å¾—ä¸å¿å¤±ï¼Œæ²¡æœ‰å®Œå…¨å¿…è¦çš„æƒ…å†µä¸‹å¯¹æ ¸å¿ƒä»£ç å¤§æ”¹ç”šè‡³æ¨ç¿»é‡å†™æ˜¯ä¸€ç§å¤§å¿Œã€‚</p><p>è€Œä¸‰çº§ç¼“å­˜çš„å®ç°æä¾›äº†æå‰ç”Ÿæˆä»£ç†çš„å£å­ï¼Œè€Œä¸æ˜¯ç›´æ¥ç”Ÿæˆä»£ç†ï¼Œåªæœ‰å‘ç”Ÿå¾ªç¯ä¾èµ–<span style="background-color:#0f0">æ‰§è¡Œ getObject æ‰ä¼šç”Ÿæˆä»£ç†</span>ï¼Œè¾¾åˆ°ä¸Šè¿°å¾ªç¯ä¾èµ–å‘ç”Ÿæ—¶ï¼Œæå‰ä»£ç†ï¼Œæ²¡æœ‰å¾ªç¯ä¾èµ–ï¼Œä»£ç†æ–¹å¼ä¸å˜ï¼Œä¾ç„¶æ˜¯åˆå§‹åŒ–ä»¥åä»£ç†çš„ç›®çš„ã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/u012098021/article/details/107352463/">https://blog.csdn.net/u012098021/article/details/107352463/</a></p><h3 id="4-2-1-å…³é—­é»˜è®¤æ”¯æŒå¾ªç¯ä¾èµ–"><a href="#4-2-1-å…³é—­é»˜è®¤æ”¯æŒå¾ªç¯ä¾èµ–" class="headerlink" title="4.2.1. å…³é—­é»˜è®¤æ”¯æŒå¾ªç¯ä¾èµ–"></a>4.2.1. å…³é—­é»˜è®¤æ”¯æŒå¾ªç¯ä¾èµ–</h3><p>SpringBoot2.6 ä¹‹åå…³é—­äº†é»˜è®¤æ”¯æŒå¾ªç¯ä¾èµ–çš„å¼€å…³<br>å¼€å¯æ–¹æ³•ï¼š <code>spring.main.allow-circular-references=true</code></p><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7096798740593246222">https://juejin.cn/post/7096798740593246222</a></p><h2 id="4-3-å¾ªç¯ä¾èµ–æµç¨‹â­ï¸ğŸ”´"><a href="#4-3-å¾ªç¯ä¾èµ–æµç¨‹â­ï¸ğŸ”´" class="headerlink" title="4.3. å¾ªç¯ä¾èµ–æµç¨‹â­ï¸ğŸ”´"></a>4.3. å¾ªç¯ä¾èµ–æµç¨‹â­ï¸ğŸ”´</h2><p><a target="_blank" rel="noopener" href="https://www.processon.com/diagraming/639c04ed1efad465c9cd90da">https://www.processon.com/diagraming/639c04ed1efad465c9cd90da</a><br><a target="_blank" rel="noopener" href="https://www.processon.com/diagraming/639e8c7f1efad465c9cfdd1a">https://www.processon.com/diagraming/639e8c7f1efad465c9cfdd1a</a></p><p><a target="_blank" rel="noopener" href="https://www.processon.com/view/link/5f1fb2cf1e08533a628a7b4c">https://www.processon.com/view/link/5f1fb2cf1e08533a628a7b4c</a></p><h3 id="4-3-1-å„çº§ç¼“å­˜çš„åŠ å…¥æ—¶æœº"><a href="#4-3-1-å„çº§ç¼“å­˜çš„åŠ å…¥æ—¶æœº" class="headerlink" title="4.3.1. å„çº§ç¼“å­˜çš„åŠ å…¥æ—¶æœº"></a>4.3.1. å„çº§ç¼“å­˜çš„åŠ å…¥æ—¶æœº</h3><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230322180813.png" alt="image.png"></p><h4 id="4-3-1-1-ä¸€çº§ç¼“å­˜"><a href="#4-3-1-1-ä¸€çº§ç¼“å­˜" class="headerlink" title="4.3.1.1. ä¸€çº§ç¼“å­˜"></a>4.3.1.1. ä¸€çº§ç¼“å­˜</h4><p><code>Map&lt;String, Object&gt; singletonObjects</code><br>new ConcurrentHashMap&lt;&gt;(256)<br><span style="background-color:#f0f">è§£å†³å®Œæ•´ Bean ä¸ä¸å®Œæ•´ Bean æ··ä¹±é—®é¢˜</span></p><h4 id="4-3-1-2-äºŒçº§ç¼“å­˜"><a href="#4-3-1-2-äºŒçº§ç¼“å­˜" class="headerlink" title="4.3.1.2. äºŒçº§ç¼“å­˜"></a>4.3.1.2. äºŒçº§ç¼“å­˜</h4><p><span style="display:none">%%<br>â–¶39.ğŸ¡â­ï¸â—¼ï¸ã€ğŸŒˆè´¹æ›¼æ— æ•ŒğŸŒˆâ­ï¸ç¬¬ä¸€æ­¥â­ï¸ã€‘â—¼ï¸â­ï¸-point-20230304-1708%%</span>â• ^kyatt6</p><p><code>Map&lt;String, Object&gt; earlySingletonObjects</code><br>new ConcurrentHashMap&lt;&gt;(16)<br><span style="background-color:#f0f">æä¾›ç¼“å­˜åŠŸèƒ½ï¼Œä»¥ä¾¿ä»ä¸­è·å–åŸå§‹æˆ–è€…ä»£ç†å¯¹è±¡ï¼ŒåŒæ—¶èƒ½å¤Ÿè§£å†³åŠ¨æ€ä»£ç†å¤šæ¬¡åˆ›å»ºé—®é¢˜</span><br><span style="background-color:red">åªè¦æœ‰å¾ªç¯ä¾èµ–ï¼Œä¸ç®¡æœ‰æ²¡æœ‰ AOPï¼Œ<code>earlySingletonObjects</code> é‡Œéƒ½ä¼šæœ‰æ•°æ®ï¼Œæ¯”å¦‚ ABAï¼ŒAB åœ¨ 3 çº§ç¼“å­˜ä¸­éƒ½æœ‰æ•°æ®ï¼ŒB åœ¨åé¢å¡«å……å±æ€§ A æ—¶å°† A çš„ä¸‰çº§ç¼“å­˜ç”¨æ‰ï¼Œç”ŸæˆåŠæˆå“ A æ”¾å…¥ 2 çº§ç¼“å­˜ä¸­ï¼Œ3 çº§ç¼“å­˜çš„ A è¢«åˆ é™¤ã€‚è€Œ B ç›´æ¥ä» 3 çº§æ¥åˆ° 1 çº§ã€‚</span><br><span style="background-color:#f0f">åªæ˜¯äºŒçº§ç¼“å­˜ä¸­å¯èƒ½æ˜¯åŸå§‹ Beanï¼Œä¹Ÿå¯èƒ½æ˜¯ä»£ç† Bean</span></p><h4 id="4-3-1-3-ä¸‰çº§ç¼“å­˜"><a href="#4-3-1-3-ä¸‰çº§ç¼“å­˜" class="headerlink" title="4.3.1.3. ä¸‰çº§ç¼“å­˜"></a>4.3.1.3. ä¸‰çº§ç¼“å­˜</h4><p><code>Map&lt;String, ObjectFactory&lt;?&gt;&gt; singletonFactories</code><br>new HashMap&lt;&gt;(16)</p><p><span style="background-color:red">å®ä¾‹å¯¹è±¡åˆ›å»ºä¹‹åï¼Œå±æ€§å¡«å……ä¹‹å‰</span><br>æ£€æµ‹å¾ªç¯ä¾èµ–æ¡ä»¶ï¼š<span style="background-color:#f0f">å•ä¾‹&amp;å…è®¸å¾ªç¯ä¾èµ–&amp;å½“å‰ bean æ­£åœ¨åˆ›å»ºä¸­</span><br><span style="background-color:#f0f">è§£å†³æ­»å¾ªç¯é—®é¢˜</span></p><p><span style="background-color:#f0f">ä¸ç®¡æœ‰æ²¡æœ‰å¾ªç¯ä¾èµ–ï¼Œä¸‰çº§ç¼“å­˜ä¸­éƒ½ä¼šæœ‰æ•°æ®</span></p><h2 id="4-4-å¾ªç¯ä¾èµ–é—®é¢˜æ±‡æ€»"><a href="#4-4-å¾ªç¯ä¾èµ–é—®é¢˜æ±‡æ€»" class="headerlink" title="4.4. å¾ªç¯ä¾èµ–é—®é¢˜æ±‡æ€»"></a>4.4. å¾ªç¯ä¾èµ–é—®é¢˜æ±‡æ€»</h2><h3 id="4-4-1-ä¸ºä»€ä¹ˆä¸€çº§äºŒçº§æ˜¯-ConcurrentHashMap"><a href="#4-4-1-ä¸ºä»€ä¹ˆä¸€çº§äºŒçº§æ˜¯-ConcurrentHashMap" class="headerlink" title="4.4.1. ä¸ºä»€ä¹ˆä¸€çº§äºŒçº§æ˜¯ ConcurrentHashMap"></a>4.4.1. ä¸ºä»€ä¹ˆä¸€çº§äºŒçº§æ˜¯ ConcurrentHashMap</h3><p>å› ä¸ºå…ˆæ‰‹çº¿ç¨‹åŠ é”åŠ åœ¨æŸ¥è¯¢ä¸€çº§ã€äºŒçº§ç¼“å­˜ä¹‹åï¼Œæ‰€ä»¥ä¸€çº§ã€äºŒçº§ç¼“å­˜çš„æŸ¥è¯¢éœ€è¦æ”¯æŒå¹¶å‘è€Œä¸å½±å“æ€§èƒ½</p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1pe4y1h7wK?p=19&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV1pe4y1h7wK?p=19&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221217082853.png"><br><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221217082919.png"></p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1ET4y1N7Sp/?spm_id_from=333.337.search-card.all.click&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV1ET4y1N7Sp/?spm_id_from=333.337.search-card.all.click&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><p>debug äº† AOP+ å¾ªç¯ä¾èµ–</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221216174022.png" alt=" zzzz"></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221216111636.png"></p><p>æœ€æ–° Spring å…¨å®¶æ¡¶ -2021 é¢è¯• - é‡ç¾åŒºï¼šSpring&#x2F;SpringCloud&#x2F;SpringBoot&#x2F;SpringMVCï¼Œè‚å®Œå°±è·³æ§½</p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1x64y1x71b?p=56">https://www.bilibili.com/video/BV1x64y1x71b?p=56</a></p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1pY4y1A7Pv/?spm_id_from=333.337.search-card.all.click&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204!%5B%5D(https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221216101945.png)">https://www.bilibili.com/video/BV1pY4y1A7Pv/?spm_id_from=333.337.search-card.all.click&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204![](https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221216101945.png)</a></p><h2 id="4-5-AOP-æå‰ä»£ç†é€»è¾‘"><a href="#4-5-AOP-æå‰ä»£ç†é€»è¾‘" class="headerlink" title="4.5. AOP æå‰ä»£ç†é€»è¾‘"></a>4.5. AOP æå‰ä»£ç†é€»è¾‘</h2><h3 id="4-5-1-æ­£å¸¸ä»£ç†"><a href="#4-5-1-æ­£å¸¸ä»£ç†" class="headerlink" title="4.5.1. æ­£å¸¸ä»£ç†"></a>4.5.1. æ­£å¸¸ä»£ç†</h3><p>å¯¹è±¡åˆå§‹åŒ–ä¹‹ååˆ›å»ºåŠ¨æ€ä»£ç†ï¼Œè¿™æ˜¯ SpringBean çš„æ­£å¸¸ç”Ÿå‘½å‘¨æœŸ<br>BeanPostProcessor.<span style="background-color:#f0f">postProcessAfterInitialization()</span>ï¼Œå…·ä½“å®ç°ç±»æ˜¯<span style="background-color:#f0f">AbstractAutoProxyCreator</span></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230129150239.png" alt="image.png"></p><h3 id="4-5-2-æå‰ä»£ç†"><a href="#4-5-2-æå‰ä»£ç†" class="headerlink" title="4.5.2. æå‰ä»£ç†"></a>4.5.2. æå‰ä»£ç†</h3><h4 id="4-5-2-1-getEarlyBeanReference"><a href="#4-5-2-1-getEarlyBeanReference" class="headerlink" title="4.5.2.1. getEarlyBeanReference"></a>4.5.2.1. getEarlyBeanReference</h4><p><span style="display:none">%%<br>â–¶32.ğŸ¡â­ï¸â—¼ï¸ã€ğŸŒˆè´¹æ›¼æ— æ•ŒğŸŒˆâ­ï¸ç¬¬ä¸€æ­¥â­ï¸ã€‘â—¼ï¸â­ï¸-point-20230323-1933%%</span>â• ^qideqv</p><p><span style="background-color:#f0f">getEarlyBeanReference æ–¹æ³•å°±æ˜¯ä¸ºäº†ç”Ÿæˆæå‰ä»£ç†å¯¹è±¡è€Œè®¾è®¡çš„ã€‚</span><br>å¦‚æœæœ‰ä»£ç†â•<span style="display:none">%%<br>â–¶9.ğŸ¡â­ï¸â—¼ï¸é¡¹ç›®ä¸­å¼€å¯ AOP çš„æƒ…å†µ ?ğŸ”œMSTMğŸ“ é¡¹ç›®ä¸­ä½¿ç”¨äº†@EnableAspectJAutoProxyCreator æˆ–è€…@EnableTransactionManagement æ³¨è§£ï¼Œæˆ–è€…æ˜¯ SpringBoot é¡¹ç›® (è‡ªåŠ¨å¼€å¯ AOP)ï¼Œå¹¶ä¸”ä»£ç ä¸­ä½¿ç”¨äº†åˆ‡é¢åŠé€šçŸ¥æ–¹æ³•â—¼ï¸â­ï¸-point-20230303-1940%%</span>ï¼Œé‚£ä¹ˆåœ¨ 6. registerBeanPostProcessors() ä¸­ä¼šå°†æä¾› AOP åŠŸèƒ½çš„ Bean(AnnotationAwareAspectJAutoProxyCreator) æ³¨å†Œå®Œæˆï¼Œç„¶ååœ¨åé¢çš„ getEarlyBeanReference(beanName, mbd, bean) æ–¹æ³•ä¸­å°±ä¼šèµ° AbstractAutoProxyCreator çš„å®ç°ï¼Œè¿”å› proxyã€‚å¦åˆ™ï¼Œå¦‚æœæ²¡æœ‰ AOP ä»£ç†ï¼Œé‚£ä¹ˆä¼šèµ° SmartInstantiationAwareBeanPostProcessor çš„é»˜è®¤å®ç°ï¼Œè¿”å›æ­£å¸¸ bean</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230129150452.png" alt="image.png"></p><h4 id="4-5-2-2-ç»†èŠ‚"><a href="#4-5-2-2-ç»†èŠ‚" class="headerlink" title="4.5.2.2. ç»†èŠ‚"></a>4.5.2.2. ç»†èŠ‚</h4><p>é˜²æ­¢æå‰ä»£ç†åï¼Œæ­£å¸¸ä»£ç†å†ç”Ÿæˆä¸€æ¬¡ä»£ç†<br><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221216185956.png"></p><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012098021/article/details/107352463/">https://blog.csdn.net/u012098021/article/details/107352463/</a></p><p>ä»£ç†å¯¹è±¡ç¤ºä¾‹</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221217144110.png"></p><h4 id="4-5-2-3-äº§ç”Ÿçš„å½±å“â­ï¸ğŸ”´"><a href="#4-5-2-3-äº§ç”Ÿçš„å½±å“â­ï¸ğŸ”´" class="headerlink" title="4.5.2.3. äº§ç”Ÿçš„å½±å“â­ï¸ğŸ”´"></a>4.5.2.3. äº§ç”Ÿçš„å½±å“â­ï¸ğŸ”´</h4><p><span style="display:none">%%<br>â–¶10.ğŸ¡â­ï¸â—¼ï¸ã€å¦‚æœå¼€å¯äº†ä»£ç†ï¼Œå¹¶ä¸”å½“å‰ Bean ä½¿ç”¨äº†åˆ‡é¢æˆ–è€…äº‹åŠ¡å°±ä¼šæ³¨å…¥åŠ¨æ€ä»£ç†ã€‘â—¼ï¸â­ï¸-point-20230303-2023%%</span><br><span style="background-color:#f0f">@Autowired è‡ªåŠ¨æ³¨å…¥çš„å¯¹è±¡æœ‰å¯èƒ½ä¼šæ˜¯ä»£ç†å¯¹è±¡ï¼Œå–å†³äº Bean æ˜¯å¦ä½¿ç”¨äº† AOP æ³¨è§£</span><br>spring å¾ˆå¤šåŠŸèƒ½éƒ½æ˜¯é€šè¿‡ aop æ¥å®ç°ï¼Œæ¯”å¦‚äº‹åŠ¡ï¼Œç¼“å­˜æ³¨è§£ï¼Œå¼‚æ­¥ã€è¿˜æœ‰ä¸€äº›è‡ªå®šä¹‰çš„ aop ç­‰ç­‰ï¼Œè€Œ aop æ˜¯é€šè¿‡åŠ¨æ€ä»£ç†æ¥å®ç°çš„ï¼Œspring ä¸»è¦ç”¨åˆ°çš„åŠ¨æ€ä»£ç†æœ‰ jdk çš„åŠ¨æ€ä»£ç†å’Œ cglibã€‚</p><ul><li>Spring åœ¨æ²¡æœ‰ä½¿ç”¨ aop çš„æ—¶å€™è‡ªåŠ¨æ³¨å…¥çš„æ—¶å€™æ˜¯åŸå§‹ç±»å‹å¯¹è±¡</li><li>åœ¨å‘ç”Ÿ aop çš„æ—¶å€™ï¼Œè‹¥ä»£ç†å¯¹è±¡æœ‰å®ç°æ¥å£ï¼Œåˆ™é»˜è®¤ä¼šä½¿ç”¨ jdk åŠ¨æ€ä»£ç†</li><li>åœ¨å‘ç”Ÿ aop çš„æ—¶å€™ï¼Œè‹¥ä»£ç†å¯¹è±¡æ²¡æœ‰å®ç°æ¥å£ï¼Œåˆ™é»˜è®¤ä¼šä½¿ç”¨ cglib åŠ¨æ€ä»£ç†</li><li>jdk åŠ¨æ€ä»£ç†å¿…é¡»æœ‰å®ç°æ¥å£</li><li>å¯ä»¥å¼ºåˆ¶ä½¿ç”¨ cglib æ¥åš spring åŠ¨æ€ä»£ç†</li></ul><p>ç¤ºä¾‹ä»£ç ï¼š <a target="_blank" rel="noopener" href="https://xie.infoq.cn/article/29ce37bd3f6f4c5b405549c06">https://xie.infoq.cn/article/29ce37bd3f6f4c5b405549c06</a></p><h3 id="4-5-3-äºŒçº§ç¼“å­˜çš„ä½œç”¨"><a href="#4-5-3-äºŒçº§ç¼“å­˜çš„ä½œç”¨" class="headerlink" title="4.5.3. äºŒçº§ç¼“å­˜çš„ä½œç”¨"></a>4.5.3. äºŒçº§ç¼“å­˜çš„ä½œç”¨</h3><ol><li><p>å¦‚æœè°ƒç”¨ getEarlyBeanReference ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡ç«‹å³è¿”å›ï¼Œä¸ä½¿ç”¨äºŒçº§ç¼“å­˜æ¥ç¼“å­˜èµ·æ¥ï¼Œå°±ä¼šå‡ºç°å¤šæ¬¡ç”ŸæˆåŒä¸€ä¸ªå¯¹è±¡çš„åŠ¨æ€ä»£ç†çš„æƒ…å†µï¼Œæ¯”å¦‚ Bã€C éƒ½ä¸ A å¾ªç¯ä¾èµ–ï¼Œé‚£ä¹ˆä¸ç”¨ç¼“å­˜åˆ¤æ–­ï¼Œç›´æ¥è¿”å›çš„è¯ï¼Œå°±ä¼šç”Ÿæˆ 2 æ¬¡ A çš„ä»£ç†å¯¹è±¡ â•<span style="display:none">%%<br>1519-ğŸ¡â­ï¸â—¼ï¸äºŒçº§ç¼“å­˜çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼ŸğŸ”œMSTMğŸ“ é™¤äº†ç¼“å­˜æ­£å¸¸å¯¹è±¡çš„åŠæˆå“å¯¹è±¡ï¼Œæœ€ä¸»è¦çš„åŠŸèƒ½æ˜¯é˜²æ­¢é‡å¤ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡â—¼ï¸â­ï¸-point-202301291519%%</span><br><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230129151801.png" alt="image.png"></p></li><li><p>å¦‚æœæå‰ä»£ç†ï¼Œåé¢éœ€è¦ä»äºŒçº§ç¼“å­˜ä¸­å–å‡ºè¿”å›å‡ºå»ã€‚</p></li></ol><h3 id="4-5-4-æµ‹è¯•ç¨‹åº"><a href="#4-5-4-æµ‹è¯•ç¨‹åº" class="headerlink" title="4.5.4. æµ‹è¯•ç¨‹åº"></a>4.5.4. æµ‹è¯•ç¨‹åº</h3><p>[[pages&#x2F;002-schdule&#x2F;001-Arch&#x2F;001-Subject&#x2F;013-DemoCode&#x2F;spring-framework&#x2F;springsource-test&#x2F;src&#x2F;main&#x2F;java&#x2F;com&#x2F;atguigu&#x2F;spring&#x2F;config&#x2F;MainConfig.java]]</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230322165716.png" alt="image.png"><br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV15b4y117RJ?p=188&amp;spm_id_from=pageDriver&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV15b4y117RJ?p=188&amp;spm_id_from=pageDriver&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><h2 id="4-6-Async-å¯¼è‡´å¾ªç¯ä¾èµ–æŠ¥é”™â­ï¸ğŸ”´"><a href="#4-6-Async-å¯¼è‡´å¾ªç¯ä¾èµ–æŠ¥é”™â­ï¸ğŸ”´" class="headerlink" title="4.6. @Async å¯¼è‡´å¾ªç¯ä¾èµ–æŠ¥é”™â­ï¸ğŸ”´"></a>4.6. @Async å¯¼è‡´å¾ªç¯ä¾èµ–æŠ¥é”™â­ï¸ğŸ”´</h2><h3 id="4-6-1-åŸå› åˆ†æ"><a href="#4-6-1-åŸå› åˆ†æ" class="headerlink" title="4.6.1. åŸå› åˆ†æ"></a>4.6.1. åŸå› åˆ†æ</h3><p>â•<span style="display:none">%%<br>0836-ğŸ¡â­ï¸â—¼ï¸ä¸€å¥è¯æ¦‚æ‹¬@Async å¯¼è‡´å¾ªç¯ä¾èµ–æŠ¥é”™çš„åŸå› ğŸ”œMSTMğŸ“ ä¸€å¥è¯ï¼šå‘ç”Ÿå¾ªç¯ä¾èµ–æ—¶ï¼Œæ²¡æœ‰åƒ AOP ä¸€æ ·åšåˆ°æå‰ä»£ç†ï¼šåœ¨å®ä¾‹åŒ–ä¹‹åæ”¾å…¥ä¸‰çº§ç¼“å­˜ï¼Œåœ¨å±æ€§å¡«å……æ—¶çœŸæ­£ç”¨åˆ°çš„æ—¶å€™è°ƒç”¨ <code>singletonFactory.getObject()</code> æ—¶æ ¹æ®æ˜¯å¦ç”¨åˆ° AOP æ¥å†³å®šå¡«å……ä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚@EnableAsync åœ¨å±æ€§å¡«å……æ—¶ç»™äº†ä¸€ä¸ªåŠæˆå“å¯¹è±¡ï¼Œè€Œåœ¨åˆå§‹åŒ–å®Œæˆä¹‹ååˆå˜æˆäº†åŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œå¯¼è‡´å‰åä¸ä¸€è‡´ã€‚â—¼ï¸â­ï¸-point-202302030836%%</span><br>@EnableAsync å¼€å¯æ—¶å®ƒä¼šå‘å®¹å™¨å†…æ³¨å…¥ <code>AsyncAnnotationBeanPostProcessor</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ª BeanPostProcessorï¼Œå®ç°äº†<span style="background-color:#f0f">postProcessAfterInitialization</span>æ–¹æ³•ã€‚æ­¤å¤„æˆ‘ä»¬çœ‹ä»£ç ï¼Œåˆ›å»ºä»£ç†çš„åŠ¨ä½œåœ¨æŠ½è±¡çˆ¶ç±» AbstractAdvisingBeanPostProcessor ä¸Šï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// @since 3.2   æ³¨æ„ï¼š@EnableAsyncåœ¨Spring3.1åå‡ºç°</span><br><span class="hljs-comment">// ç»§æ‰¿è‡ªProxyProcessorSupportï¼Œæ‰€ä»¥å…·æœ‰åŠ¨æ€ä»£ç†ç›¸å…³å±æ€§~ æ–¹ä¾¿åˆ›å»ºä»£ç†å¯¹è±¡</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractAdvisingBeanPostProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ProxyProcessorSupport</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanPostProcessor</span> &#123;<br><br>	<span class="hljs-comment">// è¿™é‡Œä¼šç¼“å­˜æ‰€æœ‰è¢«å¤„ç†çš„Bean~~~  eligibleï¼šåˆé€‚çš„</span><br>	<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Class&lt;?&gt;, Boolean&gt; eligibleBeans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="hljs-number">256</span>);<br><br>	<span class="hljs-comment">//postProcessBeforeInitializationæ–¹æ³•ä»€ä¹ˆä¸åš~</span><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">postProcessBeforeInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> &#123;<br>		<span class="hljs-keyword">return</span> bean;<br>	&#125;<br><br>	<span class="hljs-comment">// å…³é”®æ˜¯è¿™é‡Œã€‚å½“Beanåˆå§‹åŒ–å®Œæˆåè¿™é‡Œä¼šæ‰§è¡Œï¼Œè¿™é‡Œä¼šå†³ç­–çœ‹çœ‹è¦ä¸è¦å¯¹æ­¤Beanåˆ›å»ºä»£ç†å¯¹è±¡å†è¿”å›~~~</span><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">postProcessAfterInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> &#123;<br>		<span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.advisor == <span class="hljs-literal">null</span> || bean <span class="hljs-keyword">instanceof</span> AopInfrastructureBean) &#123;<br>			<span class="hljs-comment">// Ignore AOP infrastructure such as scoped proxies.</span><br>			<span class="hljs-keyword">return</span> bean;<br>		&#125;<br><br>		<span class="hljs-comment">// å¦‚æœæ­¤Beanå·²ç»è¢«ä»£ç†äº†ï¼ˆæ¯”å¦‚å·²ç»è¢«äº‹åŠ¡é‚£è¾¹ç»™ä»£ç†äº†~~ï¼‰</span><br>		<span class="hljs-keyword">if</span> (bean <span class="hljs-keyword">instanceof</span> Advised) &#123;<br>			<span class="hljs-type">Advised</span> <span class="hljs-variable">advised</span> <span class="hljs-operator">=</span> (Advised) bean;<br>		<br>			<span class="hljs-comment">// æ­¤å¤„æ‹¿çš„æ˜¯AopUtils.getTargetClass(bean)ç›®æ ‡å¯¹è±¡ï¼Œåšæœ€ç»ˆçš„åˆ¤æ–­</span><br>			<span class="hljs-comment">// isEligible()æ˜¯å¦åˆé€‚çš„åˆ¤æ–­æ–¹æ³•  æ˜¯æœ¬æ–‡æœ€é‡è¦çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä¸‹æ–‡è§£é‡Š~</span><br>			<span class="hljs-comment">// æ­¤å¤„è¿˜æœ‰ä¸ªå°ç»†èŠ‚ï¼šisFrozenä¸ºfalseä¹Ÿå°±æ˜¯è¿˜æ²¡è¢«å†»ç»“çš„æ—¶å€™ï¼Œå°±åªå‘é‡Œé¢æ·»åŠ ä¸€ä¸ªåˆ‡é¢æ¥å£   å¹¶ä¸è¦è‡ªå·±å†åˆ›å»ºä»£ç†å¯¹è±¡äº†  çœäº‹</span><br>			<span class="hljs-keyword">if</span> (!advised.isFrozen() &amp;&amp; isEligible(AopUtils.getTargetClass(bean))) &#123;<br>				<span class="hljs-comment">// Add our local Advisor to the existing proxy&#x27;s Advisor chain...</span><br>				<span class="hljs-comment">// beforeExistingAdvisorså†³å®šè¿™è¯¥advisoræœ€å…ˆæ‰§è¡Œè¿˜æ˜¯æœ€åæ‰§è¡Œ</span><br>				<span class="hljs-comment">// æ­¤å¤„çš„advisorä¸ºï¼šAsyncAnnotationAdvisor  å®ƒåˆ‡å…¥Classå’ŒMethodæ ‡æ³¨æœ‰@Aysncæ³¨è§£çš„åœ°æ–¹~~~</span><br>				<span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.beforeExistingAdvisors) &#123;<br>					advised.addAdvisor(<span class="hljs-number">0</span>, <span class="hljs-built_in">this</span>.advisor);<br>				&#125; <span class="hljs-keyword">else</span> &#123;<br>					advised.addAdvisor(<span class="hljs-built_in">this</span>.advisor);<br>				&#125;<br>				<span class="hljs-keyword">return</span> bean;<br>			&#125;<br>		&#125;<br><br>		<span class="hljs-comment">// è‹¥ä¸æ˜¯ä»£ç†å¯¹è±¡ï¼Œæ­¤å¤„å°±è¦ä¸‹æ‰‹äº†~~~~isEligible() è¿™ä¸ªæ–¹æ³•ç‰¹åˆ«é‡è¦</span><br>		<span class="hljs-keyword">if</span> (isEligible(bean, beanName)) &#123;<br>			<span class="hljs-comment">// copyå±æ€§  proxyFactory.copyFrom(this); ç”Ÿæˆä¸€ä¸ªæ–°çš„ProxyFactory </span><br>			<span class="hljs-type">ProxyFactory</span> <span class="hljs-variable">proxyFactory</span> <span class="hljs-operator">=</span> prepareProxyFactory(bean, beanName);<br>			<span class="hljs-comment">// å¦‚æœæ²¡æœ‰å¼ºåˆ¶é‡‡ç”¨CGLIB å»æ¢æµ‹å®ƒçš„æ¥å£~</span><br>			<span class="hljs-keyword">if</span> (!proxyFactory.isProxyTargetClass()) &#123;<br>				evaluateProxyInterfaces(bean.getClass(), proxyFactory);<br>			&#125;<br>			<span class="hljs-comment">// æ·»åŠ è¿›æ­¤åˆ‡é¢~~ æœ€ç»ˆä¸ºå®ƒåˆ›å»ºä¸€ä¸ªgetProxy ä»£ç†å¯¹è±¡</span><br>			proxyFactory.addAdvisor(<span class="hljs-built_in">this</span>.advisor);<br>			<span class="hljs-comment">//customizeäº¤ç»™å­ç±»å¤å†™ï¼ˆå®é™…å­ç±»ç›®å‰éƒ½æ²¡æœ‰å¤å†™~ï¼‰</span><br>			customizeProxyFactory(proxyFactory);<br>			<span class="hljs-keyword">return</span> proxyFactory.getProxy(getProxyClassLoader());<br>		&#125;<br><br>		<span class="hljs-comment">// No proxy needed.</span><br>		<span class="hljs-keyword">return</span> bean;<br>	&#125;<br>	<br>	<span class="hljs-comment">// æˆ‘ä»¬å‘ç°BeanNameæœ€ç»ˆå…¶å®æ˜¯æ²¡æœ‰ç”¨åˆ°çš„~~~</span><br>	<span class="hljs-comment">// ä½†æ˜¯å­ç±»AbstractBeanFactoryAwareAdvisingPostProcessoræ˜¯ç”¨åˆ°äº†çš„  æ²¡æœ‰åšä»€ä¹ˆ å¯ä»¥å¿½ç•¥~~~</span><br>	<span class="hljs-keyword">protected</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEligible</span><span class="hljs-params">(Object bean, String beanName)</span> &#123;<br>		<span class="hljs-keyword">return</span> isEligible(bean.getClass());<br>	&#125;<br>	<span class="hljs-keyword">protected</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEligible</span><span class="hljs-params">(Class&lt;?&gt; targetClass)</span> &#123;<br>		<span class="hljs-comment">// é¦–æ¬¡è¿›æ¥eligibleçš„å€¼è‚¯å®šä¸ºnull~~~</span><br>		<span class="hljs-type">Boolean</span> <span class="hljs-variable">eligible</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.eligibleBeans.get(targetClass);<br>		<span class="hljs-keyword">if</span> (eligible != <span class="hljs-literal">null</span>) &#123;<br>			<span class="hljs-keyword">return</span> eligible;<br>		&#125;<br>		<span class="hljs-comment">// å¦‚æœæ ¹æœ¬å°±æ²¡æœ‰é…ç½®advisor  ä¹Ÿå°±ä¸ç”¨çœ‹äº†~</span><br>		<span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.advisor == <span class="hljs-literal">null</span>) &#123;<br>			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>		&#125;<br>		<br>		<span class="hljs-comment">// æœ€å…³é”®çš„å°±æ˜¯canApplyè¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœAsyncAnnotationAdvisor  èƒ½åˆ‡è¿›å®ƒ  é‚£è¿™é‡Œå°±æ˜¯true</span><br>		<span class="hljs-comment">// æœ¬ä¾‹ä¸­æ–¹æ³•æ ‡æ³¨æœ‰@Aysncæ³¨è§£ï¼Œæ‰€ä»¥é“å®šæ˜¯èƒ½è¢«åˆ‡å…¥çš„  è¿”å›trueç»§ç»­ä¸Šé¢æ–¹æ³•ä½“çš„å†…å®¹</span><br>		eligible = AopUtils.canApply(<span class="hljs-built_in">this</span>.advisor, targetClass);<br>		<span class="hljs-built_in">this</span>.eligibleBeans.put(targetClass, eligible);<br>		<span class="hljs-keyword">return</span> eligible;<br>	&#125;<br>	...<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ ¹æœ¬åŸç†æ˜¯åªè¦èƒ½è¢«åˆ‡é¢ <code>AsyncAnnotationAdvisor</code> åˆ‡å…¥ï¼ˆå³åªéœ€è¦ç±»&#x2F;æ–¹æ³•æœ‰æ ‡æ³¨ <code>@Async</code> æ³¨è§£å³å¯ï¼‰çš„ Beanï¼Œåœ¨åˆå§‹åŒ–å®Œæˆä¹‹åï¼Œç»è¿‡ <code>BeanPostProcessor.postProcessAfterInitialization()</code> æœ€ç»ˆéƒ½ä¼šç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡ï¼ˆè‹¥å·²ç»æ˜¯ä»£ç†å¯¹è±¡é‡Œï¼Œåªéœ€è¦åŠ å…¥è¯¥åˆ‡é¢å³å¯äº†ï¼‰èµ‹å€¼ç»™ä¸Šé¢çš„ <code>exposedObject</code> ä½œä¸ºè¿”å›æœ€ç»ˆ add è¿› Spring å®¹å™¨å†…ã€‚</p><h3 id="4-6-2-æµç¨‹åˆ†æ"><a href="#4-6-2-æµç¨‹åˆ†æ" class="headerlink" title="4.6.2. æµç¨‹åˆ†æ"></a>4.6.2. æµç¨‹åˆ†æ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AInterface</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BInterface b;<br>    <span class="hljs-meta">@Async</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">funA</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>&#125;<br><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BInterface</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> AInterface a;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">funB</span><span class="hljs-params">()</span> &#123;<br>        a.funA();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><ol><li>A-&gt;B: context.getBean(A) å¼€å§‹åˆ›å»º Aï¼ŒA å®ä¾‹åŒ–å®Œæˆåç»™ A çš„ä¾èµ–å±æ€§ b å¼€å§‹èµ‹å€¼</li><li>B-&gt;A: context.getBean(B) å¼€å§‹åˆ›å»º Bï¼ŒB å®ä¾‹åŒ–å®Œæˆåç»™ B çš„ä¾èµ–å±æ€§ a å¼€å§‹èµ‹å€¼</li></ol><blockquote><p>é‡ç‚¹ï¼šæ­¤æ—¶å› ä¸º A æ”¯æŒå¾ªç¯ä¾èµ–ï¼Œè€Œä¸”æ²¡æœ‰åŠ¨æ€ä»£ç†æ‰€ä»¥ä¼šæ‰§è¡Œ A çš„ getEarlyBeanReference æ–¹æ³•å¾—åˆ°å®ƒçš„æ—©æœŸå¼•ç”¨ã€‚è€Œæ‰§è¡Œ getEarlyBeanReference() çš„æ—¶å€™å› ä¸º@Async æ ¹æœ¬è¿˜æ²¡æ‰§è¡Œï¼Œæ‰€ä»¥æœ€ç»ˆè¿”å›çš„ä»æ—§æ˜¯åŸå§‹å¯¹è±¡çš„åœ°å€</p></blockquote><ol start="3"><li>B å®Œæˆåˆå§‹åŒ–ã€å®Œæˆå±æ€§çš„èµ‹å€¼ï¼Œæ­¤æ—¶å±æ€§ field æŒæœ‰çš„æ˜¯ Bean A<span style="background-color:#0f0">åŸå§‹ç±»å‹çš„å¼•ç”¨</span></li><li>ç»§ç»­ A çš„åˆ›å»ºæµç¨‹ï¼šå®Œæˆäº† A çš„å±æ€§çš„èµ‹å€¼ï¼ˆæ­¤æ—¶å·²æŒæœ‰ B çš„å®ä¾‹çš„å¼•ç”¨ï¼‰ï¼Œç»§ç»­æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³• initializeBean(â€¦)ï¼Œåœ¨æ­¤å¤„ä¼šè§£æ@Aysnc æ³¨è§£ï¼Œä»è€Œç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œæ‰€ä»¥æœ€ç»ˆ exposedObject æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼ˆè€ŒéåŸå§‹å¯¹è±¡ï¼‰æœ€ç»ˆåŠ å…¥åˆ°å®¹å™¨é‡Œ</li></ol><p><span style="display:none">%%<br>â–¶11.ğŸ¡â­ï¸â—¼ï¸ã€åŸå› æ˜¯ ABA æ—¶ï¼ŒA å®ä¾‹åŒ–å®Œæˆå°†åŸå§‹ç±»å‹å¼•ç”¨æ”¾å…¥ä¸‰çº§ç¼“å­˜ï¼Œå±æ€§å¡«å…… B æ—¶è§¦å‘ B çš„åˆ›å»ºæµç¨‹ï¼ŒB å®ä¾‹åŒ–å®Œæˆåå¡«å……å±æ€§æ—¶ä»ä¸‰çº§ç¼“å­˜ä¸­æ‹¿åˆ°çš„æ˜¯åŸå§‹ç±»å‹çš„ A çš„æ—©æœŸå¼•ç”¨ï¼ŒB åˆ›å»ºå®Œæˆåï¼Œç»§ç»­ A çš„åˆ›å»ºæµç¨‹ï¼Œä½†æœ€ååˆå§‹åŒ–å®Œæˆå A ä¸Šçš„@Async æ³¨è§£ç”Ÿæ•ˆç”Ÿæˆäº†åŠ¨æ€ä»£ç†ï¼Œä½†æ˜¯ B ä¸­çš„å¼•ç”¨è¿˜æ˜¯åŸå§‹ç±»å‹çš„å¼•ç”¨ï¼Œé€ æˆå‰åä¸ä¸€è‡´ã€‘â—¼ï¸â­ï¸-point-20230303-2035%%</span> ^vlhwms</p><blockquote><p>ä¸Šæ¼”å°´å°¬çš„åœºé¢ï¼š<span style="background-color:#0f0">B å¼•ç”¨çš„å±æ€§ A æ˜¯ä¸ªåŸå§‹å¯¹è±¡ï¼Œè€Œæ­¤å¤„å‡†å¤‡ return çš„å®ä¾‹ A ç«Ÿç„¶æ˜¯ä¸ªä»£ç†å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ B å¼•ç”¨çš„å¹¶éæ˜¯æœ€ç»ˆå¯¹è±¡ï¼ˆä¸æ˜¯æœ€ç»ˆæ”¾è¿›å®¹å™¨é‡Œçš„å¯¹è±¡ï¼‰</span><br>æ‰§è¡Œè‡ªæ£€ç¨‹åºï¼šç”±äº allowRawInjectionDespiteWrapping é»˜è®¤å€¼æ˜¯ falseï¼Œè¡¨ç¤ºä¸å…è®¸ä¸Šé¢ä¸ä¸€è‡´çš„æƒ…å†µå‘ç”Ÿï¼Œso æœ€ç»ˆå°±æŠ›é”™äº†</p></blockquote><h3 id="4-6-3-è§£å†³æ–¹æ¡ˆ"><a href="#4-6-3-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="4.6.3. è§£å†³æ–¹æ¡ˆ"></a>4.6.3. è§£å†³æ–¹æ¡ˆ</h3><p>é€šè¿‡ä¸Šé¢åˆ†æï¼ŒçŸ¥é“äº†é—®é¢˜çš„æ ¹æœ¬åŸå› ï¼Œç°æ€»ç»“å‡ºè§£å†³ä¸Šè¿°æ–°é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œå¯åˆ†ä¸ºä¸‹é¢ä¸‰ç§æ–¹æ¡ˆï¼š</p><ol><li>æŠŠ allowRawInjectionDespiteWrapping è®¾ç½®ä¸º true</li><li>ä½¿ç”¨@Lazy æˆ–è€…@ComponentScan(lazyInit &#x3D; true) è§£å†³</li><li>ä¸è¦è®©@Async çš„ Bean å‚ä¸å¾ªç¯ä¾èµ–</li></ol><p>@Lazy åŸç†ï¼š <a href="/2023/02/11/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-9%E3%80%81@Lazy/" title="Spring-9ã€@Lazy">Spring-9ã€@Lazy</a></p><h3 id="4-6-4-å…¶ä»–"><a href="#4-6-4-å…¶ä»–" class="headerlink" title="4.6.4. å…¶ä»–"></a>4.6.4. å…¶ä»–</h3><p>æœ¬è´¨ä¸Šï¼š@Async çš„åç½®å¤„ç†å™¨ï¼Œæ²¡æœ‰åœ¨ getEarlyRefrence æ—¶ï¼Œåˆ›å»ºè¢«@Async ä¿®é¥°ä»£ç†å¯¹è±¡ï¼Œè€Œæ˜¯åœ¨ initlizeBean æ–¹æ³•ä¸­åˆ›å»ºäº†ä»£ç†å¯¹è±¡ã€‚ä½œä¸ºå¯¹æ¯”ï¼Œè¢«@Aspect ä¿®é¥°çš„ Aop å¯¹è±¡ä¼šåœ¨ getEarlyRefrence é˜¶æ®µï¼Œæå‰åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œé¡¾ aop æ—¶ä¸å­˜åœ¨è¯¥é—®é¢˜</p><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/f641385712/article/details/92797058">https://blog.csdn.net/f641385712/article/details/92797058</a></p><p>[[(210æ¡æ¶ˆæ¯) ä½¿ç”¨@Asyncå¼‚æ­¥æ³¨è§£å¯¼è‡´è¯¥Beanåœ¨å¾ªç¯ä¾èµ–æ—¶å¯åŠ¨æŠ¥BeanCurrentlyInCreationExceptionå¼‚å¸¸çš„æ ¹æœ¬åŸå› åˆ†æï¼Œä»¥åŠæä¾›è§£å†³æ–¹æ¡ˆã€äº«å­¦Springã€‘_YourBatmançš„åšå®¢-CSDNåšå®¢]]</p><h2 id="4-7-BFPP-å¯¼è‡´è‡ªåŠ¨é…ç½®å¤±è´¥"><a href="#4-7-BFPP-å¯¼è‡´è‡ªåŠ¨é…ç½®å¤±è´¥" class="headerlink" title="4.7. BFPP å¯¼è‡´è‡ªåŠ¨é…ç½®å¤±è´¥"></a>4.7. BFPP å¯¼è‡´è‡ªåŠ¨é…ç½®å¤±è´¥</h2><p><span style="background-color:#f0f">Bean å·¥å‚åç½®å¤„ç†å™¨åœ¨å®¹å™¨åˆ·æ–°çš„ç¬¬ 5 æ­¥ï¼Œè¿œåœ¨ç¬¬ 11 æ­¥ä¸­çš„ 9 å¤§ Bean åç½®å¤„ç†å™¨ä¹‹ä¸Š</span><br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV15b4y117RJ?p=169&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV15b4y117RJ?p=169&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230322185831.png" alt="image.png"></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230322190004.png" alt="image.png"></p><ol><li>BFPP å°½é‡ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•</li><li>ä¾èµ–æ³¨å…¥ä½¿ç”¨å±€éƒ¨å˜é‡</li></ol><h2 id="4-8-å¤šä¾‹çš„å¾ªç¯ä¾èµ–"><a href="#4-8-å¤šä¾‹çš„å¾ªç¯ä¾èµ–" class="headerlink" title="4.8. å¤šä¾‹çš„å¾ªç¯ä¾èµ–"></a>4.8. å¤šä¾‹çš„å¾ªç¯ä¾èµ–</h2><p>Spring æœ‰æ²¡æœ‰è§£å†³å¤šä¾‹ Bean çš„å¾ªç¯ä¾èµ–ï¼Ÿ<br>a.Â å¤šä¾‹ä¸ä¼šä½¿ç”¨ç¼“å­˜è¿›è¡Œå­˜å‚¨ï¼ˆå¤šä¾‹ Bean æ¯æ¬¡ä½¿ç”¨éƒ½éœ€è¦é‡æ–°åˆ›å»ºï¼‰<br>b.Â ä¸ç¼“å­˜æ—©æœŸå¯¹è±¡å°±æ— æ³•è§£å†³å¾ªç¯</p><p><span style="background-color:#f0f">Â Â å…³é”®ï¼šÂ ä¸€å®šè¦æœ‰ä¸€ä¸ªç¼“å­˜ä¿å­˜å®ƒçš„æ—©æœŸå¯¹è±¡ä½œä¸ºæ­»å¾ªç¯çš„å‡ºå£</span></p><h2 id="4-9-æ„é€ æ–¹æ³•çš„å¾ªç¯ä¾èµ–"><a href="#4-9-æ„é€ æ–¹æ³•çš„å¾ªç¯ä¾èµ–" class="headerlink" title="4.9. æ„é€ æ–¹æ³•çš„å¾ªç¯ä¾èµ–"></a>4.9. æ„é€ æ–¹æ³•çš„å¾ªç¯ä¾èµ–</h2><p><span style="display:none">%%<br>â–¶6.ğŸ¡â­ï¸â—¼ï¸ã€ğŸŒˆè´¹æ›¼æ— æ•ŒğŸŒˆâ­ï¸ç¬¬ä¸€æ­¥â­ï¸ã€‘â—¼ï¸â­ï¸-point-20230322-1813%%</span>â• ^7cjsyr</p><h3 id="4-9-1-Lazy"><a href="#4-9-1-Lazy" class="headerlink" title="4.9.1. @Lazy"></a>4.9.1. @Lazy</h3><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230322174213.png" alt="image.png"></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230129154529.png" alt="image.png"></p><p>ä½¿ç”¨@Lazy æ³¨è§£ï¼Œä¼šåˆ›å»º cglib åŠ¨æ€ä»£ç†<br><span style="display:none"></span></p><ul><li><input checked disabled type="checkbox"> ğŸš© - todoï¼š<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/562691467">https://zhuanlan.zhihu.com/p/562691467</a> - ğŸ¡ 2023-01-29 15:53 <a href="/2023/02/11/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-9%E3%80%81@Lazy/" title="Spring-9ã€@Lazy">Spring-9ã€@Lazy</a></li></ul><p><a target="_blank" rel="noopener" href="https://www.yuanjava.cn/posts/spring-constructor-circular-dependencies/">https://www.yuanjava.cn/posts/spring-constructor-circular-dependencies/</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/WX10301075WX/article/details/123904543">https://blog.csdn.net/WX10301075WX/article/details/123904543</a></p><p>å¾ªç¯ä¾èµ–</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221220190226.png"></p><h3 id="4-9-2-ObjectFactory"><a href="#4-9-2-ObjectFactory" class="headerlink" title="4.9.2. ObjectFactory"></a>4.9.2. ObjectFactory</h3><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230322174709.png" alt="image.png"></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230322174447.png" alt="image.png"></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230322174621.png" alt="image.png"></p><h3 id="4-9-3-Provider"><a href="#4-9-3-Provider" class="headerlink" title="4.9.3. Provider"></a>4.9.3. Provider</h3><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230322174904.png" alt="image.png"></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230322175411.png" alt="image.png"><br><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230322175431.png" alt="image.png"></p><h3 id="4-9-4-Scope"><a href="#4-9-4-Scope" class="headerlink" title="4.9.4. @Scope"></a>4.9.4. @Scope</h3><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230322175605.png" alt="image.png"></p><h2 id="4-10-é˜²æ­¢è·å–åˆ°ä¸å®Œæ•´çš„-Beanâ­ï¸ğŸ”´"><a href="#4-10-é˜²æ­¢è·å–åˆ°ä¸å®Œæ•´çš„-Beanâ­ï¸ğŸ”´" class="headerlink" title="4.10. é˜²æ­¢è·å–åˆ°ä¸å®Œæ•´çš„ Beanâ­ï¸ğŸ”´"></a>4.10. é˜²æ­¢è·å–åˆ°ä¸å®Œæ•´çš„ Beanâ­ï¸ğŸ”´</h2><p><span style="display:none">%%<br>â–¶75.ğŸ¡â­ï¸â—¼ï¸ã€ğŸŒˆè´¹æ›¼æ— æ•ŒğŸŒˆâ­ï¸ç¬¬ä¸€æ­¥â­ï¸ã€‘â—¼ï¸â­ï¸-point-20230306-1455%%</span>â• ^d4s7ab</p><p><span style="display:none">%%<br>â–¶12.ğŸ¡â­ï¸â—¼ï¸ã€åˆ›å»ºå¯¹è±¡æ—¶ç”¨åŒä¸€æŠŠé”åŒæ—¶é”ä½ 2 ä¸ªåœ°æ–¹ï¼Œåˆ†åˆ«æ˜¯ 2 ä¸ªé‡è½½çš„ getsingleton æ–¹æ³•ã€‚ç¬¬ä¸€ä¸ªé”ä½åˆ›å»º Bean çš„æ•´ä¸ªæµç¨‹ï¼ŒåŒ…æ‹¬å®ä¾‹åŒ–ã€å±æ€§å¡«å……å’Œåˆå§‹åŒ–ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œç¬¬äºŒæŠŠé”åœ¨ä¸‰çº§ç¼“å­˜å‰é¢ï¼Œå…¶ä»–çº¿ç¨‹æŒ‰æ¬¡åºåˆ°ä¸€çº§ã€äºŒçº§ç¼“å­˜ä¸­æ‹¿éƒ½æ˜¯ç©ºçš„ï¼Œè¢«é˜»å¡åœ¨ä¸‰çº§ç¼“å­˜å‰é¢ã€‚ç¬¬ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºå®Œå¯¹è±¡ï¼Œæ”¾å…¥ 1 çº§ç¼“å­˜ï¼Œå¹¶æ¸…ç©º 23 çº§ç¼“å­˜ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹é€šè¿‡åŒé‡æ£€æŸ¥é”æœºåˆ¶ï¼Œå†æ¬¡æŸ¥çœ‹ 1 çº§ç¼“å­˜å°±æ‹¿åˆ°äº†éœ€è¦çš„ Beanã€‘â—¼ï¸â­ï¸-point-20230303-2218%%</span><br><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230102105440.png"><br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1t44y1C73F?p=29&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV1t44y1C73F?p=29&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><p><span style="background-color:#0f0"><font color="#ff0000">ä¸Šé¢è¿™ä¸ªå›¾å¯¹åº”çš„ç‰ˆæœ¬ä¸º 5.0.Xï¼Œåé¢ç‰ˆæœ¬ 5.2.X ä¹‹åï¼ŒSpring åªé”åœ¨ä¸‰çº§ç¼“å­˜å‰é¢ï¼Œä¹Ÿæ­£å› æ­¤ä¸€çº§ã€äºŒçº§ç¼“å­˜ç”¨çš„æ˜¯ ConcurrentHashMap</font></span> â•<span style="display:none">%%<br>1741-ğŸ¡â­ï¸â—¼ï¸Spring é˜²æ­¢ä¸å®Œæ•´çš„ Bean çš„æºç ä¸­ç‰ˆæœ¬å˜åŒ–ğŸ”œMSTMğŸ“ 5.2.X ä¹‹åï¼Œåªé”ä¸‰çº§ç¼“å­˜ï¼ŒæŠŠäºŒçº§ç¼“å­˜æ‹¿åˆ°äº†é”å¤–é¢ï¼Œæ²¡çœ‹å‡ºæ¥ä»€ä¹ˆç‰¹æ®Šä½œç”¨ï¼Œä¹Ÿæ²¡æœ‰å½±å“ï¼Œå› ä¸ºçº¿ç¨‹ 1 æœ€ç»ˆå°†å®Œæ•´çš„ bean åŠ å…¥äº†ä¸€çº§ç¼“å­˜ï¼Œå¹¶æ¸…ç©ºäº†äºŒä¸‰çº§ç¼“å­˜ï¼Œçº¿ç¨‹ 2 è·å¾—é”ä¹‹åï¼ŒæŒ‰ä¸€äºŒä¸‰çº§ç¼“å­˜è¿›è¡ŒæŸ¥è¯¢ï¼Œå…ˆæŸ¥åˆ°ä¸€çº§ç¼“å­˜ä¸­æœ‰å°±è¿”å›äº†â—¼ï¸â­ï¸-point-202301291741%%</span></p><ol><li>ä¸¤ä¸ªåœ°æ–¹åŠ äº†åŒä¸€æŠŠé”ï¼Œå³é”ä½äº†ä¸€çº§ç¼“å­˜</li><li>å…ˆåœ¨åˆ›å»º bean çš„è¿‡ç¨‹ä¸­åŠ äº†é”ï¼Œå…·ä½“ä½ç½®åœ¨ <code>doGetBean</code> ä¸­çš„ç¬¬äºŒä¸ª <code>getSingleton</code>ï¼Œå³å…¥å‚ä¸º <code>beanName</code> å’Œ <code>ObjectFactory&lt;?&gt;</code></li><li><span style="background-color:red">äºæ­¤åŒæ—¶ï¼Œç›¸å½“äºä¹Ÿåœ¨ getSingleton(beanName, boolean) ä¸­åŠ äº†é”ï¼Œå› ä¸ºæ˜¯åŒä¸€æŠŠå¯¹è±¡é”</span> â•<span style="display:none">%%<br>1538-ğŸ¡â­ï¸â—¼ï¸Spring å¦‚ä½•é˜²æ­¢è·å–åˆ°ä¸å®Œæ•´çš„ Bean çš„ğŸ”œMSTMğŸ“ åˆ†åˆ«åœ¨åˆ›å»º bean(getSingleton(beanName,beanFactory)) å’Œè·å– bean çš„ (getSingleton(beanName)) æ–¹æ³•è¿™ 2 ä¸ªåœ°æ–¹åŠ äº†åŒä¸€ä¸ªå¯¹è±¡é”ï¼Œä½¿ç”¨äº†ä¸€çº§ç¼“å­˜å¯¹è±¡ã€‚åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­å…ˆè¿›å…¥ getSingleton(beanName)ï¼Œä½†æ˜¯å› ä¸ºåˆ¤æ–­é€»è¾‘æ²¡æœ‰è¿›å…¥åˆ°åŠ é”çš„åœ°æ–¹ï¼Œç¬¬ä¸€æ¬¡åŠ é”æ˜¯åœ¨ getSingleton(beanName,beanFactory)ï¼Œç„¶åå¯¹è±¡é”å°±ç”Ÿæ•ˆäº†ï¼Œç›¸å½“äºåŒæ—¶åœ¨ getSingleton(beanName) é‡Œä¹ŸåŠ äº†é”â—¼ï¸â­ï¸-point-202301301538%%</span></li></ol><p><span style="background-color:#f0f">åªèƒ½è¯´å¤ªç²¾å¦™äº†ï¼Œ2 ä¸ªé”éƒ½æ˜¯åœ¨å•ä¾‹ä»“åº“ <code>DefaultSingletonBeanRegistry</code> ä¸­ï¼Œ<code>getSingleton</code> çš„ 2 ä¸ªé‡è½½çš„æ–¹æ³•é‡Œï¼š</span><br><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230130144138.png" alt="image.png"></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230130144101.png" alt="image.png"></p><h1 id="5-æ‰©å±•ç‚¹"><a href="#5-æ‰©å±•ç‚¹" class="headerlink" title="5. æ‰©å±•ç‚¹"></a>5. æ‰©å±•ç‚¹</h1><p>^ywsrjj</p><a href="/2023/01/28/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-7%E3%80%81%E6%89%A9%E5%B1%95%E7%82%B9/" title="Spring-7ã€æ‰©å±•ç‚¹">Spring-7ã€æ‰©å±•ç‚¹</a><h1 id="6-è®¾è®¡æ¨¡å¼"><a href="#6-è®¾è®¡æ¨¡å¼" class="headerlink" title="6. è®¾è®¡æ¨¡å¼"></a>6. è®¾è®¡æ¨¡å¼</h1><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221213090019.png"></p><h1 id="7-å®æˆ˜ç»éªŒ"><a href="#7-å®æˆ˜ç»éªŒ" class="headerlink" title="7. å®æˆ˜ç»éªŒ"></a>7. å®æˆ˜ç»éªŒ</h1><p>æ‰‹åŠ¨é›†æˆ Bean åˆ°å®¹å™¨ä¸­<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/yuan882696yan/article/details/99082252">https://blog.csdn.net/yuan882696yan/article/details/99082252</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è£…é…å¤–éƒ¨beanï¼ˆä¸åœ¨springå®¹å™¨ä¸­çš„beanï¼‰</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileSystemXmlApplicationContext</span>(<span class="hljs-string">&quot;C:\\Users\\IdeaProjects\\springDemo\\src\\main\\java\\com\\beanfactory\\autowireCapableBeanFactory\\test.xml&quot;</span>);<br>        <span class="hljs-type">AutowireCapableBeanFactory</span> <span class="hljs-variable">autowireCapableBeanFactory</span> <span class="hljs-operator">=</span> context.getAutowireCapableBeanFactory();<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> autowireCapableBeanFactory.autowire(Foo.class, AutowireCapableBeanFactory.AUTOWIRE_BY_NAME, <span class="hljs-literal">true</span>);<br><span class="hljs-comment">// Fooæ²¡æœ‰åœ¨test.xmlä¸­æ³¨å†Œï¼Œä¸å—springå®¹å™¨ç®¡åˆ¶</span><br><span class="hljs-comment">// é€šè¿‡autowireCapableBeanFactoryçš„æ–¹å¼ï¼Œä¾ç„¶å¯ä»¥è·å–åˆ°fooï¼Œå¹¶æ‰§è¡Œfooé‡Œçš„testæ–¹æ³•</span><br>        <span class="hljs-type">Foo</span> <span class="hljs-variable">foo</span> <span class="hljs-operator">=</span> (Foo) bean;<br>        foo.test();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="8-å‚è€ƒä¸æ„Ÿè°¢"><a href="#8-å‚è€ƒä¸æ„Ÿè°¢" class="headerlink" title="8. å‚è€ƒä¸æ„Ÿè°¢"></a>8. å‚è€ƒä¸æ„Ÿè°¢</h1><h2 id="8-1-å›¾çµå¾åº¶"><a href="#8-1-å›¾çµå¾åº¶" class="headerlink" title="8.1. å›¾çµå¾åº¶"></a>8.1. å›¾çµå¾åº¶</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1t44y1C73F/?p=24&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV1t44y1C73F/?p=24&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a> 75p</p><p>[[Springå…¨å®¶æ¡¶é¢è¯•é¢˜â€”å›¾çµå¾åº¶.pdf]]</p><p><a target="_blank" rel="noopener" href="https://www.processon.com/view/link/5f5075c763768959e2d109df#map">https://www.processon.com/view/link/5f5075c763768959e2d109df#map</a><br><a target="_blank" rel="noopener" href="https://www.processon.com/view/link/5f1fb2cf1e08533a628a7b4c">https://www.processon.com/view/link/5f1fb2cf1e08533a628a7b4c</a><br>Bean åˆ›å»ºè¿‡ç¨‹ï¼š <a target="_blank" rel="noopener" href="https://www.processon.com/view/link/5f15341b07912906d9ae8642">https://www.processon.com/view/link/5f15341b07912906d9ae8642</a></p><h2 id="8-2-å°šç¡…è°·é›·ä¸°é˜³"><a href="#8-2-å°šç¡…è°·é›·ä¸°é˜³" class="headerlink" title="8.2. å°šç¡…è°·é›·ä¸°é˜³"></a>8.2. å°šç¡…è°·é›·ä¸°é˜³</h2><h3 id="8-2-1-é…å¥—è§†é¢‘"><a href="#8-2-1-é…å¥—è§†é¢‘" class="headerlink" title="8.2.1. é…å¥—è§†é¢‘"></a>8.2.1. é…å¥—è§†é¢‘</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1gW411W7wy/?spm_id_from=333.337.search-card.all.click">https://www.bilibili.com/video/BV1gW411W7wy/?spm_id_from=333.337.search-card.all.click</a></p><h3 id="8-2-2-é…å¥—ä»£ç "><a href="#8-2-2-é…å¥—ä»£ç " class="headerlink" title="8.2.2. é…å¥—ä»£ç "></a>8.2.2. é…å¥—ä»£ç </h3><p>spring æ³¨è§£é©±åŠ¨å¼€å‘ _spring æºç ç‰ˆ - é›·ä¸°é˜³ - å°šç¡…è°·<br>[[pages&#x2F;002-schdule&#x2F;001-Arch&#x2F;001-Subject&#x2F;013-DemoCode&#x2F;Springæ³¨è§£é©±åŠ¨å¼€å‘-å°šç¡…è°·-é›·ä¸°é˜³&#x2F;spring-annotation&#x2F;src&#x2F;main&#x2F;resources&#x2F;SpringSource.txt]]</p><h3 id="8-2-3-é…å¥—ç¬”è®°"><a href="#8-2-3-é…å¥—ç¬”è®°" class="headerlink" title="8.2.3. é…å¥—ç¬”è®°"></a>8.2.3. é…å¥—ç¬”è®°</h3><p><a target="_blank" rel="noopener" href="https://liayun.blog.csdn.net/article/details/111413608">https://liayun.blog.csdn.net/article/details/111413608</a></p><h2 id="8-3-é©¬å£«å…µ-lianpengju"><a href="#8-3-é©¬å£«å…µ-lianpengju" class="headerlink" title="8.3. é©¬å£«å…µ -lianpengju"></a>8.3. é©¬å£«å…µ -lianpengju</h2><p>[[pages&#x2F;002-schdule&#x2F;001-Arch&#x2F;001-Subject&#x2F;013-DemoCode&#x2F;lianpengju&#x2F;spring-beans&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;springframework&#x2F;beans&#x2F;factory&#x2F;support&#x2F;DefaultSingletonBeanRegistry.java]] â•<span style="display:none">%%<br>0915-ğŸ¡â­ï¸â—¼ï¸gradle é…ç½®æœ‰é—®é¢˜ï¼Œæµ‹è¯•ä¾‹å­ä½¿ç”¨çš„æ˜¯å°šç¡…è°·çš„ spring-frameworkï¼šspringsource-testâ—¼ï¸â­ï¸-point-202301290915%%</span></p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV11B4y1175J?p=6&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV11B4y1175J?p=6&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><h2 id="8-4-é»‘é©¬"><a href="#8-4-é»‘é©¬" class="headerlink" title="8.4. é»‘é©¬"></a>8.4. é»‘é©¬</h2><h3 id="8-4-1-è§†é¢‘"><a href="#8-4-1-è§†é¢‘" class="headerlink" title="8.4.1. è§†é¢‘"></a>8.4.1. è§†é¢‘</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV15b4y117RJ?p=196&amp;spm_id_from=pageDriver&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV15b4y117RJ?p=196&amp;spm_id_from=pageDriver&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><h3 id="8-4-2-èµ„æ–™"><a href="#8-4-2-èµ„æ–™" class="headerlink" title="8.4.2. èµ„æ–™"></a>8.4.2. èµ„æ–™</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">/Users/taylor/Nutstore Files/Obsidian_data/pages/002-schdule/001-Arch/001-Subject/011-é¢è¯•ä¸“é¢˜/é»‘é©¬é¢è¯•é¢˜<br></code></pre></td></tr></table></figure><h2 id="8-5-æµ‹è¯•-Demo"><a href="#8-5-æµ‹è¯•-Demo" class="headerlink" title="8.5. æµ‹è¯• Demo"></a>8.5. æµ‹è¯• Demo</h2><p>013-DemoCode&#x2F;spring-framework&#x2F;spring<br>[[AnnotationMainTest.java]]</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…:</span> <span class="post-copyright-info"><a href="https://taylorluo.github.io">Taylor Luo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥:</span> <span class="post-copyright-info"><a href="https://taylorluo.github.io/2022/12/04/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-2%E3%80%81IOC/">https://taylorluo.github.io/2022/12/04/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-2%E3%80%81IOC/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜:</span> <span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://taylorluo.github.io" target="_blank">Taylor</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/">æ¡†æ¶æºç ä¸“é¢˜</a><a class="post-meta__tags" href="/tags/Spring/">Spring</a><a class="post-meta__tags" href="/tags/IOC/">IOC</a></div><div class="post_share"><div class="social-share" data-image="https://picsum.photos/1920/1080" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="å¾®ä¿¡"></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="æ”¯ä»˜å®"></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/12/04/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-6%E3%80%81%E6%95%B4%E5%90%88Mybatis-@MapperScan/"><img class="prev-cover" src="https://picsum.photos/1920/1082" onerror='onerror=null,src="/null"' alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">æ¡†æ¶æºç ä¸“é¢˜-Spring-6ã€æ•´åˆMybatis</div></div></a></div><div class="next-post pull-right"><a href="/2022/12/04/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-3%E3%80%81AOP%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86-@EnableAspectJAutoProxy/"><img class="next-cover" src="https://picsum.photos/1920/1082" onerror='onerror=null,src="/null"' alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">æ¡†æ¶æºç ä¸“é¢˜-Spring-3ã€AOP</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2023/01/28/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-7%E3%80%81%E6%89%A9%E5%B1%95%E7%82%B9/" title="æ¡†æ¶æºç ä¸“é¢˜-Spring-7ã€æ‰©å±•ç‚¹"><img class="cover" src="https://picsum.photos/1920/992" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-29</div><div class="title">æ¡†æ¶æºç ä¸“é¢˜-Spring-7ã€æ‰©å±•ç‚¹</div></div></a></div><div><a href="/2023/02/01/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-8%E3%80%81BeanDefinition/" title="æ¡†æ¶æºç ä¸“é¢˜-Spring-8ã€BeanDefinition"><img class="cover" src="https://picsum.photos/1920/1080" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-02</div><div class="title">æ¡†æ¶æºç ä¸“é¢˜-Spring-8ã€BeanDefinition</div></div></a></div><div><a href="/2022/12/12/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-0%E3%80%81PostProcessor/" title="æ¡†æ¶æºç ä¸“é¢˜-Spring-0ã€PostProcessor"><img class="cover" src="https://unpkg.com/justlovesmile-img/cover2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-13</div><div class="title">æ¡†æ¶æºç ä¸“é¢˜-Spring-0ã€PostProcessor</div></div></a></div><div><a href="/2023/02/19/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-10%E3%80%81@Autowired/" title="æ¡†æ¶æºç ä¸“é¢˜-Spring-10ã€"><img class="cover" src="https://picsum.photos/1920/1083" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-20</div><div class="title">æ¡†æ¶æºç ä¸“é¢˜-Spring-10ã€</div></div></a></div><div><a href="/2023/02/19/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-11%E3%80%81@PostConstruct/" title="1"><img class="cover" src="https://picsum.photos/1920/992" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-20</div><div class="title">1</div></div></a></div><div><a href="/2022/12/08/002-%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E4%B8%93%E9%A2%98/Spring-5%E3%80%81%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1-@EnableTransactionManagement/" title="æ¡†æ¶æºç ä¸“é¢˜-Spring-5ã€å£°æ˜å¼äº‹åŠ¡"><img class="cover" src="https://picsum.photos/1920/1086" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-09</div><div class="title">æ¡†æ¶æºç ä¸“é¢˜-Spring-5ã€å£°æ˜å¼äº‹åŠ¡</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/index.jpeg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">Taylor Luo</div><div class="author-info__description">äººç”Ÿæµ·æµ· ä¸å¿˜åˆå¿ƒ</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">183</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">85</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">31</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E5%AE%B9%E5%99%A8-API"><span class="toc-text">1. å®¹å™¨ API</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">2. å·¥ä½œåŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">2.1. å·¥ä½œæµç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-Bean-%E5%AE%9A%E4%B9%89%E6%B3%A8%E5%86%8C"><span class="toc-text">2.1.1. Bean å®šä¹‰æ³¨å†Œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-IOC-%E5%AE%B9%E5%99%A8%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">2.1.2. IOC å®¹å™¨çš„åˆå§‹åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-Bean-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%8A%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5"><span class="toc-text">2.1.3. Bean åˆå§‹åŒ–åŠä¾èµ–æ³¨å…¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-4-Bean-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">2.1.4. Bean çš„ä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">2.2. ç”Ÿå‘½å‘¨æœŸ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E5%AE%B9%E5%99%A8%E5%88%B7%E6%96%B0"><span class="toc-text">3. å®¹å™¨åˆ·æ–°</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96"><span class="toc-text">4. å¾ªç¯ä¾èµ–</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E7%9A%84%E7%A7%8D%E7%B1%BB%E2%AD%90%EF%B8%8F%F0%9F%94%B4"><span class="toc-text">4.1. å¾ªç¯ä¾èµ–çš„ç§ç±»â­ï¸ğŸ”´</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-text">4.1.1. å±æ€§æ³¨å…¥ä¾èµ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E4%BE%9D%E8%B5%96"><span class="toc-text">4.1.2. æ„é€ æ–¹æ³•ä¾èµ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-3-%E5%A4%9A%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-text">4.1.3. å¤šä¾‹æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E5%8F%98%E6%9B%B4%E5%8E%86%E5%8F%B2"><span class="toc-text">4.2. å˜æ›´å†å²</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-%E5%85%B3%E9%97%AD%E9%BB%98%E8%AE%A4%E6%94%AF%E6%8C%81%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96"><span class="toc-text">4.2.1. å…³é—­é»˜è®¤æ”¯æŒå¾ªç¯ä¾èµ–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%B5%81%E7%A8%8B%E2%AD%90%EF%B8%8F%F0%9F%94%B4"><span class="toc-text">4.3. å¾ªç¯ä¾èµ–æµç¨‹â­ï¸ğŸ”´</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-%E5%90%84%E7%BA%A7%E7%BC%93%E5%AD%98%E7%9A%84%E5%8A%A0%E5%85%A5%E6%97%B6%E6%9C%BA"><span class="toc-text">4.3.1. å„çº§ç¼“å­˜çš„åŠ å…¥æ—¶æœº</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-1-%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-text">4.3.1.1. ä¸€çº§ç¼“å­˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-2-%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-text">4.3.1.2. äºŒçº§ç¼“å­˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-3-%E4%B8%89%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-text">4.3.1.3. ä¸‰çº§ç¼“å­˜</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB"><span class="toc-text">4.4. å¾ªç¯ä¾èµ–é—®é¢˜æ±‡æ€»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%80%E7%BA%A7%E4%BA%8C%E7%BA%A7%E6%98%AF-ConcurrentHashMap"><span class="toc-text">4.4.1. ä¸ºä»€ä¹ˆä¸€çº§äºŒçº§æ˜¯ ConcurrentHashMap</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-AOP-%E6%8F%90%E5%89%8D%E4%BB%A3%E7%90%86%E9%80%BB%E8%BE%91"><span class="toc-text">4.5. AOP æå‰ä»£ç†é€»è¾‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-1-%E6%AD%A3%E5%B8%B8%E4%BB%A3%E7%90%86"><span class="toc-text">4.5.1. æ­£å¸¸ä»£ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-2-%E6%8F%90%E5%89%8D%E4%BB%A3%E7%90%86"><span class="toc-text">4.5.2. æå‰ä»£ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-2-1-getEarlyBeanReference"><span class="toc-text">4.5.2.1. getEarlyBeanReference</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-2-2-%E7%BB%86%E8%8A%82"><span class="toc-text">4.5.2.2. ç»†èŠ‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-2-3-%E4%BA%A7%E7%94%9F%E7%9A%84%E5%BD%B1%E5%93%8D%E2%AD%90%EF%B8%8F%F0%9F%94%B4"><span class="toc-text">4.5.2.3. äº§ç”Ÿçš„å½±å“â­ï¸ğŸ”´</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-3-%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">4.5.3. äºŒçº§ç¼“å­˜çš„ä½œç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-4-%E6%B5%8B%E8%AF%95%E7%A8%8B%E5%BA%8F"><span class="toc-text">4.5.4. æµ‹è¯•ç¨‹åº</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-Async-%E5%AF%BC%E8%87%B4%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E6%8A%A5%E9%94%99%E2%AD%90%EF%B8%8F%F0%9F%94%B4"><span class="toc-text">4.6. @Async å¯¼è‡´å¾ªç¯ä¾èµ–æŠ¥é”™â­ï¸ğŸ”´</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-1-%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90"><span class="toc-text">4.6.1. åŸå› åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-2-%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90"><span class="toc-text">4.6.2. æµç¨‹åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-3-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-text">4.6.3. è§£å†³æ–¹æ¡ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-4-%E5%85%B6%E4%BB%96"><span class="toc-text">4.6.4. å…¶ä»–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-BFPP-%E5%AF%BC%E8%87%B4%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%A4%B1%E8%B4%A5"><span class="toc-text">4.7. BFPP å¯¼è‡´è‡ªåŠ¨é…ç½®å¤±è´¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-8-%E5%A4%9A%E4%BE%8B%E7%9A%84%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96"><span class="toc-text">4.8. å¤šä¾‹çš„å¾ªç¯ä¾èµ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-9-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E7%9A%84%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96"><span class="toc-text">4.9. æ„é€ æ–¹æ³•çš„å¾ªç¯ä¾èµ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-9-1-Lazy"><span class="toc-text">4.9.1. @Lazy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-9-2-ObjectFactory"><span class="toc-text">4.9.2. ObjectFactory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-9-3-Provider"><span class="toc-text">4.9.3. Provider</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-9-4-Scope"><span class="toc-text">4.9.4. @Scope</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-10-%E9%98%B2%E6%AD%A2%E8%8E%B7%E5%8F%96%E5%88%B0%E4%B8%8D%E5%AE%8C%E6%95%B4%E7%9A%84-Bean%E2%AD%90%EF%B8%8F%F0%9F%94%B4"><span class="toc-text">4.10. é˜²æ­¢è·å–åˆ°ä¸å®Œæ•´çš„ Beanâ­ï¸ğŸ”´</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E6%89%A9%E5%B1%95%E7%82%B9"><span class="toc-text">5. æ‰©å±•ç‚¹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-text">6. è®¾è®¡æ¨¡å¼</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%AE%9E%E6%88%98%E7%BB%8F%E9%AA%8C"><span class="toc-text">7. å®æˆ˜ç»éªŒ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E5%8F%82%E8%80%83%E4%B8%8E%E6%84%9F%E8%B0%A2"><span class="toc-text">8. å‚è€ƒä¸æ„Ÿè°¢</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E5%9B%BE%E7%81%B5%E5%BE%90%E5%BA%B6"><span class="toc-text">8.1. å›¾çµå¾åº¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E5%B0%9A%E7%A1%85%E8%B0%B7%E9%9B%B7%E4%B8%B0%E9%98%B3"><span class="toc-text">8.2. å°šç¡…è°·é›·ä¸°é˜³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-1-%E9%85%8D%E5%A5%97%E8%A7%86%E9%A2%91"><span class="toc-text">8.2.1. é…å¥—è§†é¢‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-2-%E9%85%8D%E5%A5%97%E4%BB%A3%E7%A0%81"><span class="toc-text">8.2.2. é…å¥—ä»£ç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-3-%E9%85%8D%E5%A5%97%E7%AC%94%E8%AE%B0"><span class="toc-text">8.2.3. é…å¥—ç¬”è®°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-%E9%A9%AC%E5%A3%AB%E5%85%B5-lianpengju"><span class="toc-text">8.3. é©¬å£«å…µ -lianpengju</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-%E9%BB%91%E9%A9%AC"><span class="toc-text">8.4. é»‘é©¬</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-1-%E8%A7%86%E9%A2%91"><span class="toc-text">8.4.1. è§†é¢‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-2-%E8%B5%84%E6%96%99"><span class="toc-text">8.4.2. èµ„æ–™</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-5-%E6%B5%8B%E8%AF%95-Demo"><span class="toc-text">8.5. æµ‹è¯• Demo</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/012-%E7%BB%8F%E9%AA%8C%E4%B8%93%E9%A2%98/%E7%BB%8F%E9%AA%8C%E4%B8%93%E9%A2%98-%E9%A3%8E%E6%8E%A7%E7%B3%BB%E7%BB%9F-2%E3%80%81%E9%A3%8E%E6%8E%A7%E4%B8%AD%E5%8F%B0/" title="æ— é¢˜"><img src="https://picsum.photos/1920/1081" onerror='this.onerror=null,this.src="/null"' alt="æ— é¢˜"></a><div class="content"><a class="title" href="/2023/06/13/012-%E7%BB%8F%E9%AA%8C%E4%B8%93%E9%A2%98/%E7%BB%8F%E9%AA%8C%E4%B8%93%E9%A2%98-%E9%A3%8E%E6%8E%A7%E7%B3%BB%E7%BB%9F-2%E3%80%81%E9%A3%8E%E6%8E%A7%E4%B8%AD%E5%8F%B0/" title="æ— é¢˜">æ— é¢˜</a><time datetime="2023-06-13T23:32:43.044Z" title="å‘è¡¨äº 2023-06-14 07:32:43">2023-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/005-%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98-15%E3%80%81%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/" title="åˆ†å¸ƒå¼ä¸“é¢˜-15ã€é“¾è·¯è¿½è¸ª"><img src="https://picsum.photos/1920/962" onerror='this.onerror=null,this.src="/null"' alt="åˆ†å¸ƒå¼ä¸“é¢˜-15ã€é“¾è·¯è¿½è¸ª"></a><div class="content"><a class="title" href="/2023/06/13/005-%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98-15%E3%80%81%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/" title="åˆ†å¸ƒå¼ä¸“é¢˜-15ã€é“¾è·¯è¿½è¸ª">åˆ†å¸ƒå¼ä¸“é¢˜-15ã€é“¾è·¯è¿½è¸ª</a><time datetime="2023-06-13T16:00:00.000Z" title="å‘è¡¨äº 2023-06-14 00:00:00">2023-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/013-%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/%E8%B5%84%E6%BA%90%E5%AF%BC%E8%88%AA/" title="èµ„æºå¯¼èˆª"><img src="https://picsum.photos/1920/992" onerror='this.onerror=null,this.src="/null"' alt="èµ„æºå¯¼èˆª"></a><div class="content"><a class="title" href="/2023/06/13/013-%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/%E8%B5%84%E6%BA%90%E5%AF%BC%E8%88%AA/" title="èµ„æºå¯¼èˆª">èµ„æºå¯¼èˆª</a><time datetime="2023-06-13T16:00:00.000Z" title="å‘è¡¨äº 2023-06-14 00:00:00">2023-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/014-AI%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98/%E7%AE%97%E6%B3%95-0%E3%80%81%E6%B1%87%E6%80%BB/" title="ç®—æ³•-0ã€æ±‡æ€»"><img src="https://picsum.photos/1920/972" onerror='this.onerror=null,this.src="/null"' alt="ç®—æ³•-0ã€æ±‡æ€»"></a><div class="content"><a class="title" href="/2023/06/13/014-AI%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98/%E7%AE%97%E6%B3%95-0%E3%80%81%E6%B1%87%E6%80%BB/" title="ç®—æ³•-0ã€æ±‡æ€»">ç®—æ³•-0ã€æ±‡æ€»</a><time datetime="2023-06-13T16:00:00.000Z" title="å‘è¡¨äº 2023-06-14 00:00:00">2023-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/014-AI%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98/%E7%AE%97%E6%B3%95-1%E3%80%81%E9%A2%98%E7%9B%AE%E8%A7%A3%E6%9E%90/" title="ç®—æ³•-1ã€é¢˜ç›®è§£æ"><img src="https://picsum.photos/1920/1082" onerror='this.onerror=null,this.src="/null"' alt="ç®—æ³•-1ã€é¢˜ç›®è§£æ"></a><div class="content"><a class="title" href="/2023/06/13/014-AI%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98/%E7%AE%97%E6%B3%95-1%E3%80%81%E9%A2%98%E7%9B%AE%E8%A7%A3%E6%9E%90/" title="ç®—æ³•-1ã€é¢˜ç›®è§£æ">ç®—æ³•-1ã€é¢˜ç›®è§£æ</a><time datetime="2023-06-13T16:00:00.000Z" title="å‘è¡¨äº 2023-06-14 00:00:00">2023-06-14</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url('https://picsum.photos/1920/1080')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Taylor Luo</div><div class="framework-info"><span>æ¡†æ¶</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class="js-pjax"><script>(()=>{const o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo-taylorluo.vercel.app/",region:"ap-shanghai",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null)),GLOBAL_CONFIG_SITE.isPost&&(()=>{const o=document.getElementById("twikoo-count");o&&twikoo.getCommentsCount({envId:"https://twikoo-taylorluo.vercel.app/",region:"ap-shanghai",urls:[window.location.pathname],includeReply:!1}).then((function(t){o.innerText=t[0].count})).catch((function(o){console.error(o)}))})()},t=()=>{"object"!=typeof twikoo?getScript("https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js").then(o):setTimeout(o,0)};t()})()</script></div><script defer id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zindex="-1" mobile="false" data-click="true"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="æ‹¼æ,è‡ªå¼º,æ­£ç›´,è‡ªä¿¡" data-fontsize="15px" data-random="false" async></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>