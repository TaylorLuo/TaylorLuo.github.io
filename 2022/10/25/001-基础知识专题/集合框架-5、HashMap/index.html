<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>JavaåŸºç¡€-é›†åˆæ¡†æ¶-5ã€HashMap | Taylor</title><meta name="keywords" content="JavaåŸºç¡€,é›†åˆæ¡†æ¶"><meta name="author" content="Taylor Luo"><meta name="copyright" content="Taylor Luo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1. æ•°æ®ç»“æ„ï¼ˆå“ˆå¸Œè¡¨ï¼‰hashtableï¼ˆå“ˆå¸Œè¡¨ï¼‰ 1.1. æ˜¯ä»€ä¹ˆæ•£åˆ—è¡¨ï¼ˆHash tableï¼Œä¹Ÿå«å“ˆå¸Œè¡¨ï¼‰ï¼Œæ˜¯æ ¹æ®å…³é”®ç å€¼ (Key value) è€Œç›´æ¥è¿›è¡Œè®¿é—®çš„ æ•°æ®ç»“æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒé€šè¿‡æŠŠå…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ å¿«æŸ¥æ‰¾çš„é€Ÿåº¦ã€‚è¿™ä¸ªæ˜ å°„å‡½æ•°å«åš æ•£åˆ—å‡½æ•°ï¼Œå­˜æ”¾è®°å½•çš„ æ•°ç»„ å«åš æ•£åˆ—è¡¨ç»™å®šè¡¨ Mï¼Œå­˜åœ¨å‡½æ•° f(key)ï¼Œå¯¹ä»»æ„ç»™å®šçš„å…³é”®å­—å€¼ keyï¼Œä»£å…¥å‡½æ•°åè‹¥èƒ½å¾—åˆ°åŒ…"><meta property="og:type" content="article"><meta property="og:title" content="JavaåŸºç¡€-é›†åˆæ¡†æ¶-5ã€HashMap"><meta property="og:url" content="https://taylorluo.github.io/2022/10/25/001-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%93%E9%A2%98/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-5%E3%80%81HashMap/index.html"><meta property="og:site_name" content="Taylor"><meta property="og:description" content="1. æ•°æ®ç»“æ„ï¼ˆå“ˆå¸Œè¡¨ï¼‰hashtableï¼ˆå“ˆå¸Œè¡¨ï¼‰ 1.1. æ˜¯ä»€ä¹ˆæ•£åˆ—è¡¨ï¼ˆHash tableï¼Œä¹Ÿå«å“ˆå¸Œè¡¨ï¼‰ï¼Œæ˜¯æ ¹æ®å…³é”®ç å€¼ (Key value) è€Œç›´æ¥è¿›è¡Œè®¿é—®çš„ æ•°æ®ç»“æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒé€šè¿‡æŠŠå…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ å¿«æŸ¥æ‰¾çš„é€Ÿåº¦ã€‚è¿™ä¸ªæ˜ å°„å‡½æ•°å«åš æ•£åˆ—å‡½æ•°ï¼Œå­˜æ”¾è®°å½•çš„ æ•°ç»„ å«åš æ•£åˆ—è¡¨ç»™å®šè¡¨ Mï¼Œå­˜åœ¨å‡½æ•° f(key)ï¼Œå¯¹ä»»æ„ç»™å®šçš„å…³é”®å­—å€¼ keyï¼Œä»£å…¥å‡½æ•°åè‹¥èƒ½å¾—åˆ°åŒ…"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://unpkg.com/justlovesmile-img/cover6.JPG"><meta property="article:published_time" content="2022-10-25T16:00:00.000Z"><meta property="article:modified_time" content="2023-06-13T23:32:42.670Z"><meta property="article:author" content="Taylor Luo"><meta property="article:tag" content="JavaåŸºç¡€"><meta property="article:tag" content="é›†åˆæ¡†æ¶"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://unpkg.com/justlovesmile-img/cover6.JPG"><link rel="shortcut icon" href="https://gcore.jsdelivr.net/gh/code-anan/image/èœ˜è››ç½‘ä¸‡åœ£èŠ‚.png"><link rel="canonical" href="https://taylorluo.github.io/2022/10/25/001-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%93%E9%A2%98/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-5%E3%80%81HashMap/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"ç¹",msgToSimplifiedChinese:"ç®€"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶é”™è¯¯",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"JavaåŸºç¡€-é›†åˆæ¡†æ¶-5ã€HashMap",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-06-14 07:32:42"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)})),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/self/Kimbiedark.css"><meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="Taylor" type="application/atom+xml"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">åŠ è½½ä¸­...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/index.jpeg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">183</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">85</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">31</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url('https://unpkg.com/justlovesmile-img/cover6.JPG')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Taylor</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JavaåŸºç¡€-é›†åˆæ¡†æ¶-5ã€HashMap</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2022-10-25T16:00:00.000Z" title="å‘è¡¨äº 2022-10-26 00:00:00">2022-10-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-06-13T23:32:42.670Z" title="æ›´æ–°äº 2023-06-14 07:32:42">2023-06-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/">é›†åˆæ¡†æ¶</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">7.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>26åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span data-flag-title="JavaåŸºç¡€-é›†åˆæ¡†æ¶-5ã€HashMap"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">è¯„è®ºæ•°:</span><a href="/2022/10/25/001-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%93%E9%A2%98/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-5%E3%80%81HashMap/#post-comment"><span id="twikoo-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-æ•°æ®ç»“æ„ï¼ˆå“ˆå¸Œè¡¨ï¼‰"><a href="#1-æ•°æ®ç»“æ„ï¼ˆå“ˆå¸Œè¡¨ï¼‰" class="headerlink" title="1. æ•°æ®ç»“æ„ï¼ˆå“ˆå¸Œè¡¨ï¼‰"></a>1. æ•°æ®ç»“æ„ï¼ˆå“ˆå¸Œè¡¨ï¼‰</h1><p>hashtableï¼ˆå“ˆå¸Œè¡¨ï¼‰</p><h2 id="1-1-æ˜¯ä»€ä¹ˆ"><a href="#1-1-æ˜¯ä»€ä¹ˆ" class="headerlink" title="1.1. æ˜¯ä»€ä¹ˆ"></a>1.1. æ˜¯ä»€ä¹ˆ</h2><p><a href="https://link.zhihu.com/?target=https://baike.baidu.com/item/%25E6%2595%25A3%25E5%2588%2597%25E8%25A1%25A8/10027933">æ•£åˆ—è¡¨</a>ï¼ˆHash tableï¼Œä¹Ÿå«å“ˆå¸Œè¡¨ï¼‰ï¼Œæ˜¯æ ¹æ®å…³é”®ç å€¼ (Key value) è€Œç›´æ¥è¿›è¡Œè®¿é—®çš„ <a href="https://link.zhihu.com/?target=https://baike.baidu.com/item/%25E6%2595%25B0%25E6%258D%25AE%25E7%25BB%2593%25E6%259E%2584/1450">æ•°æ®ç»“æ„</a>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒé€šè¿‡æŠŠå…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ å¿«æŸ¥æ‰¾çš„é€Ÿåº¦ã€‚è¿™ä¸ªæ˜ å°„å‡½æ•°å«åš <a href="https://link.zhihu.com/?target=https://baike.baidu.com/item/%25E6%2595%25A3%25E5%2588%2597%25E5%2587%25BD%25E6%2595%25B0/2366288">æ•£åˆ—å‡½æ•°</a>ï¼Œå­˜æ”¾è®°å½•çš„ <a href="https://link.zhihu.com/?target=https://baike.baidu.com/item/%25E6%2595%25B0%25E7%25BB%2584/3794097">æ•°ç»„</a> å«åš <a href="https://link.zhihu.com/?target=https://baike.baidu.com/item/%25E6%2595%25A3%25E5%2588%2597%25E8%25A1%25A8/10027933">æ•£åˆ—è¡¨</a><br>ç»™å®šè¡¨ Mï¼Œå­˜åœ¨å‡½æ•° f(key)ï¼Œå¯¹ä»»æ„ç»™å®šçš„å…³é”®å­—å€¼ keyï¼Œä»£å…¥å‡½æ•°åè‹¥èƒ½å¾—åˆ°åŒ…å«è¯¥å…³é”®å­—çš„è®°å½•åœ¨è¡¨ä¸­çš„åœ°å€ï¼Œåˆ™ç§°è¡¨ M ä¸ºå“ˆå¸Œ (Hashï¼‰è¡¨ï¼Œå‡½æ•° f(key) ä¸ºå“ˆå¸Œ (Hash) å‡½æ•°ã€‚</p><h2 id="1-2-ç‰¹ç‚¹"><a href="#1-2-ç‰¹ç‚¹" class="headerlink" title="1.2. ç‰¹ç‚¹"></a>1.2. ç‰¹ç‚¹</h2><p>hash è¡¨ ä¹Ÿå«æ•£åˆ—è¡¨ï¼›ç‰¹ç‚¹ï¼šå¿« å¾ˆå¿« ç¥å¥‡çš„å¿«</p><p>ç»“æ„ï¼šç»“æ„æœ‰å¤šç§ã€‚æœ€æµè¡Œã€æœ€å®¹æ˜“ç†è§£ï¼šé¡ºåºè¡¨ + é“¾è¡¨</p><p>ä¸»ç»“æ„ï¼šé¡ºåºè¡¨ï¼Œæ¯ä¸ªé¡ºåºè¡¨çš„èŠ‚ç‚¹åœ¨å•ç‹¬å¼•å‡ºä¸€ä¸ªé“¾è¡¨</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221027082258.png"></p><p>åœ¨æ— åºæ•°ç»„ä¸­æŒ‰ç…§å†…å®¹æŸ¥æ‰¾ï¼Œæ•ˆç‡ä½ä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)<br><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221027082042.png"></p><p>åœ¨æœ‰åºæ•°ç»„ä¸­æŒ‰ç…§å†…å®¹æŸ¥æ‰¾ï¼Œå¯ä»¥ä½¿ç”¨æŠ˜åŠæŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ O(log2n)<br><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221027082130.png"></p><p><strong>é—®é¢˜</strong>ï¼šæŒ‰ç…§å†…å®¹æŸ¥æ‰¾ï¼Œèƒ½å¦ä¹Ÿä¸è¿›è¡Œæ¯”è¾ƒï¼Œè€Œæ˜¯é€šè¿‡è®¡ç®—å¾—åˆ°åœ°å€ï¼Œå®ç°ç±»ä¼¼æ•°ç»„æŒ‰ç…§ç´¢å¼•æŸ¥è¯¢çš„é«˜æ•ˆç‡ O(1) å‘¢</p><p>æœ‰ï¼ï¼ï¼å“ˆå¸Œè¡¨æ¥å®ç°</p><h2 id="1-3-å“ˆå¸Œå‡½æ•°"><a href="#1-3-å“ˆå¸Œå‡½æ•°" class="headerlink" title="1.3. å“ˆå¸Œå‡½æ•°"></a>1.3. å“ˆå¸Œå‡½æ•°</h2><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221027115551.png"></p><h2 id="1-4-native-hashcode-æ–¹æ³•"><a href="#1-4-native-hashcode-æ–¹æ³•" class="headerlink" title="1.4. native hashcode æ–¹æ³•"></a>1.4. native hashcode æ–¹æ³•</h2><p>[[20221029-Java Object.hashCode()è¿”å›çš„æ˜¯å¯¹è±¡å†…å­˜åœ°å€ï¼Ÿ - ç®€ä¹¦]]<br><span style="background-color:#f0f">OpenJDK8 é»˜è®¤ hashCode çš„è®¡ç®—æ–¹æ³•æ˜¯é€šè¿‡å’Œå½“å‰çº¿ç¨‹æœ‰å…³çš„ä¸€ä¸ªéšæœºæ•° + ä¸‰ä¸ªç¡®å®šå€¼ï¼Œè¿ç”¨ Marsagliaâ€™s xorshift scheme éšæœºæ•°ç®—æ³•å¾—åˆ°çš„ä¸€ä¸ªéšæœºæ•°ã€‚å’Œå¯¹è±¡å†…å­˜åœ°å€æ— å…³ã€‚</span></p><h2 id="1-5-å“ˆå¸Œç¢°æ’-å“ˆå¸Œå†²çª-è§£å†³æ–¹æ¡ˆ"><a href="#1-5-å“ˆå¸Œç¢°æ’-å“ˆå¸Œå†²çª-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="1.5. å“ˆå¸Œç¢°æ’ (å“ˆå¸Œå†²çª) è§£å†³æ–¹æ¡ˆ"></a>1.5. å“ˆå¸Œç¢°æ’ (å“ˆå¸Œå†²çª) è§£å†³æ–¹æ¡ˆ</h2><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221027115612.png"></p><h2 id="1-6-è£…å¡«å› å­"><a href="#1-6-è£…å¡«å› å­" class="headerlink" title="1.6. è£…å¡«å› å­"></a>1.6. è£…å¡«å› å­</h2><p>è£…å¡«å› å­Â aÂ &#x3D;Â æ€»é”®å€¼å¯¹æ•° &#x2F;Â Â å“ˆå¸Œè¡¨æ€»é•¿åº¦</p><h1 id="2-ç‰ˆæœ¬å˜åŒ–"><a href="#2-ç‰ˆæœ¬å˜åŒ–" class="headerlink" title="2. ç‰ˆæœ¬å˜åŒ–"></a>2. ç‰ˆæœ¬å˜åŒ–</h1><p>jdk7 å’Œ jdk8 çš„åŒºåˆ«</p><ol><li><p>åˆå§‹ table å®¹é‡<br>jdk7: åˆ›å»º HashMap å¯¹è±¡æ—¶ï¼Œåˆ™åˆå§‹ table å®¹é‡ä¸º 16<br>jdk8: åˆ›å»º HashMap å¯¹è±¡æ—¶ï¼Œæ²¡æœ‰åˆå§‹ tableï¼Œä»…ä»…åªæ˜¯åˆå§‹åŠ è½½å› å­ã€‚åªæœ‰å½“ç¬¬ä¸€æ¬¡æ·»åŠ æ—¶æ‰ä¼šåˆå§‹ table å®¹é‡ä¸º 16.</p></li><li><p>å­˜å‚¨ç±»å‹<br>jdk7: table çš„ç±»å‹ä¸º Entry<br>jdk8: table çš„ç±»å‹ä¸º Node</p></li><li><p>å­˜å‚¨ç»“æ„<br>jdk7: å“ˆå¸Œè¡¨ä¸º<code>æ•°ç»„ + é“¾è¡¨</code>ï¼Œä¸ç®¡é“¾è¡¨çš„æ€»ç»“ç‚¹æ•°æ˜¯å¤šå°‘éƒ½ä¸ä¼šå˜æˆæ ‘ç»“æ„<br>jdk8ï¼šå“ˆå¸Œè¡¨ä¸º<code>æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘</code>ï¼Œå½“<span style="background-color:red">é“¾è¡¨çš„èŠ‚ç‚¹æ•°&gt;&#x3D;8 &amp;&amp; æ¡¶çš„æ€»ä¸ªæ•°ï¼ˆtable çš„å®¹é‡ã€æ•°ç»„çš„é•¿åº¦ï¼‰&gt;&#x3D;64</span> æ—¶ï¼Œä¼šå°†é“¾è¡¨ç»“æ„å˜æˆçº¢é»‘æ ‘ç»“æ„</p></li></ol><h2 id="2-1-JDK7-å¤´æ’æ³•"><a href="#2-1-JDK7-å¤´æ’æ³•" class="headerlink" title="2.1. JDK7 å¤´æ’æ³•"></a>2.1. JDK7 å¤´æ’æ³•</h2><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221028210712.png"></p><h1 id="3-éå†æ–¹å¼"><a href="#3-éå†æ–¹å¼" class="headerlink" title="3. éå†æ–¹å¼"></a>3. éå†æ–¹å¼</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestHashMap</span> &#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    Map&lt;String, Integer&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br><br>    <span class="hljs-comment">//å‘é›†åˆä¸­æ·»åŠ å…ƒç´   key  value è¿›è¡Œæ·»åŠ   æ·»åŠ æ–¹æ³• put</span><br>    map.put(<span class="hljs-string">&quot;aa&quot;</span>, <span class="hljs-number">11</span>);<br>    map.put(<span class="hljs-string">&quot;bb&quot;</span>, <span class="hljs-number">22</span>);<br>    map.put(<span class="hljs-string">&quot;cc&quot;</span>, <span class="hljs-number">33</span>);<br>    map.put(<span class="hljs-string">&quot;cc&quot;</span>, <span class="hljs-number">33</span>);<br>    map.put(<span class="hljs-literal">null</span>, <span class="hljs-number">44</span>);<br><br>    <span class="hljs-comment">//è·å–å­˜å‚¨é”®å€¼ä¸ªæ•°</span><br>    System.out.println(map.size());<br><br>    <span class="hljs-comment">//æ˜¯å¦åŒ…å«æŒ‡å®šçš„key</span><br>    System.out.println(map.containsKey(<span class="hljs-string">&quot;cc&quot;</span>));<br>    System.out.println(map.containsKey(<span class="hljs-string">&quot;dd&quot;</span>));<br><br>    <span class="hljs-comment">//æ ¹æ®keyè·å–value</span><br>    System.out.println(map.get(<span class="hljs-string">&quot;cc&quot;</span>));<br><br>    <span class="hljs-comment">//æ ¹æ®key  åˆ é™¤é”®å€¼å¯¹  è¿”å›è¢«åˆ é™¤çš„å€¼</span><br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">cc</span> <span class="hljs-operator">=</span> map.remove(<span class="hljs-string">&quot;cc&quot;</span>);<br>    System.out.println(cc);<br><br>    <span class="hljs-comment">//éå†</span><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">         * é”®éå†</span><br><span class="hljs-comment">         * å€¼éå†</span><br><span class="hljs-comment">         * é”®å€¼éå†</span><br><span class="hljs-comment">         * */</span><br>    <span class="hljs-comment">//é”®éå†  è·å–æ‰€æœ‰çš„é”®</span><br>    Set&lt;String&gt; strings = map.keySet();<br>    <span class="hljs-keyword">for</span> (String key : strings) &#123;<br>      System.out.println(<span class="hljs-string">&quot;key-&gt; &quot;</span> + key + <span class="hljs-string">&quot; value-&gt; &quot;</span> + map.get(key));<br>    &#125;<br><br>    <span class="hljs-comment">//å€¼éå†</span><br>    Collection&lt;Integer&gt; values = map.values();<br>    <span class="hljs-keyword">for</span> (Integer value : values) &#123;<br>      System.out.println(value);<br>    &#125;<br><br>    <span class="hljs-comment">//é”®å€¼éå†</span><br>    Set&lt;Map.Entry&lt;String, Integer&gt;&gt; entries = map.entrySet();<br>    <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : entries) &#123;<br>      System.out.println(entry.getKey() + <span class="hljs-string">&quot;- &quot;</span> + entry.getValue());<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="4-å®ç°é€»è¾‘"><a href="#4-å®ç°é€»è¾‘" class="headerlink" title="4. å®ç°é€»è¾‘"></a>4. å®ç°é€»è¾‘</h1><h2 id="4-1-put-æ”¾å…¥æ•°æ®â­ï¸ğŸ”´"><a href="#4-1-put-æ”¾å…¥æ•°æ®â­ï¸ğŸ”´" class="headerlink" title="4.1. put æ”¾å…¥æ•°æ®â­ï¸ğŸ”´"></a>4.1. put æ”¾å…¥æ•°æ®â­ï¸ğŸ”´</h2><p>æµç¨‹å›¾è¯·çœ‹ <a target="_blank" rel="noopener" href="https://www.processon.com/view/635b8a0d637689731714be29?fromnew=1">https://www.processon.com/view/635b8a0d637689731714be29?fromnew=1</a></p><p>å½“ç¬¬ä¸€æ¬¡æ·»åŠ æ—¶ï¼Œå°†åˆå§‹ table å®¹é‡ä¸º 16ï¼Œä¸´ç•Œå€¼ä¸º 12<br>æ¯æ¬¡æ·»åŠ è°ƒç”¨ putVal æ–¹æ³•ï¼š</p><p><span style="background-color:#f0f">â‘ å…ˆè·å– key çš„äºŒæ¬¡å“ˆå¸Œå€¼ä¸ (æ•°ç»„é•¿åº¦ n)-1 è¿›è¡Œå–ä¸è¿ç®—ï¼Œå¾—å‡ºå­˜æ”¾çš„ä½ç½®</span></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230410172411.jpg" alt="image-20200203161818324"></p><p><span style="background-color:#f0f">â‘¡åˆ¤æ–­è¯¥å­˜æ”¾ä½ç½®ä¸Šæ˜¯å¦æœ‰å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰ç›´æ¥å­˜æ”¾</span></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230410172420.jpg" alt="image-20200203162435730"></p><p><span style="background-color:#f0f">å¦‚æœè¯¥å­˜æ”¾ä½ç½®ä¸Šå·²æœ‰å…ƒç´ ï¼Œåˆ™è¿›è¡Œç»§ç»­åˆ¤æ–­ï¼š</span></p><p><span style="background-color:#f0f">â€‹ å¦‚æœå’Œå½“å‰å…ƒç´ ç›´æ¥ç›¸ç­‰ï¼Œåˆ™è¦†ç›–</span><br><span style="background-color:#f0f">â€‹ å¦‚æœä¸ç›¸ç­‰ï¼Œåˆ™ç»§ç»­åˆ¤æ–­æ˜¯å¦æ˜¯é“¾è¡¨ç»“æ„è¿˜æ˜¯æ ‘çŠ¶ç»“æ„ï¼ŒæŒ‰ç…§å¯¹åº”ç»“æ„çš„åˆ¤æ–­æ–¹å¼åˆ¤æ–­ç›¸ç­‰</span></p><p><span style="background-color:red">â‘¢å°† size æ›´æ–°ï¼Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡äº†ä¸´ç•Œå€¼ï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œåˆ™éœ€è¦é‡æ–° resize() è¿›è¡Œ <strong>2 å€</strong> æ‰©å®¹ï¼Œå¹¶æ‰“ä¹±åŸæ¥çš„é¡ºåºï¼Œé‡æ–°æ’åˆ—</span></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230410172429.jpg" alt="image-20200203164225255"></p><p>é‡æ–°æ’åˆ—ï¼Œä¸ºäº†å‡å°‘ç¢°æ’</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230410172437.jpg" alt="image-20200203164516991"></p><p><span style="background-color:#f0f">â‘£å½“ä¸€ä¸ªæ¡¶ä¸­çš„é“¾è¡¨çš„èŠ‚ç‚¹æ•°&gt;&#x3D;8 &amp;&amp; æ¡¶çš„æ€»ä¸ªæ•°ï¼ˆtable çš„å®¹é‡ï¼‰&gt;&#x3D;64 æ—¶ï¼Œä¼šå°†é“¾è¡¨ç»“æ„å˜æˆçº¢é»‘æ ‘ç»“æ„</span></p><h3 id="4-1-1-äºŒæ¬¡å“ˆå¸Œ"><a href="#4-1-1-äºŒæ¬¡å“ˆå¸Œ" class="headerlink" title="4.1.1. äºŒæ¬¡å“ˆå¸Œ"></a>4.1.1. äºŒæ¬¡å“ˆå¸Œ</h3><p><span style="background-color:red">äºŒæ¬¡å“ˆå¸ŒæŒ‡çš„æ˜¯å°†å“ˆå¸Œç çš„é«˜ 16 ä½ä¸ä½ 16 ä½è¿›è¡Œå¼‚æˆ–è¿ç®—å¾—åˆ°çš„åŠ å·¥è¿‡çš„å“ˆå¸Œç </span></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230410222407.png" alt="image.png"></p><h3 id="4-1-2-åŒºåˆ«"><a href="#4-1-2-åŒºåˆ«" class="headerlink" title="4.1.2. åŒºåˆ«"></a>4.1.2. åŒºåˆ«</h3><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221107102931.png"></p><h2 id="4-2-hashCode-equals"><a href="#4-2-hashCode-equals" class="headerlink" title="4.2. hashCode() equals()"></a>4.2. hashCode() equals()</h2><h2 id="4-3-åŠ è½½å› å­"><a href="#4-3-åŠ è½½å› å­" class="headerlink" title="4.3. åŠ è½½å› å­"></a>4.3. åŠ è½½å› å­</h2><p>[[..&#x2F;..&#x2F;..&#x2F;..&#x2F;cubox&#x2F;006-ChromeCapture&#x2F;20221027-é¢è¯•å®˜ï¼šä¸ºä»€ä¹ˆ HashMap çš„åŠ è½½å› å­æ˜¯0.75ï¼Ÿ-æŠ€æœ¯åœˆ]]</p><p>åŠ è½½å› å­ä¸º 0.75ï¼Œé“¾è¡¨é•¿åº¦è¶…è¿‡ 8 æ—¶ï¼Œè½¬ä¸ºçº¢é»‘æ ‘ï¼ŒåŸå› ï¼Ÿ</p><p>å‡å€¼å– 0.5 æ—¶ï¼Œæ ¹æ®æ³Šæ¾åˆ†å¸ƒå…¬å¼ <img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230410172509.jpg" alt="image-20200319233948518">ï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">* threshold of 0.75, although with a large variance because of<br>     * resizing granularity. Ignoring variance, the expected<br>     * occurrences of list size k are (exp(-0.5) * pow(0.5, k) /<br>     * factorial(k)). The first values are:<br>     *<br>     * 0:    0.60653066<br>     * 1:    0.30326533<br>     * 2:    0.07581633<br>     * 3:    0.01263606<br>     * 4:    0.00157952<br>     * 5:    0.00015795<br>     * 6:    0.00001316<br>     * 7:    0.00000094<br>     * 8:    0.00000006<br>     * more: less than 1 in ten million<br></code></pre></td></tr></table></figure><p>åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œä½¿ç”¨éšæœºå“ˆå¸Œç ï¼Œåœ¨æ‰©å®¹é˜ˆå€¼ï¼ˆåŠ è½½å› å­ï¼‰ä¸º 0.75 çš„æƒ…å†µä¸‹ï¼ŒèŠ‚ç‚¹å‡ºç°åœ¨é¢‘ç‡åœ¨ Hash æ¡¶ï¼ˆè¡¨ï¼‰ä¸­éµå¾ªå‚æ•°å¹³å‡ä¸º 0.5 çš„æ³Šæ¾åˆ†å¸ƒã€‚å¿½ç•¥æ–¹å·®ï¼Œå³ X &#x3D; Î»tï¼ŒP(Î»t &#x3D; k)ï¼Œå…¶ä¸­Î»t &#x3D; 0.5 çš„æƒ…å†µï¼ŒæŒ‰å…¬å¼ï¼š</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221027185306.png"></p><p>è®¡ç®—ç»“æœå¦‚ä¸Šè¿°çš„åˆ—è¡¨æ‰€ç¤ºï¼Œå½“ä¸€ä¸ª bin ä¸­çš„é“¾è¡¨é•¿åº¦è¾¾åˆ° 8 ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œæ¦‚ç‡ä¸º 0.00000006ï¼Œå‡ ä¹æ˜¯ä¸€ä¸ªä¸å¯èƒ½äº‹ä»¶ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå…¶å®å¸¸æ•° 0.5 æ˜¯ä½œä¸ºå‚æ•°ä»£å…¥æ³Šæ¾åˆ†å¸ƒæ¥è®¡ç®—çš„ï¼Œè€ŒåŠ è½½å› å­ 0.75 æ˜¯ä½œä¸ºä¸€ä¸ªæ¡ä»¶ï¼Œå½“ HashMap é•¿åº¦ä¸º length&#x2F;size â‰¥ 0.75 æ—¶å°±æ‰©å®¹ï¼Œåœ¨è¿™ä¸ªæ¡ä»¶ä¸‹ï¼Œå†²çªåçš„æ‹‰é“¾é•¿åº¦å’Œæ¦‚ç‡ç»“æœä¸ºï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs text">0:Â Â Â Â 0.60653066  <br>1:Â Â Â Â 0.30326533  <br>2:Â Â Â Â 0.07581633  <br>3:Â Â Â Â 0.01263606  <br>4:Â Â Â Â 0.00157952  <br>5:Â Â Â Â 0.00015795  <br>6:Â Â Â Â 0.00001316  <br>7:Â Â Â Â 0.00000094  <br>8:Â Â Â Â 0.00000006<br></code></pre></td></tr></table></figure><h3 id="4-3-1-0-5-çš„æ¥å†"><a href="#4-3-1-0-5-çš„æ¥å†" class="headerlink" title="4.3.1. 0.5 çš„æ¥å†"></a>4.3.1. 0.5 çš„æ¥å†</h3><ol><li><em>Î»</em>Â ä»£è¡¨çš„å°±æ˜¯å•ä½æ—¶é—´æˆ–å•ä½é¢ç§¯ç‰¹å®šäº‹ä»¶å‡ºç°çš„å¹³å‡æ¬¡æ•°ï¼Œå…³äºä¸€ä¸ª key æ˜¯å¦å‘ç”Ÿç¢°æ’çš„æ¦‚ç‡ä¸º 0.5ã€‚</li><li>ç½‘ç»œæ¨æ–­</li></ol><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221028085649.png"></p><p>å¦‚æœè§‚å¯Ÿçš„äº‹ä»¶åœ¨å•ä½æ—¶é—´æˆ–å•ä½é¢ç§¯å‡ºç°çš„å¹³å‡æ¬¡æ•°ä¿æŒä¸å˜ï¼Œå¹¶ä¸”ä¸åŒæ—¶æ®µæˆ–ç©ºé—´åŒºåŸŸå†…äº‹ä»¶çš„å‘ç”Ÿæ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œé‚£ä¹ˆå•ä½æ—¶é—´æˆ–å•ä½é¢ç§¯è¯¥äº‹ä»¶å‡ºç°çš„å®é™…æ¬¡æ•°Â <em>X</em>Â æœä»Â æ³Šæ¾åˆ†å¸ƒï¼ˆPoisson distributionï¼‰Â ï¼Œè®°ä½œÂ <em>Xï½P</em>Â ï¼ˆÂ <em>Î»</em>Â ï¼‰ã€‚</p><p>å…·ä½“åœ°ï¼ŒÂ <em>X&#x3D;k</em>Â çš„æ¦‚ç‡å¯è¡¨ç¤ºä¸ºï¼š</p><p><a target="_blank" rel="noopener" href="http://www.tjxzj.net/wp-content/uploads/2022/06/2022063008384625.jpg" title="æ³Šæ¾åˆ†å¸ƒçš„è®¡ç®—ä¾‹é¢˜"><img src="http://www.tjxzj.net/wp-content/uploads/2022/06/2022063008384625.jpg" alt="æ³Šæ¾åˆ†å¸ƒçš„è®¡ç®—ä¾‹é¢˜-ç»Ÿè®¡å­¦ä¹‹å®¶"></a></p><p>å…¶ä¸­ï¼ŒÂ <em>Î»</em>Â &gt;0ã€‚</p><p>å¯ä»¥è¿›ä¸€æ­¥æ¨å¯¼å¾—åˆ°æ³Šæ¾åˆ†å¸ƒçš„å‡å€¼å’Œæ–¹å·®å‡ä¸ºÂ <em>Î»</em>Â ï¼Œå³ï¼š</p><p><a target="_blank" rel="noopener" href="http://www.tjxzj.net/wp-content/uploads/2022/06/2022063008385573.jpg" title="æ³Šæ¾åˆ†å¸ƒçš„è®¡ç®—ä¾‹é¢˜"><img src="http://www.tjxzj.net/wp-content/uploads/2022/06/2022063008385573.jpg" alt="æ³Šæ¾åˆ†å¸ƒçš„è®¡ç®—ä¾‹é¢˜-ç»Ÿè®¡å­¦ä¹‹å®¶"></a></p><p>å› æ­¤ï¼ŒÂ <em>Î»</em>Â ä»£è¡¨çš„å°±æ˜¯å•ä½æ—¶é—´æˆ–å•ä½é¢ç§¯ç‰¹å®šäº‹ä»¶å‡ºç°çš„å¹³å‡æ¬¡æ•°ã€‚</p><p>äºŒé¡¹åˆ†å¸ƒçš„æé™æ˜¯æŸæ¾åˆ†å¸ƒï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®äºŒé¡¹åˆ†å¸ƒçš„æœŸæœ› Î»&#x3D;np æ±‚å‡º Î»ï¼ˆn æ˜¯å®éªŒçš„æ¬¡æ•°ï¼Œp æ˜¯å•æ¬¡çš„æ¦‚ç‡ï¼‰ã€‚å¦‚æœ n æ¯”è¾ƒå¤§ï¼Œp æ¯”è¾ƒå°ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰è¯´æ»¡è¶³æ³Šæ¾åˆ†å¸ƒçš„æ¡ä»¶ã€‚</p><h3 id="4-3-2-ä¸-8-çš„å…³ç³»"><a href="#4-3-2-ä¸-8-çš„å…³ç³»" class="headerlink" title="4.3.2. ä¸ 8 çš„å…³ç³»"></a>4.3.2. ä¸ 8 çš„å…³ç³»</h3><p>æ—¶é—´å’Œç©ºé—´æˆæœ¬çš„æƒè¡¡ &#x3D;&#x3D;&gt; å†³å®šäº†æ‰©å®¹å› å­æ˜¯ 0.75 &#x3D;&#x3D;&gt; å†³å®šäº†æ³Šæ¾åˆ†å¸ƒçš„å‚æ•°Î»æ˜¯ 0.5 &#x3D;&#x3D;&gt; è®¡ç®—å‡ºæ³Šæ¾åˆ†å¸ƒç»“æœä¸º 8 æ—¶ï¼Œæ¦‚ç‡ä¸ºäº¿åˆ†ä¹‹å…­ &#x3D;&#x3D;&gt; å†³å®šäº†æ ‘åŒ–èŠ‚ç‚¹ä¸º 8.<br>[[..&#x2F;..&#x2F;..&#x2F;..&#x2F;cubox&#x2F;006-ChromeCapture&#x2F;20221028-ä»æ³Šæ¾åˆ†å¸ƒè°ˆèµ·HashMapä¸ºä»€ä¹ˆé»˜è®¤æ‰©å®¹å› å­æ˜¯0.75 - çŸ¥ä¹]]</p><h2 id="4-4-æ ‘åŒ–"><a href="#4-4-æ ‘åŒ–" class="headerlink" title="4.4. æ ‘åŒ–"></a>4.4. æ ‘åŒ–</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// TREEIFY_THRESHOLDä¸º8ï¼Œå¦‚æœtab.length&gt;=64ä¹Ÿæ»¡è¶³ï¼Œæ ‘åŒ–æ—¶ä¸€ä¸ªæ¡¶çš„èŠ‚ç‚¹æ•°ä¸º9</span><br><span class="hljs-comment">// å› ä¸ºbinCount=0æ—¶å·²ç»æœ‰1ä¸ªå¤´èŠ‚ç‚¹ï¼ŒåˆåŠ äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ˜¯2ä¸ªï¼Œ</span><br><span class="hljs-comment">// å¾ªç¯åˆ°binCount=7æ—¶7&gt;=8-1æˆç«‹ï¼Œæ‰€ä»¥æ­¤æ—¶ç”Ÿæˆçš„æ ‘æœ‰7+2ä¸ªèŠ‚ç‚¹</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">binCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; ; ++binCount) &#123;  <br>    <span class="hljs-keyword">if</span> ((e = p.next) == <span class="hljs-literal">null</span>) &#123;  <br>        p.next = newNode(hash, key, value, <span class="hljs-literal">null</span>);  <br>        <span class="hljs-keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="hljs-number">1</span>) <span class="hljs-comment">// -1 for 1st  </span><br>            treeifyBin(tab, hash);  <br>        <span class="hljs-keyword">break</span>;  <br>    &#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> V <span class="hljs-title function_">putVal</span><span class="hljs-params">(<span class="hljs-type">int</span> hash, K key, V value, <span class="hljs-type">boolean</span> onlyIfAbsent,</span><br><span class="hljs-params"><span class="hljs-type">boolean</span> evict)</span> &#123;<br>    <span class="hljs-comment">//ç”³æ˜tab å’Œ p ç”¨äºæ“ä½œåŸæ•°ç»„å’Œç»“ç‚¹</span><br>    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p;<br>    <span class="hljs-type">int</span> n, i;<br>    <span class="hljs-comment">//å¦‚æœåŸæ•°ç»„æ˜¯ç©ºæˆ–è€…åŸæ•°ç»„çš„é•¿åº¦ç­‰äº0ï¼Œé‚£ä¹ˆé€šè¿‡resize()æ–¹æ³•è¿›è¡Œåˆ›å»ºåˆå§‹åŒ–</span><br>    <span class="hljs-keyword">if</span> ((tab = table) == <span class="hljs-literal">null</span> || (n = tab.length) == <span class="hljs-number">0</span>)<br>        <span class="hljs-comment">//è·å–åˆ°åˆ›å»ºåæ•°ç»„çš„é•¿åº¦n</span><br>        n = (tab = resize()).length;<br><br>    <span class="hljs-comment">//é€šè¿‡keyçš„hashå€¼å’Œ æ•°ç»„é•¿åº¦-1 è®¡ç®—å‡ºå­˜å‚¨å…ƒç´ ç»“ç‚¹çš„æ•°ç»„ä¸­ä½ç½®ï¼ˆå’Œ1.7ä¸€æ ·ï¼‰</span><br>    <span class="hljs-comment">//å¹¶ä¸”ï¼Œå¦‚æœè¯¥ä½ç½®ä¸ºç©ºæ—¶ï¼Œåˆ™ç›´æ¥åˆ›å»ºå…ƒç´ ç»“ç‚¹èµ‹å€¼ç»™è¯¥ä½ç½®ï¼Œåç»§å…ƒç´ ç»“ç‚¹ä¸ºnull</span><br>    <span class="hljs-keyword">if</span> ((p = tab[i = (n - <span class="hljs-number">1</span>) &amp; hash]) == <span class="hljs-literal">null</span>)<br>        tab[i] = newNode(hash, key, value, <span class="hljs-literal">null</span>);<br>    <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">//å¦åˆ™ï¼Œè¯´æ˜è¯¥ä½ç½®å­˜åœ¨å…ƒç´ </span><br>        Node&lt;K,V&gt; e; K k;<br>        <span class="hljs-comment">//åˆ¤æ–­table[i]çš„å…ƒç´ çš„keyæ˜¯å¦ä¸æ·»åŠ çš„keyç›¸åŒï¼Œè‹¥ç›¸åŒåˆ™ç›´æ¥ç”¨æ–°valueè¦†ç›–æ—§value</span><br>        <span class="hljs-keyword">if</span> (p.hash == hash &amp;&amp;<br>                ((k = p.key) == key || (key != <span class="hljs-literal">null</span> &amp;&amp; key.equals(k))))<br>            e = p;<br>            <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦æ˜¯çº¢é»‘æ ‘çš„ç»“ç‚¹ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå°±ç›´æ¥åœ¨æ ‘ä¸­æ·»åŠ æˆ–è€…æ›´æ–°é”®å€¼å¯¹</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (p <span class="hljs-keyword">instanceof</span> TreeNode)<br>            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="hljs-built_in">this</span>, tab, hash, key, value);<br>            <span class="hljs-comment">//å¦åˆ™ï¼Œå°±æ˜¯é“¾è¡¨ï¼Œåˆ™åœ¨é“¾è¡¨ä¸­æ·»åŠ æˆ–æ›¿æ¢</span><br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">//éå†table[i]ï¼Œå¹¶åˆ¤æ–­æ·»åŠ çš„keyæ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå’Œä¹‹å‰åˆ¤æ–­ä¸€æ ·ï¼Œhashå’Œequals</span><br>            <span class="hljs-comment">//éå†å®Œæ¯•åä»æ— å‘ç°ä¸Šè¿°æƒ…å†µï¼Œåˆ™ç›´æ¥åœ¨é“¾è¡¨å°¾éƒ¨æ’å…¥æ•°æ®</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">binCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; ; ++binCount) &#123;<br>                <span class="hljs-comment">//å¦‚æœéå†çš„ä¸‹ä¸€ä¸ªç»“ç‚¹ä¸ºç©ºï¼Œé‚£ä¹ˆç›´æ¥æ’å…¥</span><br>                <span class="hljs-comment">//è¯¥æ–¹æ³•æ˜¯å°¾æ’æ³•ï¼ˆä¸1.7ä¸åŒï¼‰</span><br>                <span class="hljs-comment">//å°†pçš„nextèµ‹å€¼ç»™eè¿›è¡Œä»¥ä¸‹åˆ¤æ–­</span><br>                <span class="hljs-keyword">if</span> ((e = p.next) == <span class="hljs-literal">null</span>) &#123;<br>                    <span class="hljs-comment">//ç›´æ¥åˆ›å»ºæ–°ç»“ç‚¹è¿æ¥åœ¨ä¸Šä¸€ä¸ªç»“ç‚¹çš„åç»§ä¸Š</span><br>                    p.next = newNode(hash, key, value, <span class="hljs-literal">null</span>);<br>				<span class="hljs-comment">//å¦‚æœæ’å…¥ç»“ç‚¹åï¼Œé“¾è¡¨çš„ç»“ç‚¹æ•°å¤§äºç­‰7ï¼ˆ8-1ï¼Œå³å¤§äº8ï¼‰æ—¶ï¼Œåˆ™è¿›è¡Œçº¢é»‘æ ‘çš„è½¬æ¢</span><br>				<span class="hljs-comment">//æ³¨æ„:ä¸ä»…ä»…æ˜¯é“¾è¡¨å¤§äº8ï¼Œå¹¶ä¸”ä¼šåœ¨treeifyBinæ–¹æ³•ä¸­åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©ºæˆ–æ•°ç»„é•¿åº¦æ˜¯å¦å°äº64</span><br>				<span class="hljs-comment">//å¦‚æœå°äº64åˆ™è¿›è¡Œæ‰©å®¹ï¼Œå¹¶ä¸”ä¸æ˜¯ç›´æ¥è½¬æ¢ä¸ºçº¢é»‘æ ‘</span><br>                    <span class="hljs-keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="hljs-number">1</span>) <span class="hljs-comment">// -1 for 1st</span><br>                        treeifyBin(tab, hash);<br>                    <span class="hljs-comment">//å®Œæˆåç›´æ¥é€€å‡ºå¾ªç¯</span><br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                <span class="hljs-comment">//ä¸é€€å‡ºå¾ªç¯æ—¶ï¼Œåˆ™åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ çš„keyæ˜¯å¦ç›¸åŒ</span><br>                <span class="hljs-comment">//è‹¥ç›¸åŒï¼Œåˆ™ç›´æ¥é€€å‡ºå¾ªç¯ï¼Œè¿›è¡Œä¸‹é¢æ›¿æ¢çš„æ“ä½œ</span><br>                <span class="hljs-keyword">if</span> (e.hash == hash &amp;&amp;<br>                        ((k = e.key) == key || (key != <span class="hljs-literal">null</span> &amp;&amp; key.equals(k))))<br>                    <span class="hljs-keyword">break</span>;<br>                <span class="hljs-comment">//å¦åˆ™ï¼Œè®©pæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ç»“ç‚¹</span><br>                p = e;<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">//æ¥ç€ä¸Šé¢çš„ç¬¬äºŒä¸ªbreakï¼Œå¦‚æœeä¸ä¸ºç©ºï¼Œç›´æ¥ç”¨æ–°valueè¦†ç›–æ—§valueå¹¶ä¸”è¿”å›æ—§value</span><br>        <span class="hljs-keyword">if</span> (e != <span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">// existing mapping for key</span><br>            <span class="hljs-type">V</span> <span class="hljs-variable">oldValue</span> <span class="hljs-operator">=</span> e.value;<br>            <span class="hljs-keyword">if</span> (!onlyIfAbsent || oldValue == <span class="hljs-literal">null</span>)<br>                e.value = value;<br>            afterNodeAccess(e);<br>            <span class="hljs-keyword">return</span> oldValue;<br>        &#125;<br>    &#125;<br>    ++modCount;<br>    <span class="hljs-comment">//æ·»åŠ æˆåŠŸåï¼Œåˆ¤æ–­å®é™…å­˜åœ¨çš„é”®å€¼å¯¹æ•°é‡sizeæ˜¯å¦å¤§äºæ‰©å®¹é˜ˆå€¼thresholdï¼ˆç¬¬ä¸€æ¬¡æ—¶ä¸º12ï¼‰</span><br>    <span class="hljs-keyword">if</span> (++size &gt; threshold)<br>        <span class="hljs-comment">//è‹¥å¤§äºï¼Œæ‰©å®¹</span><br>        resize();<br>    <span class="hljs-comment">//æ·»åŠ æˆåŠŸæ—¶ä¼šè°ƒç”¨çš„æ–¹æ³•ï¼ˆé»˜è®¤å®ç°ä¸ºç©ºï¼‰</span><br>    afterNodeInsertion(evict);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">treeifyBin</span><span class="hljs-params">(Node&lt;K,V&gt;[] tab, <span class="hljs-type">int</span> hash)</span> &#123;  <br>    <span class="hljs-type">int</span> n, index; Node&lt;K,V&gt; e;  <br>    <span class="hljs-keyword">if</span> (tab == <span class="hljs-literal">null</span> || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY)  <br>        resize();  <br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((e = tab[index = (n - <span class="hljs-number">1</span>) &amp; hash]) != <span class="hljs-literal">null</span>) &#123;  <br>        TreeNode&lt;K,V&gt; hd = <span class="hljs-literal">null</span>, tl = <span class="hljs-literal">null</span>;  <br>        <span class="hljs-keyword">do</span> &#123;  <br>            TreeNode&lt;K,V&gt; p = replacementTreeNode(e, <span class="hljs-literal">null</span>);  <br>            <span class="hljs-keyword">if</span> (tl == <span class="hljs-literal">null</span>)  <br>                hd = p;  <br>            <span class="hljs-keyword">else</span> &#123;  <br>                p.prev = tl;  <br>                tl.next = p;  <br>            &#125;  <br>            tl = p;  <br>        &#125; <span class="hljs-keyword">while</span> ((e = e.next) != <span class="hljs-literal">null</span>);  <br>        <span class="hljs-keyword">if</span> ((tab[index] = hd) != <span class="hljs-literal">null</span>)  <br>            hd.treeify(tab);  <br>    &#125;  <br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230321123949.png" alt="image.png"></p><p><span style="background-color:#f0f">æ¡¶çš„ä¸ªæ•°è¶…è¿‡ 64ï¼Œæ¡¶å°±æ˜¯æ•°ç»„</span><br><span style="background-color:#f0f">é“¾è¡¨é•¿åº¦è¶…è¿‡ 8</span></p><h2 id="4-5-é“¾åŒ–"><a href="#4-5-é“¾åŒ–" class="headerlink" title="4.5. é“¾åŒ–"></a>4.5. é“¾åŒ–</h2><p>åŸºæœ¬æ€æƒ³æ˜¯å½“çº¢é»‘æ ‘ä¸­çš„å…ƒç´ å‡å°‘å¹¶å°äºä¸€å®šæ•°é‡æ—¶ï¼Œä¼šåˆ‡æ¢å›é“¾è¡¨ã€‚è€Œå…ƒç´ å‡å°‘æœ‰ä¸¤ç§æƒ…å†µï¼š</p><ul><li>1ã€è°ƒç”¨ map çš„ remove æ–¹æ³•åˆ é™¤å…ƒç´ </li></ul><p>hashMap çš„ remove æ–¹æ³•ï¼Œä¼šè¿›å…¥åˆ° removeNode æ–¹æ³•ï¼Œæ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œå¹¶åˆ¤æ–­ node ç±»å‹æ˜¯å¦ä¸º treeNodeï¼Œç„¶åè¿›å…¥åˆ é™¤çº¢é»‘æ ‘èŠ‚ç‚¹é€»è¾‘çš„ removeTreeNode æ–¹æ³•ä¸­ï¼Œè¯¥æ–¹æ³•æœ‰å…³è§£é™¤çº¢é»‘æ ‘ç»“æ„çš„åˆ†æ”¯å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">//åˆ¤æ–­æ˜¯å¦è¦è§£é™¤çº¢é»‘æ ‘çš„æ¡ä»¶<br>if (root == null || root.right == null ||<br>                (rl = root.left) == null || rl.left == null) &#123;<br>                tab[index] = first.untreeify(map);  // too small<br>                return;<br>            &#125;<br>å¤åˆ¶ä»£ç <br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæ­¤å¤„å¹¶æ²¡æœ‰åˆ©ç”¨åˆ°ç½‘ä¸Šæ‰€è¯´çš„ï¼Œ<code>å½“èŠ‚ç‚¹æ•°å°äºUNTREEIFY_THRESHOLDæ—¶æ‰è½¬æ¢ï¼Œè€Œæ˜¯é€šè¿‡çº¢é»‘æ ‘æ ¹èŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºæ¥åˆ¤æ–­</code>ã€‚è€Œæ»¡è¶³è¯¥æ¡ä»¶çš„æœ€å¤§çº¢é»‘æ ‘ç»“æ„å¦‚ä¸‹ï¼š <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5cbd9b4d36945ec88dc80869304268d~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image" alt="image.png"> èŠ‚ç‚¹æ•°ä¸º 10ï¼Œå¤§äº UNTREEIFY_THRESHOLDï¼ˆ6ï¼‰ï¼Œä½†æ˜¯æ ¹æ®è¯¥æ–¹æ³•çš„é€»è¾‘åˆ¤æ–­ï¼Œè¿˜æ˜¯éœ€è¦è½¬æ¢ä¸ºé“¾è¡¨çš„ã€‚</p><ul><li>2ã€resize çš„æ—¶å€™ï¼Œå¯¹çº¢é»‘æ ‘è¿›è¡Œäº†æ‹†åˆ†</li></ul><p>resize çš„æ—¶å€™ï¼Œåˆ¤æ–­èŠ‚ç‚¹ç±»å‹ï¼Œå¦‚æœæ˜¯é“¾è¡¨ï¼Œåˆ™å°†é“¾è¡¨æ‹†åˆ†ï¼Œå¦‚æœæ˜¯ TreeNodeï¼Œåˆ™æ‰§è¡Œ TreeNode çš„ split æ–¹æ³•åˆ†å‰²çº¢é»‘æ ‘ï¼Œè€Œ split æ–¹æ³•ä¸­å°†çº¢é»‘æ ‘è½¬æ¢ä¸ºé“¾è¡¨çš„åˆ†æ”¯å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">//åœ¨è¿™ä¹‹å‰çš„é€»è¾‘æ˜¯å°†çº¢é»‘æ ‘æ¯ä¸ªèŠ‚ç‚¹çš„hashå’Œä¸€ä¸ªbitè¿›è¡Œ&amp;è¿ç®—ï¼Œ<br>//æ ¹æ®è¿ç®—ç»“æœå°†æ ‘åˆ’åˆ†ä¸ºä¸¤æ£µçº¢é»‘æ ‘ï¼Œlcè¡¨ç¤ºå…¶ä¸­ä¸€æ£µæ ‘çš„èŠ‚ç‚¹æ•°<br>if (lc &lt;= UNTREEIFY_THRESHOLD)<br>                    tab[index] = loHead.untreeify(map);<br>                else &#123;<br>                    tab[index] = loHead;<br>                    if (hiHead != null) // (else is already treeified)<br>                        loHead.treeify(tab);<br>                &#125;<br>å¤åˆ¶ä»£ç <br></code></pre></td></tr></table></figure><p>è¿™é‡Œæ‰ç”¨åˆ°äº† <code>UNTREEIFY_THRESHOLD</code> çš„åˆ¤æ–­ï¼Œå½“çº¢é»‘æ ‘èŠ‚ç‚¹å…ƒç´ <span style="background-color:#f0f">å°äºç­‰äº 6</span> æ—¶ï¼Œæ‰è°ƒç”¨ untreeify æ–¹æ³•è½¬æ¢å›é“¾è¡¨</p><p>[[..&#x2F;..&#x2F;..&#x2F;..&#x2F;cubox&#x2F;006-ChromeCapture&#x2F;20221027-jdk1.8çš„hashmapçœŸçš„æ˜¯å¤§äº8å°±è½¬æ¢æˆçº¢é»‘æ ‘ï¼Œå°äº6å°±å˜æˆé“¾è¡¨å— - æ˜é‡‘]]</p><h2 id="4-6-resizeï¼ˆrehashï¼‰"><a href="#4-6-resizeï¼ˆrehashï¼‰" class="headerlink" title="4.6. resizeï¼ˆrehashï¼‰"></a>4.6. resizeï¼ˆrehashï¼‰</h2><p>å½“ HashMap ä¸­çš„å…ƒç´ è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œhash å†²çªçš„å‡ ç‡ä¹Ÿå°±è¶Šæ¥è¶Šé«˜ï¼Œå› ä¸ºæ•°ç»„çš„<br>é•¿åº¦æ˜¯å›ºå®šçš„ã€‚æ‰€ä»¥ä¸ºäº†æé«˜æŸ¥è¯¢çš„æ•ˆç‡ï¼Œå°±è¦å¯¹ HashMap çš„æ•°ç»„è¿›è¡Œæ‰©å®¹ï¼Œæ•°ç»„æ‰©å®¹<br>è¿™ä¸ªæ“ä½œä¹Ÿä¼šå‡ºç°åœ¨ ArrayList ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ“ä½œï¼Œè€Œåœ¨ HashMap æ•°ç»„æ‰©å®¹ä¹‹åï¼Œ<br><span style="background-color:#ff0">æœ€æ¶ˆè€—æ€§èƒ½çš„ç‚¹</span>å°±å‡ºç°äº†ï¼š<span style="background-color:#0f0">åŸæ•°ç»„ä¸­çš„æ•°æ®å¿…é¡»é‡æ–°è®¡ç®—å…¶åœ¨æ–°æ•°ç»„ä¸­çš„ä½ç½®</span>ï¼Œå¹¶æ”¾è¿›å»ï¼Œ<br>è¿™å°±æ˜¯ resizeã€‚</p><p>é‚£ä¹ˆ HashMap ä»€ä¹ˆæ—¶å€™è¿›è¡Œæ‰©å®¹å‘¢ï¼Ÿå½“ HashMap ä¸­çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡æ•°ç»„å¤§å°<br>loadFactor æ—¶ï¼Œå°±ä¼šè¿›è¡Œæ•°ç»„æ‰©å®¹ï¼ŒloadFactor çš„é»˜è®¤å€¼ä¸º 0.75ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ˜ä¸­çš„å–å€¼ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°ç»„å¤§å°ä¸º 16ï¼Œé‚£ä¹ˆå½“ HashMap ä¸­å…ƒç´ ä¸ªæ•°è¶…è¿‡ <code>16*0.75</code>&#x3D;12<br>çš„æ—¶å€™ï¼Œå°±æŠŠæ•°ç»„çš„å¤§å°æ‰©å±•ä¸º <code>2*16</code>&#x3D;32ï¼Œå³æ‰©å¤§ä¸€å€ï¼Œç„¶åé‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­<br>çš„ä½ç½®ï¼Œè€Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ¶ˆè€—æ€§èƒ½çš„æ“ä½œï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬å·²ç»é¢„çŸ¥ HashMap ä¸­å…ƒç´ çš„ä¸ª<br>æ•°ï¼Œé‚£ä¹ˆ<span style="background-color:#0f0">é¢„è®¾å…ƒç´ çš„ä¸ªæ•°èƒ½å¤Ÿæœ‰æ•ˆçš„æé«˜ HashMap çš„æ€§èƒ½</span>ã€‚</p><p>HashMap åœ¨è¿›è¡Œæ‰©å®¹æ—¶ï¼Œä½¿ç”¨çš„ rehash æ–¹å¼éå¸¸å·§å¦™ï¼Œå› ä¸ºæ¯æ¬¡æ‰©å®¹éƒ½æ˜¯ç¿»å€ï¼Œä¸åŸæ¥è®¡ç®— <code>ï¼ˆn-1ï¼‰&amp; hash</code> çš„ç»“æœç›¸æ¯”ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ª bit ä½ï¼Œæ‰€ä»¥èŠ‚ç‚¹<span style="background-color:#0f0">è¦ä¹ˆå°±åœ¨åŸæ¥</span><span style="background-color:#0f0">çš„ä½ç½®ï¼Œè¦ä¹ˆå°±è¢«åˆ†é…åˆ°â€œåŸä½ç½® + æ—§å®¹é‡â€è¿™ä¸ªä½ç½®</span>ã€‚<br>ä¾‹å¦‚ï¼ŒåŸæ¥çš„å®¹é‡ä¸º 32ï¼Œé‚£ä¹ˆåº”è¯¥æ‹¿ hash è·Ÿ 31ï¼ˆ0x11111ï¼‰åšä¸æ“ä½œï¼›åœ¨æ‰©å®¹æ‰©åˆ°äº† 64 çš„å®¹é‡ä¹‹åï¼Œåº”è¯¥æ‹¿ hash è·Ÿ 63ï¼ˆ0x111111ï¼‰åšä¸æ“ä½œã€‚æ–°å®¹é‡è·ŸåŸæ¥ç›¸æ¯”åªæ˜¯å¤šäº†ä¸€ä¸ª bit ä½ï¼Œå‡è®¾åŸæ¥çš„ä½ç½®åœ¨ 23ï¼Œé‚£ä¹ˆå½“æ–°å¢çš„é‚£ä¸ª bit ä½çš„è®¡ç®—ç»“æœä¸º 0 æ—¶ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹è¿˜æ˜¯åœ¨ 23ï¼›ç›¸åï¼Œè®¡ç®—ç»“æœä¸º 1 æ—¶ï¼Œåˆ™è¯¥èŠ‚ç‚¹ä¼šè¢«åˆ†é…åˆ° 23+31 çš„æ¡¶ä¸Šã€‚<br>æ­£æ˜¯å› ä¸ºè¿™æ ·å·§å¦™çš„ rehash æ–¹å¼ï¼Œä¿è¯äº† rehash ä¹‹åæ¯ä¸ªæ¡¶ä¸Šçš„èŠ‚ç‚¹æ•°å¿…å®šå°äºç­‰äºåŸæ¥æ¡¶ä¸Šçš„èŠ‚ç‚¹æ•°ï¼Œå³ä¿è¯äº† rehash ä¹‹åä¸ä¼šå‡ºç°æ›´ä¸¥é‡çš„å†²çªã€‚</p><p>[[..&#x2F;..&#x2F;..&#x2F;..&#x2F;cubox&#x2F;006-ChromeCapture&#x2F;20221028-HashMapå¸¸è§é—®é¢˜_Android_laçš„åšå®¢-CSDNåšå®¢]]<br>[[..&#x2F;..&#x2F;..&#x2F;..&#x2F;cubox&#x2F;006-ChromeCapture&#x2F;20221028-å²ä¸Šæœ€å…¨HashMapé¢è¯•é¢˜æ±‡æ€»_åŸé‡çš„ç¨»è‰äººçš„åšå®¢-CSDNåšå®¢_hashmapé¢è¯•é¢˜]]</p><h2 id="4-7-rehash"><a href="#4-7-rehash" class="headerlink" title="4.7. rehash"></a>4.7. rehash</h2><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221105175024.png"></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221105175110.png"></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221105175128.png"></p><h2 id="4-8-Fail-Fast-æœºåˆ¶-modCount"><a href="#4-8-Fail-Fast-æœºåˆ¶-modCount" class="headerlink" title="4.8. Fail-Fast æœºåˆ¶-modCount"></a>4.8. Fail-Fast æœºåˆ¶-modCount</h2><p><span style="display:none">%%<br>â–¶4.ğŸ¡â­ï¸â—¼ï¸ã€ğŸŒˆè´¹æ›¼æ— æ•ŒğŸŒˆâ­ï¸ç¬¬ä¸€æ­¥â­ï¸ã€‘â—¼ï¸â­ï¸-point-20230411-1745%%</span>â• ^43oza9</p><p>æˆ‘ä»¬çŸ¥é“ java.util.HashMap ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤å¦‚æœåœ¨ä½¿ç”¨è¿­ä»£å™¨çš„è¿‡ç¨‹ä¸­æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº† mapï¼Œé‚£ä¹ˆå°†æŠ›å‡º ConcurrentModificationExceptionï¼Œè¿™å°±æ˜¯æ‰€è°“ fail-fastç­–ç•¥ã€‚<br>è¿™ä¸€ç­–ç•¥åœ¨æºç ä¸­çš„å®ç°æ˜¯é€šè¿‡ <span style="background-color:#f0f">modCount</span> åŸŸï¼ŒmodCount é¡¾åæ€ä¹‰å°±æ˜¯ä¿®æ”¹æ¬¡æ•°ï¼Œå¯¹ HashMap å†…å®¹çš„ä¿®æ”¹éƒ½å°†å¢åŠ è¿™ä¸ªå€¼ï¼Œé‚£ä¹ˆåœ¨è¿­ä»£å™¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ä¼šå°†è¿™ä¸ªå€¼èµ‹ç»™è¿­ä»£å™¨çš„ expectedModCountã€‚</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221027173820.png"></p><p>åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œ<span style="background-color:#f0f">åˆ¤æ–­ modCount è·Ÿ expectedModCount æ˜¯å¦ç›¸ç­‰</span>ï¼Œå¦‚æœä¸ç›¸ç­‰å°±è¡¨ç¤ºå·²ç»æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº† Mapï¼š<br>æ³¨æ„åˆ° <span style="background-color:#f0f">modCount å£°æ˜ä¸º <strong>volatile</strong></span>ï¼Œä¿è¯çº¿ç¨‹ä¹‹é—´ä¿®æ”¹çš„å¯è§æ€§ã€‚<br>è¿™é‡Œè¯´çš„ volatile æ˜¯åœ¨ JDK5 å’Œ JDK6 çš„æ—¶å€™ï¼Œä¹Ÿè®¸æ˜¯æ­£ç¡®çš„ï¼Œå› ä¸ºåœ¨ JDK5 å’Œ JDK6 ä¸­å˜é‡ modCount ç¡®å®å£°æ˜ä¸º volatileã€‚ä½†åœ¨ JDK7 å’Œ JDK8 ä¸­ï¼Œå·²ç»æ²¡æœ‰è¿™æ ·å£°æ˜äº†ï¼ï¼ï¼ï¼ï¼<br>ç”±æ‰€æœ‰ HashMap ç±»çš„â€œcollection è§†å›¾æ–¹æ³•â€æ‰€è¿”å›çš„è¿­ä»£å™¨éƒ½æ˜¯å¿«é€Ÿå¤±è´¥çš„ï¼šåœ¨è¿­ä»£å™¨åˆ›å»ºä¹‹åï¼Œå¦‚æœä»ç»“æ„ä¸Šå¯¹æ˜ å°„è¿›è¡Œä¿®æ”¹ï¼Œé™¤éé€šè¿‡è¿­ä»£å™¨æœ¬èº«çš„ remove æ–¹æ³•ï¼Œå…¶ä»–ä»»ä½•æ—¶é—´ä»»ä½•æ–¹å¼çš„ä¿®æ”¹ï¼Œè¿­ä»£å™¨éƒ½å°†æŠ›å‡ºConcurrentModificationExceptionã€‚å› æ­¤ï¼Œ<span style="background-color:#f0f">é¢å¯¹å¹¶å‘çš„ä¿®æ”¹ï¼Œè¿­ä»£å™¨å¾ˆå¿«å°±ä¼šå®Œå…¨å¤±è´¥ï¼Œè€Œä¸å†’åœ¨å°†æ¥ä¸ç¡®å®šçš„æ—¶é—´å‘ç”Ÿä»»æ„ä¸ç¡®å®šè¡Œä¸ºçš„é£é™©</span>ã€‚<br>æ³¨æ„ï¼Œè¿­ä»£å™¨çš„å¿«é€Ÿå¤±è´¥è¡Œä¸ºä¸èƒ½å¾—åˆ°ä¿è¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œ<span style="background-color:#ff0">å­˜åœ¨éåŒæ­¥çš„å¹¶å‘ä¿®æ”¹æ—¶ï¼Œä¸å¯èƒ½ä½œå‡ºä»»ä½•åšå†³çš„ä¿è¯ã€‚å¿«é€Ÿå¤±è´¥è¿­ä»£å™¨å°½æœ€å¤§åŠªåŠ›æŠ›å‡º ConcurrentModificationExceptionã€‚å› æ­¤ï¼Œç¼–å†™ä¾èµ–äºæ­¤å¼‚å¸¸çš„ç¨‹åºçš„åšæ³•æ˜¯é”™è¯¯çš„ï¼Œæ­£ç¡®åšæ³•æ˜¯ï¼šè¿­ä»£å™¨çš„å¿«é€Ÿå¤±è´¥è¡Œä¸ºåº”è¯¥ä»…ç”¨äºæ£€æµ‹ç¨‹åºé”™è¯¯ã€‚</span></p><h3 id="4-8-1-å…¶ä»–ä½œç”¨"><a href="#4-8-1-å…¶ä»–ä½œç”¨" class="headerlink" title="4.8.1. å…¶ä»–ä½œç”¨"></a>4.8.1. å…¶ä»–ä½œç”¨</h3><p>ConcurrentHashMap ä¸­ size æ–¹æ³•ä¸­ç”¨æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ç¨³å®šæœ‰æ•ˆçš„ sizeï¼Œæœ€å°‘ 2 æ¬¡æ¯”è¾ƒï¼Œæœ€å¤š 4 æ¬¡ï¼Œ4 æ¬¡ååŠ é”</p><h2 id="4-9-æ‰©å®¹æ­»é”ä¸ç¯é“¾è¡Œç¨‹"><a href="#4-9-æ‰©å®¹æ­»é”ä¸ç¯é“¾è¡Œç¨‹" class="headerlink" title="4.9. æ‰©å®¹æ­»é”ä¸ç¯é“¾è¡Œç¨‹"></a>4.9. æ‰©å®¹æ­»é”ä¸ç¯é“¾è¡Œç¨‹</h2><p>[[20221029-JDK1.7ç‰ˆæœ¬HashMapçš„æºç åˆ†æ_è€dubboçš„åšå®¢-CSDNåšå®¢]]<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/aidaowuqiong/article/details/103492264">https://blog.csdn.net/aidaowuqiong/article/details/103492264</a></p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1mT4y177YC/?vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV1mT4y177YC/?vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221029102506.png"></p><h2 id="4-10-æ‰©å®¹ä¼˜åŒ–"><a href="#4-10-æ‰©å®¹ä¼˜åŒ–" class="headerlink" title="4.10. æ‰©å®¹ä¼˜åŒ–"></a>4.10. æ‰©å®¹ä¼˜åŒ–</h2><h3 id="4-10-1-åŒºåˆ«"><a href="#4-10-1-åŒºåˆ«" class="headerlink" title="4.10.1. åŒºåˆ«"></a>4.10.1. åŒºåˆ«</h3><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221107102604.png"></p><h3 id="4-10-2-å“ªäº›ä½ç½®éœ€è¦æ¢æ¡¶"><a href="#4-10-2-å“ªäº›ä½ç½®éœ€è¦æ¢æ¡¶" class="headerlink" title="4.10.2. å“ªäº›ä½ç½®éœ€è¦æ¢æ¡¶"></a>4.10.2. å“ªäº›ä½ç½®éœ€è¦æ¢æ¡¶</h3><p>[[..&#x2F;..&#x2F;..&#x2F;..&#x2F;cubox&#x2F;006-ChromeCapture&#x2F;20221104-HashMapæ‰©å®¹æ—¶çš„rehashæ–¹æ³•ä¸­(e.hash &amp; oldCap) &#x3D;&#x3D; 0è¯¦è§£ - CodeAntenna]]</p><h2 id="4-11-null-é”®-null-å€¼"><a href="#4-11-null-é”®-null-å€¼" class="headerlink" title="4.11. null é”® null å€¼"></a>4.11. null é”® null å€¼</h2><p>HashMap æ˜¯åŸºäºå“ˆå¸Œè¡¨çš„ Map æ¥å£çš„éåŒæ­¥å®ç°ã€‚æ­¤å®ç°æä¾›æ‰€æœ‰å¯é€‰çš„æ˜ å°„æ“ä½œï¼Œå¹¶å…è®¸ä½¿ç”¨ null å€¼ (å¤šä¸ª) å’Œ null é”® (1 ä¸ª)ã€‚æ­¤ç±»ä¸ä¿è¯æ˜ å°„çš„é¡ºåºï¼Œç‰¹åˆ«æ˜¯å®ƒä¸ä¿è¯è¯¥é¡ºåºæ’ä¹…ä¸å˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// JDK 1.8å®ç°ï¼šå°† é”®key è½¬æ¢æˆ å“ˆå¸Œç ï¼ˆhashå€¼ï¼‰æ“ä½œ = ä½¿ç”¨hashCode() + 1æ¬¡ä½è¿ç®— + 1æ¬¡å¼‚æˆ–è¿ç®—ï¼ˆ2æ¬¡æ‰°åŠ¨ï¼‰</span><br>      <span class="hljs-comment">// 1. å–hashCodeå€¼ï¼š h = key.hashCode() </span><br>      <span class="hljs-comment">// 2. é«˜ä½å‚ä¸ä½ä½çš„è¿ç®—ï¼šh ^ (h &gt;&gt;&gt; 16)  </span><br>      <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hash</span><span class="hljs-params">(Object key)</span> &#123;<br>           <span class="hljs-type">int</span> h;<br>            <span class="hljs-keyword">return</span> (key == <span class="hljs-literal">null</span>) ? <span class="hljs-number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="hljs-number">16</span>);<br>            <span class="hljs-comment">// a. å½“key = nullæ—¶ï¼Œhashå€¼ = 0ï¼Œæ‰€ä»¥HashMapçš„key å¯ä¸ºnull      </span><br>            <span class="hljs-comment">// æ³¨ï¼šå¯¹æ¯”HashTableï¼ŒHashTableå¯¹keyç›´æ¥hashCodeï¼ˆï¼‰ï¼Œè‹¥keyä¸ºnullæ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥HashTableçš„keyä¸å¯ä¸ºnull</span><br>            <span class="hljs-comment">// b. å½“key â‰  nullæ—¶ï¼Œåˆ™é€šè¿‡å…ˆè®¡ç®—å‡º keyçš„ hashCode()ï¼ˆè®°ä¸ºhï¼‰ï¼Œç„¶å å¯¹å“ˆå¸Œç è¿›è¡Œ æ‰°åŠ¨å¤„ç†ï¼š æŒ‰ä½ å¼‚æˆ–ï¼ˆ^ï¼‰ å“ˆå¸Œç è‡ªèº«å³ç§»16ä½åçš„äºŒè¿›åˆ¶</span><br>     &#125;<br></code></pre></td></tr></table></figure><p><img src="https://github.com/TaylorLuo/typora-imgs/raw/master/img/image-20211010212147026.png" alt="image-20211010212147026"></p><h2 id="4-12-2-çš„-N-æ¬¡æ–¹â­ï¸ğŸ”´"><a href="#4-12-2-çš„-N-æ¬¡æ–¹â­ï¸ğŸ”´" class="headerlink" title="4.12. 2 çš„ N æ¬¡æ–¹â­ï¸ğŸ”´"></a>4.12. 2 çš„ N æ¬¡æ–¹â­ï¸ğŸ”´</h2><h3 id="4-12-1-åŸå› "><a href="#4-12-1-åŸå› " class="headerlink" title="4.12.1. åŸå› "></a>4.12.1. åŸå› </h3><p>æ–°ç´¢å¼•å€¼&#x3D;äºŒæ¬¡å“ˆå¸Œå€¼ &amp;ï¼ˆå½“å‰å®¹é‡ -1ï¼‰</p><p>ä¹‹æ‰€ä»¥åº•å±‚æ•°ç»„çš„é•¿åº¦æ˜¯ 2 çš„æ•´æ•°æ¬¡å¹‚ï¼Œæ˜¯å› ä¸ºè®©æŒ‰ä½ä¸è¿ç®—ä¸å–æ¨¡è¿ç®—ç»“æœç›¸ç­‰</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230410172331.jpg" alt="image-20200129171632793"></p><p>åŸå› åˆ†æï¼š</p><ol><li><p>æé«˜ hash æ•ˆç‡ï¼šå› ä¸ºè¿™é‡Œçš„å“ˆå¸Œç®—æ³•æ˜¯ç”¨çš„é™¤ç•™å–ä½™æ³•ï¼Œå³è¦åšå–æ¨¡è¿ç®—ï¼Œä¸ºäº†æé«˜æ•ˆç‡ï¼Œè½¬å˜ä¸ºæŒ‰ä½ä¸è¿ç®—ï¼Œè€Œè¦æƒ³ç»“æœç›¸ç­‰ï¼Œå°±è¦æ±‚å®¹é‡å€¼ä¸º 2 çš„æ•´æ•°æ¬¡å¹‚ï¼Œå¦åˆ™é™¤ç•™å–ä½™æ— æ³•è½¬å˜æˆæŒ‰ä½ä¸è¿ç®—ã€‚<br>è¿ç®—ç›¸æ¯”äºå–æ¨¡è¿ç®—é€Ÿåº¦å¤§å¹…åº¦æå‡ (æŒ‰ç…§ Bruce Eckel ç»™å‡ºçš„æ•°æ®ï¼Œå¤§çº¦å¯ä»¥æå‡ 5ï½8 å€ï¼‰ã€‚</p></li><li><p>å……åˆ†åˆ©ç”¨ç©ºé—´ï¼š<span style="background-color:#f0f">å¦‚æœä¸æ˜¯ 2 çš„ n æ¬¡æ–¹ï¼Œæœ‰äº›ä½ç½®å¯èƒ½ä¸º 0ï¼Œä¸ä»»ä½•æ•°åšä¸è¿ç®—éƒ½æ˜¯ 0ï¼Œå¯¼è‡´æ— æ³•è·å–åˆ°æ•°ç»„çš„æŸäº›è§’æ ‡ä½ç½®ï¼Œé€ æˆç©ºé—´æµªè´¹</span>ã€‚</p></li><li><p>å‡å°‘ hash ç¢°æ’ï¼šä¸º 2 çš„ n æ¬¡æ–¹æ—¶ï¼Œ2n-1 å¾—åˆ°çš„äºŒè¿›åˆ¶æ•°çš„æ¯ä¸ªä½ä¸Šçš„å€¼éƒ½ä¸º 1ï¼Œè¿™ä½¿å¾—åœ¨ä½ä½ä¸Š&amp;æ—¶ï¼Œå¾—åˆ°çš„å’ŒåŸ hash çš„ä½ä½ç›¸åŒï¼ŒåŠ ä¹‹ hash(int h) æ–¹æ³•å¯¹ key çš„ hashCode çš„è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ŒåŠ å…¥äº†é«˜ä½è®¡ç®—ï¼Œå°±ä½¿å¾—åªæœ‰ç›¸åŒçš„ hash å€¼çš„ä¸¤ä¸ªå€¼æ‰ä¼šè¢«æ”¾åˆ°æ•°ç»„ä¸­çš„åŒä¸€ä¸ªä½ç½®ä¸Šå½¢æˆé“¾è¡¨ã€‚æ‰€ä»¥è¯´ï¼Œå½“æ•°ç»„é•¿åº¦ä¸º 2 çš„ n æ¬¡å¹‚çš„æ—¶å€™ï¼Œä¸åŒçš„ key ç®—å¾—å¾— index ç›¸åŒçš„å‡ ç‡è¾ƒå°ï¼Œé‚£ä¹ˆæ•°æ®åœ¨æ•°ç»„ä¸Šåˆ†å¸ƒå°±æ¯”è¾ƒå‡åŒ€ï¼Œä¹Ÿå°±æ˜¯è¯´ç¢°æ’çš„å‡ ç‡å°ï¼Œç›¸å¯¹çš„ï¼ŒæŸ¥è¯¢çš„æ—¶å€™å°±ä¸ç”¨éå†æŸä¸ªä½ç½®ä¸Šçš„é“¾è¡¨ï¼Œè¿™æ ·æŸ¥è¯¢æ•ˆç‡ä¹Ÿå°±è¾ƒé«˜äº†ã€‚<br><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221029090521.png"></p></li><li><p>æ‰©å®¹åˆ¤æ–­ä¼˜åŒ–ï¼š1.8 ä¸­çš„é«˜ä½ä½ä¹Ÿç”¨åˆ°äº† n-1 ä½ä½éƒ½ä¸º 1 çš„ç‰¹æ€§ï¼Œå³ä¸Šæ–‡æ‰€è¯´ï¼Œæ¯æ¬¡æ‰©å®¹éƒ½æ˜¯ç¿»å€ï¼Œä¸åŸæ¥è®¡ç®— <code>ï¼ˆn-1ï¼‰&amp; hash</code> çš„ç»“æœç›¸æ¯”ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ª bit ä½ï¼Œæ‰€ä»¥èŠ‚ç‚¹<span style="background-color:#0f0">è¦ä¹ˆå°±åœ¨åŸæ¥çš„ä½ç½®ï¼Œè¦ä¹ˆå°±è¢«åˆ†é…åˆ°â€œåŸä½ç½® + æ—§å®¹é‡â€è¿™ä¸ªä½ç½®</span>ã€‚</p><h4 id="4-12-2-æºç "><a href="#4-12-2-æºç " class="headerlink" title="4.12.2. æºç "></a>4.12.2. æºç </h4><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221027140336.png"></p></li></ol><h1 id="5-çº¢é»‘æ ‘"><a href="#5-çº¢é»‘æ ‘" class="headerlink" title="5. çº¢é»‘æ ‘"></a>5. çº¢é»‘æ ‘</h1><p>çº¢é»‘æ ‘æ˜¯å¹³è¡¡äºŒå‰æ ‘çš„ä¸€ç§å®ç°æ–¹å¼ï¼Œå¦ä¸€ç§å®ç°æ–¹å¼æ˜¯æœ€åˆçš„ AVL æ ‘ã€‚</p><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230410172345.jpg" alt="image-20200129174140779"></p><p><strong>TreeSet TreeMap ä¸­é‡Œéƒ½æ˜¯çº¢é»‘æ ‘</strong></p><h1 id="6-hash-ç´¢å¼•ä¸-B-æ ‘ç´¢å¼•çš„åŒºåˆ«"><a href="#6-hash-ç´¢å¼•ä¸-B-æ ‘ç´¢å¼•çš„åŒºåˆ«" class="headerlink" title="6. hash ç´¢å¼•ä¸ B æ ‘ç´¢å¼•çš„åŒºåˆ«"></a>6. hash ç´¢å¼•ä¸ B æ ‘ç´¢å¼•çš„åŒºåˆ«</h1><p>Hash ç´¢å¼•ç»“æ„çš„ç‰¹æ®Šæ€§ï¼Œå…¶æ£€ç´¢æ•ˆç‡éå¸¸é«˜ï¼Œç´¢å¼•çš„æ£€ç´¢å¯ä»¥ä¸€æ¬¡å®šä½ï¼Œä¸åƒ B-Tree ç´¢å¼•éœ€è¦ä»æ ¹èŠ‚ç‚¹åˆ°æèŠ‚ç‚¹ï¼Œæœ€åæ‰èƒ½è®¿é—®åˆ°é¡µèŠ‚ç‚¹è¿™æ ·å¤šæ¬¡çš„ IO è®¿é—®ï¼Œæ‰€ä»¥ Hash ç´¢å¼•çš„æŸ¥è¯¢æ•ˆç‡è¦è¿œé«˜äº B-Tree ç´¢å¼•ã€‚</p><p>ï¼ˆ1ï¼‰Hash ç´¢å¼•ä»…ä»…èƒ½æ»¡è¶³â€&#x3D;â€,â€INâ€ å’Œâ€&lt;&#x3D;&gt;â€ æŸ¥è¯¢ï¼Œ<span style="background-color:#ff0">ä¸èƒ½ä½¿ç”¨èŒƒå›´æŸ¥è¯¢</span>ã€‚Â <br>ç”±äº Hash ç´¢å¼•æ¯”è¾ƒçš„æ˜¯è¿›è¡Œ Hash è¿ç®—ä¹‹åçš„ Hash å€¼ï¼Œæ‰€ä»¥å®ƒåªèƒ½ç”¨äºç­‰å€¼çš„è¿‡æ»¤ï¼Œä¸èƒ½ç”¨äºåŸºäºèŒƒå›´çš„è¿‡æ»¤ï¼Œå› ä¸ºç»è¿‡ç›¸åº”çš„ Hash ç®—æ³•å¤„ç†ä¹‹åçš„ Hash å€¼çš„å¤§å°å…³ç³»ï¼Œå¹¶ä¸èƒ½ä¿è¯å’Œ Hash è¿ç®—å‰å®Œå…¨ä¸€æ ·ã€‚</p><p>ï¼ˆ2ï¼‰Hash ç´¢å¼•<span style="background-color:#ff0">æ— æ³•</span>è¢«ç”¨æ¥é¿å…æ•°æ®çš„<span style="background-color:#ff0">æ’åº</span>æ“ä½œã€‚Â <br>ç”±äº Hash ç´¢å¼•ä¸­å­˜æ”¾çš„æ˜¯ç»è¿‡ Hash è®¡ç®—ä¹‹åçš„ Hash å€¼ï¼Œè€Œä¸” Hash å€¼çš„å¤§å°å…³ç³»å¹¶ä¸ä¸€å®šå’Œ Hash è¿ç®—å‰çš„é”®å€¼å®Œå…¨ä¸€æ ·ï¼Œæ‰€ä»¥æ•°æ®åº“æ— æ³•åˆ©ç”¨ç´¢å¼•çš„æ•°æ®æ¥é¿å…ä»»ä½•æ’åºè¿ç®—ï¼›</p><p>ï¼ˆ3ï¼‰Hash ç´¢å¼•<span style="background-color:#ff0">ä¸èƒ½åˆ©ç”¨éƒ¨åˆ†ç´¢å¼•é”®æŸ¥è¯¢</span>ã€‚Â <br>å¯¹äºç»„åˆç´¢å¼•ï¼ŒHash ç´¢å¼•åœ¨è®¡ç®— Hash å€¼çš„æ—¶å€™æ˜¯ç»„åˆç´¢å¼•é”®åˆå¹¶åå†ä¸€èµ·è®¡ç®— Hash å€¼ï¼Œè€Œä¸æ˜¯å•ç‹¬è®¡ç®— Hash å€¼ï¼Œæ‰€ä»¥é€šè¿‡ç»„åˆç´¢å¼•çš„å‰é¢ä¸€ä¸ªæˆ–å‡ ä¸ªç´¢å¼•é”®è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼ŒHash ç´¢å¼•ä¹Ÿæ— æ³•è¢«åˆ©ç”¨ã€‚</p><p>ï¼ˆ4ï¼‰Hash ç´¢å¼•åœ¨<span style="background-color:#ff0">ä»»ä½•æ—¶å€™éƒ½ä¸èƒ½é¿å…è¡¨æ‰«æ</span>ã€‚Â <br>å‰é¢å·²ç»çŸ¥é“ï¼ŒHash ç´¢å¼•æ˜¯å°†ç´¢å¼•é”®é€šè¿‡ Hash è¿ç®—ä¹‹åï¼Œå°† Hash è¿ç®—ç»“æœçš„ Hash å€¼å’Œæ‰€å¯¹åº”çš„è¡ŒæŒ‡é’ˆä¿¡æ¯å­˜æ”¾äºä¸€ä¸ª Hash è¡¨ä¸­ï¼Œç”±äºä¸åŒç´¢å¼•é”®å­˜åœ¨ç›¸åŒ Hash å€¼ï¼Œæ‰€ä»¥å³ä½¿å–æ»¡è¶³æŸä¸ª Hash é”®å€¼çš„æ•°æ®çš„è®°å½•æ¡æ•°ï¼Œä¹Ÿæ— æ³•ä» Hash ç´¢å¼•ä¸­ç›´æ¥å®ŒæˆæŸ¥è¯¢ï¼Œè¿˜æ˜¯è¦é€šè¿‡è®¿é—®è¡¨ä¸­çš„å®é™…æ•°æ®è¿›è¡Œç›¸åº”çš„æ¯”è¾ƒï¼Œå¹¶å¾—åˆ°ç›¸åº”çš„ç»“æœã€‚</p><p>ï¼ˆ5ï¼‰Hash ç´¢å¼•é‡åˆ°<span style="background-color:#ff0">å¤§é‡ Hash å€¼ç›¸ç­‰çš„æƒ…å†µåæ€§èƒ½å¹¶ä¸ä¸€å®šå°±ä¼šæ¯” B-Tree ç´¢å¼•é«˜</span>ã€‚Â <br>å¯¹äºé€‰æ‹©æ€§æ¯”è¾ƒä½çš„ç´¢å¼•é”®ï¼Œå¦‚æœåˆ›å»º Hash ç´¢å¼•ï¼Œé‚£ä¹ˆå°†ä¼šå­˜åœ¨å¤§é‡è®°å½•æŒ‡é’ˆä¿¡æ¯å­˜äºåŒä¸€ä¸ª Hash å€¼ç›¸å…³è”ã€‚è¿™æ ·è¦å®šä½æŸä¸€æ¡è®°å½•æ—¶å°±ä¼šéå¸¸éº»çƒ¦ï¼Œä¼šæµªè´¹å¤šæ¬¡è¡¨æ•°æ®çš„è®¿é—®ï¼Œè€Œé€ æˆæ•´ä½“æ€§èƒ½ä½ä¸‹ã€‚</p><h1 id="7-å„ç§æ¯”è¾ƒ"><a href="#7-å„ç§æ¯”è¾ƒ" class="headerlink" title="7. å„ç§æ¯”è¾ƒ"></a>7. å„ç§æ¯”è¾ƒ</h1><pre><code>                                   åº•å±‚ç»“æ„      ç‰ˆæœ¬		 çº¿ç¨‹å®‰å…¨ï¼ˆåŒæ­¥ï¼‰	å…è®¸nullé”®nullå€¼
</code></pre><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221203194906.png"></p><p>åº•å±‚ç»“æ„ï¼šå“ˆå¸Œè¡¨<br>jdk7: æ•°ç»„ + é“¾è¡¨<br>jdk8: æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘</p><p>æºç åˆ†æï¼š<br>jdk8ï¼š HashMap ä¸­ç»´æŠ¤äº† Node ç±»å‹çš„æ•°ç»„ tableï¼Œå½“ HashMap åˆ›å»ºå¯¹è±¡æ—¶ï¼Œåªæ˜¯å¯¹ loadFactor åˆå§‹åŒ–ä¸º 0.75ï¼›table è¿˜æ˜¯ä¿æŒé»˜è®¤å€¼ null</p><blockquote><pre><code>å½“ç¬¬ä¸€æ¬¡æ·»åŠ æ—¶ï¼Œå°†åˆå§‹tableå®¹é‡ä¸º16ï¼Œä¸´ç•Œå€¼ä¸º12
æ¯æ¬¡æ·»åŠ è°ƒç”¨putValæ–¹æ³•ï¼š
    â‘ å…ˆè·å–keyçš„äºŒæ¬¡å“ˆå¸Œå€¼å¹¶è¿›è¡Œå–ä¸è¿ç®—ï¼Œå¾—å‡ºå­˜æ”¾çš„ä½ç½®
    â‘¡åˆ¤æ–­è¯¥å­˜æ”¾ä½ç½®ä¸Šæ˜¯å¦æœ‰å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰ç›´æ¥å­˜æ”¾

     å¦‚æœè¯¥å­˜æ”¾ä½ç½®ä¸Šå·²æœ‰å…ƒç´ ï¼Œåˆ™è¿›è¡Œç»§ç»­åˆ¤æ–­ï¼š
                            å¦‚æœå’Œå½“å‰å…ƒç´ ç›´æ¥ç›¸ç­‰ï¼Œåˆ™è¦†ç›–
                            å¦‚æœä¸ç›¸ç­‰ï¼Œåˆ™ç»§ç»­åˆ¤æ–­æ˜¯å¦æ˜¯é“¾è¡¨ç»“æ„è¿˜æ˜¯æ ‘çŠ¶ç»“æ„ï¼ŒæŒ‰ç…§å¯¹åº”ç»“æ„çš„åˆ¤æ–­æ–¹å¼åˆ¤æ–­ç›¸ç­‰

    â‘¢å°†sizeæ›´æ–°ï¼Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡äº†ä¸´ç•Œå€¼ï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œåˆ™éœ€è¦é‡æ–°resize()è¿›è¡Œ2å€æ‰©å®¹ï¼Œå¹¶æ‰“ä¹±åŸæ¥çš„é¡ºåºï¼Œé‡æ–°æ’åˆ—

    â‘£&lt;span style=&quot;background-color:#ff00ff&quot;&gt;å½“ä¸€ä¸ªæ¡¶ä¸­çš„é“¾è¡¨çš„èŠ‚ç‚¹æ•°&gt;=8 &amp;&amp;  æ¡¶çš„æ€»ä¸ªæ•°ï¼ˆtableçš„å®¹é‡ï¼‰&gt;=64æ—¶ï¼Œä¼šå°†é“¾è¡¨ç»“æ„å˜æˆçº¢é»‘æ ‘ç»“æ„&lt;/span&gt;
</code></pre></blockquote><p>jdk7 å’Œ jdk8 çš„åŒºåˆ«<br>1.jdk7: åˆ›å»º HashMap å¯¹è±¡æ—¶ï¼Œåˆ™åˆå§‹ table å®¹é‡ä¸º 16<br>jdk8: åˆ›å»º HashMap å¯¹è±¡æ—¶ï¼Œæ²¡æœ‰åˆå§‹ tableï¼Œä»…ä»…åªæ˜¯åˆå§‹åŠ è½½å› å­ã€‚åªæœ‰å½“ç¬¬ä¸€æ¬¡æ·»åŠ æ—¶æ‰ä¼šåˆå§‹ table å®¹é‡ä¸º 16.</p><pre><code>2.jdk7:tableçš„ç±»å‹ä¸ºEntry
  jdk8:tableçš„ç±»å‹ä¸ºNode

3.jdk7:å“ˆå¸Œè¡¨ä¸ºæ•°ç»„+é“¾è¡¨ï¼Œä¸ç®¡é“¾è¡¨çš„æ€»ç»“ç‚¹æ•°æ˜¯å¤šå°‘éƒ½ä¸ä¼šå˜æˆæ ‘ç»“æ„
  jdk8ï¼šå“ˆå¸Œè¡¨ä¸ºæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼Œå½“é“¾è¡¨çš„èŠ‚ç‚¹æ•°&gt;=8 &amp;&amp;  æ¡¶çš„æ€»ä¸ªæ•°ï¼ˆtableçš„å®¹é‡ï¼‰&gt;=64æ—¶ï¼Œä¼šå°†é“¾è¡¨ç»“æ„å˜æˆçº¢é»‘æ ‘ç»“æ„
</code></pre><p>åº”ç”¨å±‚é¢ï¼š</p><pre><code>    è¦æ±‚æ·»åŠ å…ƒç´ çš„keyé‡å†™hashCodeå’Œequalsæ–¹æ³•
</code></pre><h1 id="8-æ³Šæ¾åˆ†å¸ƒ"><a href="#8-æ³Šæ¾åˆ†å¸ƒ" class="headerlink" title="8. æ³Šæ¾åˆ†å¸ƒ"></a>8. æ³Šæ¾åˆ†å¸ƒ</h1><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20230410172359.jpg" alt="image-20200129175339730"></p><h1 id="9-ç‰¹ç‚¹"><a href="#9-ç‰¹ç‚¹" class="headerlink" title="9. ç‰¹ç‚¹"></a>9. ç‰¹ç‚¹</h1><p><img src="https://raw.githubusercontent.com/TaylorLuo/typora-imgs/master/img20221018185915.png"></p><h1 id="10-é˜²æ­¢å“ˆå¸Œç¢°æ’çš„æªæ–½â­ï¸ğŸ”´"><a href="#10-é˜²æ­¢å“ˆå¸Œç¢°æ’çš„æªæ–½â­ï¸ğŸ”´" class="headerlink" title="10. é˜²æ­¢å“ˆå¸Œç¢°æ’çš„æªæ–½â­ï¸ğŸ”´"></a>10. é˜²æ­¢å“ˆå¸Œç¢°æ’çš„æªæ–½â­ï¸ğŸ”´</h1><pre><code> * JDK 1.7 åšäº†9æ¬¡æ‰°åŠ¨å¤„ç† = 4æ¬¡ä½è¿ç®— + 5æ¬¡å¼‚æˆ–è¿ç®—
 * JDK 1.8 ç®€åŒ–äº†æ‰°åŠ¨å‡½æ•° = åªåšäº†2æ¬¡æ‰°åŠ¨ = 1æ¬¡ä½è¿ç®— + 1æ¬¡å¼‚æˆ–è¿ç®—
</code></pre><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">   /**<br>     * åˆ†æ1ï¼šhash(key)<br>     * ä½œç”¨ï¼šè®¡ç®—ä¼ å…¥æ•°æ®çš„å“ˆå¸Œç ï¼ˆå“ˆå¸Œå€¼ã€Hashå€¼ï¼‰<br>     * è¯¥å‡½æ•°åœ¨JDK 1.7 å’Œ 1.8 ä¸­çš„å®ç°ä¸åŒï¼Œä½†åŸç†ä¸€æ · = æ‰°åŠ¨å‡½æ•° = ä½¿å¾—æ ¹æ®keyç”Ÿæˆçš„å“ˆå¸Œç ï¼ˆhashå€¼ï¼‰åˆ†å¸ƒæ›´åŠ å‡åŒ€ã€æ›´å…·å¤‡éšæœºæ€§ï¼Œé¿å…å‡ºç°hashå€¼å†²çªï¼ˆå³æŒ‡ä¸åŒkeyä½†ç”ŸæˆåŒ1ä¸ªhashå€¼ï¼‰<br>     * JDK 1.7 åšäº†9æ¬¡æ‰°åŠ¨å¤„ç† = 4æ¬¡ä½è¿ç®— + 5æ¬¡å¼‚æˆ–è¿ç®—<br>     * JDK 1.8 ç®€åŒ–äº†æ‰°åŠ¨å‡½æ•° = åªåšäº†2æ¬¡æ‰°åŠ¨ = 1æ¬¡ä½è¿ç®— + 1æ¬¡å¼‚æˆ–è¿ç®—<br>     */<br><br>      // JDK 1.7å®ç°ï¼šå°† é”®key è½¬æ¢æˆ å“ˆå¸Œç ï¼ˆhashå€¼ï¼‰æ“ä½œ  = ä½¿ç”¨hashCode() + 4æ¬¡ä½è¿ç®— + 5æ¬¡å¼‚æˆ–è¿ç®—ï¼ˆ9æ¬¡æ‰°åŠ¨ï¼‰<br>      static final int hash(int h) &#123;<br>        h ^= k.hashCode(); <br>        h ^= (h &gt;&gt;&gt; 20) ^ (h &gt;&gt;&gt; 12);<br>        return h ^ (h &gt;&gt;&gt; 7) ^ (h &gt;&gt;&gt; 4);<br>     &#125;<br><br>      // JDK 1.8å®ç°ï¼šå°† é”®key è½¬æ¢æˆ å“ˆå¸Œç ï¼ˆhashå€¼ï¼‰æ“ä½œ = ä½¿ç”¨hashCode() + 1æ¬¡ä½è¿ç®— + 1æ¬¡å¼‚æˆ–è¿ç®—ï¼ˆ2æ¬¡æ‰°åŠ¨ï¼‰<br>      // 1. å–hashCodeå€¼ï¼š h = key.hashCode() <br>      // 2. é«˜ä½å‚ä¸ä½ä½çš„è¿ç®—ï¼šh ^ (h &gt;&gt;&gt; 16)  <br>      static final int hash(Object key) &#123;<br>           int h;<br>            return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);<br>            // a. å½“key = nullæ—¶ï¼Œhashå€¼ = 0ï¼Œæ‰€ä»¥HashMapçš„key å¯ä¸ºnull      <br>            // æ³¨ï¼šå¯¹æ¯”HashTableï¼ŒHashTableå¯¹keyç›´æ¥hashCodeï¼ˆï¼‰ï¼Œè‹¥keyä¸ºnullæ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥HashTableçš„keyä¸å¯ä¸ºnull<br>            // b. å½“key â‰  nullæ—¶ï¼Œåˆ™é€šè¿‡å…ˆè®¡ç®—å‡º keyçš„ hashCode()ï¼ˆè®°ä¸ºhï¼‰ï¼Œç„¶å å¯¹å“ˆå¸Œç è¿›è¡Œ æ‰°åŠ¨å¤„ç†ï¼š æŒ‰ä½ å¼‚æˆ–ï¼ˆ^ï¼‰ å“ˆå¸Œç è‡ªèº«å³ç§»16ä½åçš„äºŒè¿›åˆ¶<br>     &#125;<br><br>   /**<br>     * è®¡ç®—å­˜å‚¨ä½ç½®çš„å‡½æ•°åˆ†æï¼šindexFor(hash, table.length)<br>     * æ³¨ï¼šè¯¥å‡½æ•°ä»…å­˜åœ¨äºJDK 1.7 ï¼ŒJDK 1.8ä¸­å®é™…ä¸Šæ— è¯¥å‡½æ•°ï¼ˆç›´æ¥ç”¨1æ¡è¯­å¥åˆ¤æ–­å†™å‡ºï¼‰ï¼Œä½†åŸç†ç›¸åŒ<br>     * ä¸ºäº†æ–¹ä¾¿è®²è§£ï¼Œæ•…æå‰åˆ°æ­¤è®²è§£<br>     */<br>     static int indexFor(int h, int length) &#123;  <br>          return h &amp; (length-1); <br>          // å°†å¯¹å“ˆå¸Œç æ‰°åŠ¨å¤„ç†åçš„ç»“æœ ä¸è¿ç®—(&amp;) ï¼ˆæ•°ç»„é•¿åº¦-1ï¼‰ï¼Œæœ€ç»ˆå¾—åˆ°å­˜å‚¨åœ¨æ•°ç»„tableçš„ä½ç½®ï¼ˆå³æ•°ç»„ä¸‹æ ‡ã€ç´¢å¼•ï¼‰<br>          &#125;<br>å¤åˆ¶ä»£ç <br></code></pre></td></tr></table></figure><h1 id="11-å‚è€ƒ"><a href="#11-å‚è€ƒ" class="headerlink" title="11. å‚è€ƒ"></a>11. å‚è€ƒ</h1><h2 id="11-1-é»‘é©¬"><a href="#11-1-é»‘é©¬" class="headerlink" title="11.1. é»‘é©¬"></a>11.1. é»‘é©¬</h2><h3 id="11-1-1-è§†é¢‘"><a href="#11-1-1-è§†é¢‘" class="headerlink" title="11.1.1. è§†é¢‘"></a>11.1.1. è§†é¢‘</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1A741127DP/?p=2&amp;spm_id_from=pageDriver&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV1A741127DP/?p=2&amp;spm_id_from=pageDriver&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><h3 id="11-1-2-èµ„æ–™"><a href="#11-1-2-èµ„æ–™" class="headerlink" title="11.1.2. èµ„æ–™"></a>11.1.2. èµ„æ–™</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">/Users/taylor/Nutstore Files/Obsidian_data/pages/<span class="hljs-number">002</span>-schdule/<span class="hljs-number">001</span>-Arch/<span class="hljs-number">001</span>-Subject/<span class="hljs-number">001</span>-åŸºç¡€çŸ¥è¯†ä¸“é¢˜/<span class="hljs-number">001</span>-é›†åˆæ¡†æ¶/é»‘é©¬-HashMap<br></code></pre></td></tr></table></figure><h2 id="11-2-old"><a href="#11-2-old" class="headerlink" title="11.2. old"></a>11.2. old</h2><p>Java å¹¶å‘ç¼–ç¨‹å…¨å¥—è§†é¢‘æ•™ç¨‹ï¼ˆJMM+AQS+synchronized+hashmapï¼‰<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV17c411h7Vw/?spm_id_from=333.337.search-card.all.click&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV17c411h7Vw/?spm_id_from=333.337.search-card.all.click&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><p><a target="_blank" rel="noopener" href="https://juejin.im/post/5aa5d8d26fb9a028d2079264">https://juejin.im/post/5aa5d8d26fb9a028d2079264</a></p><p>[[..&#x2F;..&#x2F;..&#x2F;..&#x2F;cubox&#x2F;006-ChromeCapture&#x2F;20221028-Javaæºç åˆ†æï¼šHashMap 1.8 ç›¸å¯¹äº1.7 åˆ°åº•æ›´æ–°äº†ä»€ä¹ˆï¼Ÿ - æ˜é‡‘]]</p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV15Q4y1e7q6?p=6&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204">https://www.bilibili.com/video/BV15Q4y1e7q6?p=6&amp;vd_source=c5b2d0d7bc377c0c35dbc251d95cf204</a></p><p>[[..&#x2F;..&#x2F;..&#x2F;..&#x2F;cubox&#x2F;006-ChromeCapture&#x2F;20221104-Java 8ç³»åˆ—ä¹‹é‡æ–°è®¤è¯†HashMap - ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ]]</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…:</span> <span class="post-copyright-info"><a href="https://taylorluo.github.io">Taylor Luo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥:</span> <span class="post-copyright-info"><a href="https://taylorluo.github.io/2022/10/25/001-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%93%E9%A2%98/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-5%E3%80%81HashMap/">https://taylorluo.github.io/2022/10/25/001-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%93%E9%A2%98/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-5%E3%80%81HashMap/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜:</span> <span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://taylorluo.github.io" target="_blank">Taylor</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java%E5%9F%BA%E7%A1%80/">JavaåŸºç¡€</a><a class="post-meta__tags" href="/tags/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/">é›†åˆæ¡†æ¶</a></div><div class="post_share"><div class="social-share" data-image="https://unpkg.com/justlovesmile-img/cover6.JPG" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> æ‰“èµ</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="å¾®ä¿¡"></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="æ”¯ä»˜å®"></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/10/25/001-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%93%E9%A2%98/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-4%E3%80%81LinkedList/"><img class="prev-cover" src="https://picsum.photos/1920/962" onerror='onerror=null,src="/null"' alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">JavaåŸºç¡€-é›†åˆæ¡†æ¶-4ã€LinkedList</div></div></a></div><div class="next-post pull-right"><a href="/2022/10/23/001-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%93%E9%A2%98/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-1%E3%80%81%E9%9B%86%E5%90%88%E5%85%B3%E7%B3%BB%E5%8F%8A%E6%A6%82%E5%BF%B5/"><img class="next-cover" src="https://picsum.photos/1920/982" onerror='onerror=null,src="/null"' alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">JavaåŸºç¡€-é›†åˆæ¡†æ¶-1ã€é›†åˆå…³ç³»åŠæ¦‚å¿µ</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2022/10/23/001-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%93%E9%A2%98/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-1%E3%80%81%E9%9B%86%E5%90%88%E5%85%B3%E7%B3%BB%E5%8F%8A%E6%A6%82%E5%BF%B5/" title="JavaåŸºç¡€-é›†åˆæ¡†æ¶-1ã€é›†åˆå…³ç³»åŠæ¦‚å¿µ"><img class="cover" src="https://picsum.photos/1920/982" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-24</div><div class="title">JavaåŸºç¡€-é›†åˆæ¡†æ¶-1ã€é›†åˆå…³ç³»åŠæ¦‚å¿µ</div></div></a></div><div><a href="/2022/10/22/001-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%93%E9%A2%98/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-3%E3%80%81ArrayList/" title="JavaåŸºç¡€-é›†åˆæ¡†æ¶-3ã€ArrayList"><img class="cover" src="https://picsum.photos/1920/992" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-23</div><div class="title">JavaåŸºç¡€-é›†åˆæ¡†æ¶-3ã€ArrayList</div></div></a></div><div><a href="/2022/10/25/001-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%93%E9%A2%98/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-4%E3%80%81LinkedList/" title="JavaåŸºç¡€-é›†åˆæ¡†æ¶-4ã€LinkedList"><img class="cover" src="https://picsum.photos/1920/962" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-26</div><div class="title">JavaåŸºç¡€-é›†åˆæ¡†æ¶-4ã€LinkedList</div></div></a></div><div><a href="/2022/11/06/001-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%93%E9%A2%98/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-8%E3%80%81HashMap%E7%89%88%E6%9C%AC%E5%8F%98%E5%8C%96/" title="JavaåŸºç¡€-é›†åˆæ¡†æ¶-8ã€HashMapç‰ˆæœ¬å˜åŒ–"><img class="cover" src="https://picsum.photos/1920/912" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-07</div><div class="title">JavaåŸºç¡€-é›†åˆæ¡†æ¶-8ã€HashMapç‰ˆæœ¬å˜åŒ–</div></div></a></div><div><a href="/2022/11/06/001-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B8%93%E9%A2%98/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-9%E3%80%81%E9%9B%86%E5%90%88%E9%9D%A2%E8%AF%95%E9%A2%98/" title="JavaåŸºç¡€-é›†åˆæ¡†æ¶-9ã€é›†åˆé¢è¯•é¢˜"><img class="cover" src="https://picsum.photos/1920/912" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-07</div><div class="title">JavaåŸºç¡€-é›†åˆæ¡†æ¶-9ã€é›†åˆé¢è¯•é¢˜</div></div></a></div><div><a href="/2022/10/22/012-%E7%BB%8F%E9%AA%8C%E4%B8%93%E9%A2%98/Java%E5%9F%BA%E7%A1%80-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6-2%E3%80%81%E9%9B%86%E5%90%88%E7%B1%BB%E7%9A%84%E5%9D%91/" title="JavaåŸºç¡€-é›†åˆæ¡†æ¶-2ã€é›†åˆç±»çš„å‘"><img class="cover" src="https://unpkg.com/justlovesmile-img/cover8.JPG" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-23</div><div class="title">JavaåŸºç¡€-é›†åˆæ¡†æ¶-2ã€é›†åˆç±»çš„å‘</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/index.jpeg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">Taylor Luo</div><div class="author-info__description">äººç”Ÿæµ·æµ· ä¸å¿˜åˆå¿ƒ</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">183</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">85</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">31</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88%E5%93%88%E5%B8%8C%E8%A1%A8%EF%BC%89"><span class="toc-text">1. æ•°æ®ç»“æ„ï¼ˆå“ˆå¸Œè¡¨ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">1.1. æ˜¯ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E7%89%B9%E7%82%B9"><span class="toc-text">1.2. ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E5%93%88%E5%B8%8C%E5%87%BD%E6%95%B0"><span class="toc-text">1.3. å“ˆå¸Œå‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-native-hashcode-%E6%96%B9%E6%B3%95"><span class="toc-text">1.4. native hashcode æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E5%93%88%E5%B8%8C%E7%A2%B0%E6%92%9E-%E5%93%88%E5%B8%8C%E5%86%B2%E7%AA%81-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-text">1.5. å“ˆå¸Œç¢°æ’ (å“ˆå¸Œå†²çª) è§£å†³æ–¹æ¡ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-%E8%A3%85%E5%A1%AB%E5%9B%A0%E5%AD%90"><span class="toc-text">1.6. è£…å¡«å› å­</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E7%89%88%E6%9C%AC%E5%8F%98%E5%8C%96"><span class="toc-text">2. ç‰ˆæœ¬å˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-JDK7-%E5%A4%B4%E6%8F%92%E6%B3%95"><span class="toc-text">2.1. JDK7 å¤´æ’æ³•</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E9%81%8D%E5%8E%86%E6%96%B9%E5%BC%8F"><span class="toc-text">3. éå†æ–¹å¼</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E5%AE%9E%E7%8E%B0%E9%80%BB%E8%BE%91"><span class="toc-text">4. å®ç°é€»è¾‘</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-put-%E6%94%BE%E5%85%A5%E6%95%B0%E6%8D%AE%E2%AD%90%EF%B8%8F%F0%9F%94%B4"><span class="toc-text">4.1. put æ”¾å…¥æ•°æ®â­ï¸ğŸ”´</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-%E4%BA%8C%E6%AC%A1%E5%93%88%E5%B8%8C"><span class="toc-text">4.1.1. äºŒæ¬¡å“ˆå¸Œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-%E5%8C%BA%E5%88%AB"><span class="toc-text">4.1.2. åŒºåˆ«</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-hashCode-equals"><span class="toc-text">4.2. hashCode() equals()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E5%8A%A0%E8%BD%BD%E5%9B%A0%E5%AD%90"><span class="toc-text">4.3. åŠ è½½å› å­</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-0-5-%E7%9A%84%E6%9D%A5%E5%8E%86"><span class="toc-text">4.3.1. 0.5 çš„æ¥å†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-%E4%B8%8E-8-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">4.3.2. ä¸ 8 çš„å…³ç³»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E6%A0%91%E5%8C%96"><span class="toc-text">4.4. æ ‘åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-%E9%93%BE%E5%8C%96"><span class="toc-text">4.5. é“¾åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-resize%EF%BC%88rehash%EF%BC%89"><span class="toc-text">4.6. resizeï¼ˆrehashï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-rehash"><span class="toc-text">4.7. rehash</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-8-Fail-Fast-%E6%9C%BA%E5%88%B6-modCount"><span class="toc-text">4.8. Fail-Fast æœºåˆ¶-modCount</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-1-%E5%85%B6%E4%BB%96%E4%BD%9C%E7%94%A8"><span class="toc-text">4.8.1. å…¶ä»–ä½œç”¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-9-%E6%89%A9%E5%AE%B9%E6%AD%BB%E9%94%81%E4%B8%8E%E7%8E%AF%E9%93%BE%E8%A1%8C%E7%A8%8B"><span class="toc-text">4.9. æ‰©å®¹æ­»é”ä¸ç¯é“¾è¡Œç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-10-%E6%89%A9%E5%AE%B9%E4%BC%98%E5%8C%96"><span class="toc-text">4.10. æ‰©å®¹ä¼˜åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-10-1-%E5%8C%BA%E5%88%AB"><span class="toc-text">4.10.1. åŒºåˆ«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-10-2-%E5%93%AA%E4%BA%9B%E4%BD%8D%E7%BD%AE%E9%9C%80%E8%A6%81%E6%8D%A2%E6%A1%B6"><span class="toc-text">4.10.2. å“ªäº›ä½ç½®éœ€è¦æ¢æ¡¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-11-null-%E9%94%AE-null-%E5%80%BC"><span class="toc-text">4.11. null é”® null å€¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-12-2-%E7%9A%84-N-%E6%AC%A1%E6%96%B9%E2%AD%90%EF%B8%8F%F0%9F%94%B4"><span class="toc-text">4.12. 2 çš„ N æ¬¡æ–¹â­ï¸ğŸ”´</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-12-1-%E5%8E%9F%E5%9B%A0"><span class="toc-text">4.12.1. åŸå› </span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-12-2-%E6%BA%90%E7%A0%81"><span class="toc-text">4.12.2. æºç </span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E7%BA%A2%E9%BB%91%E6%A0%91"><span class="toc-text">5. çº¢é»‘æ ‘</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-hash-%E7%B4%A2%E5%BC%95%E4%B8%8E-B-%E6%A0%91%E7%B4%A2%E5%BC%95%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">6. hash ç´¢å¼•ä¸ B æ ‘ç´¢å¼•çš„åŒºåˆ«</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%90%84%E7%A7%8D%E6%AF%94%E8%BE%83"><span class="toc-text">7. å„ç§æ¯”è¾ƒ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E6%B3%8A%E6%9D%BE%E5%88%86%E5%B8%83"><span class="toc-text">8. æ³Šæ¾åˆ†å¸ƒ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E7%89%B9%E7%82%B9"><span class="toc-text">9. ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E9%98%B2%E6%AD%A2%E5%93%88%E5%B8%8C%E7%A2%B0%E6%92%9E%E7%9A%84%E6%8E%AA%E6%96%BD%E2%AD%90%EF%B8%8F%F0%9F%94%B4"><span class="toc-text">10. é˜²æ­¢å“ˆå¸Œç¢°æ’çš„æªæ–½â­ï¸ğŸ”´</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E5%8F%82%E8%80%83"><span class="toc-text">11. å‚è€ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1-%E9%BB%91%E9%A9%AC"><span class="toc-text">11.1. é»‘é©¬</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-1-%E8%A7%86%E9%A2%91"><span class="toc-text">11.1.1. è§†é¢‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-2-%E8%B5%84%E6%96%99"><span class="toc-text">11.1.2. èµ„æ–™</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-old"><span class="toc-text">11.2. old</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/012-%E7%BB%8F%E9%AA%8C%E4%B8%93%E9%A2%98/%E7%BB%8F%E9%AA%8C%E4%B8%93%E9%A2%98-%E9%A3%8E%E6%8E%A7%E7%B3%BB%E7%BB%9F-2%E3%80%81%E9%A3%8E%E6%8E%A7%E4%B8%AD%E5%8F%B0/" title="æ— é¢˜"><img src="https://picsum.photos/1920/1081" onerror='this.onerror=null,this.src="/null"' alt="æ— é¢˜"></a><div class="content"><a class="title" href="/2023/06/13/012-%E7%BB%8F%E9%AA%8C%E4%B8%93%E9%A2%98/%E7%BB%8F%E9%AA%8C%E4%B8%93%E9%A2%98-%E9%A3%8E%E6%8E%A7%E7%B3%BB%E7%BB%9F-2%E3%80%81%E9%A3%8E%E6%8E%A7%E4%B8%AD%E5%8F%B0/" title="æ— é¢˜">æ— é¢˜</a><time datetime="2023-06-13T23:32:43.044Z" title="å‘è¡¨äº 2023-06-14 07:32:43">2023-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/005-%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98-15%E3%80%81%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/" title="åˆ†å¸ƒå¼ä¸“é¢˜-15ã€é“¾è·¯è¿½è¸ª"><img src="https://picsum.photos/1920/962" onerror='this.onerror=null,this.src="/null"' alt="åˆ†å¸ƒå¼ä¸“é¢˜-15ã€é“¾è·¯è¿½è¸ª"></a><div class="content"><a class="title" href="/2023/06/13/005-%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%93%E9%A2%98-15%E3%80%81%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/" title="åˆ†å¸ƒå¼ä¸“é¢˜-15ã€é“¾è·¯è¿½è¸ª">åˆ†å¸ƒå¼ä¸“é¢˜-15ã€é“¾è·¯è¿½è¸ª</a><time datetime="2023-06-13T16:00:00.000Z" title="å‘è¡¨äº 2023-06-14 00:00:00">2023-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/013-%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/%E8%B5%84%E6%BA%90%E5%AF%BC%E8%88%AA/" title="èµ„æºå¯¼èˆª"><img src="https://picsum.photos/1920/992" onerror='this.onerror=null,this.src="/null"' alt="èµ„æºå¯¼èˆª"></a><div class="content"><a class="title" href="/2023/06/13/013-%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/%E8%B5%84%E6%BA%90%E5%AF%BC%E8%88%AA/" title="èµ„æºå¯¼èˆª">èµ„æºå¯¼èˆª</a><time datetime="2023-06-13T16:00:00.000Z" title="å‘è¡¨äº 2023-06-14 00:00:00">2023-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/014-AI%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98/%E7%AE%97%E6%B3%95-0%E3%80%81%E6%B1%87%E6%80%BB/" title="ç®—æ³•-0ã€æ±‡æ€»"><img src="https://picsum.photos/1920/972" onerror='this.onerror=null,this.src="/null"' alt="ç®—æ³•-0ã€æ±‡æ€»"></a><div class="content"><a class="title" href="/2023/06/13/014-AI%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98/%E7%AE%97%E6%B3%95-0%E3%80%81%E6%B1%87%E6%80%BB/" title="ç®—æ³•-0ã€æ±‡æ€»">ç®—æ³•-0ã€æ±‡æ€»</a><time datetime="2023-06-13T16:00:00.000Z" title="å‘è¡¨äº 2023-06-14 00:00:00">2023-06-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/13/014-AI%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98/%E7%AE%97%E6%B3%95-1%E3%80%81%E9%A2%98%E7%9B%AE%E8%A7%A3%E6%9E%90/" title="ç®—æ³•-1ã€é¢˜ç›®è§£æ"><img src="https://picsum.photos/1920/1082" onerror='this.onerror=null,this.src="/null"' alt="ç®—æ³•-1ã€é¢˜ç›®è§£æ"></a><div class="content"><a class="title" href="/2023/06/13/014-AI%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98/%E7%AE%97%E6%B3%95-1%E3%80%81%E9%A2%98%E7%9B%AE%E8%A7%A3%E6%9E%90/" title="ç®—æ³•-1ã€é¢˜ç›®è§£æ">ç®—æ³•-1ã€é¢˜ç›®è§£æ</a><time datetime="2023-06-13T16:00:00.000Z" title="å‘è¡¨äº 2023-06-14 00:00:00">2023-06-14</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url('https://unpkg.com/justlovesmile-img/cover6.JPG')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Taylor Luo</div><div class="framework-info"><span>æ¡†æ¶</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class="js-pjax"><script>(()=>{const o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo-taylorluo.vercel.app/",region:"ap-shanghai",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null)),GLOBAL_CONFIG_SITE.isPost&&(()=>{const o=document.getElementById("twikoo-count");o&&twikoo.getCommentsCount({envId:"https://twikoo-taylorluo.vercel.app/",region:"ap-shanghai",urls:[window.location.pathname],includeReply:!1}).then((function(t){o.innerText=t[0].count})).catch((function(o){console.error(o)}))})()},t=()=>{"object"!=typeof twikoo?getScript("https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js").then(o):setTimeout(o,0)};t()})()</script></div><script defer id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zindex="-1" mobile="false" data-click="true"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="æ‹¼æ,è‡ªå¼º,æ­£ç›´,è‡ªä¿¡" data-fontsize="15px" data-random="false" async></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>